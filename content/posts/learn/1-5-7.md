---
date: 2023-08-06T18:09:28+08:00
title: "从零开始的计算机网络5-7"
draft: false
description: "五.运输层"
url: "/learn/1-5-7"
keywords:
- 计算机网络
categories:
- 学
tags:
- 计算机网络
---# TCP可靠传输的实现

TCP基于**以字节为单位的滑动窗口**来实现可靠传输

虽然发送方的发送窗口是根据接收方的接收窗口设置的，但在同一时刻，发送方的**发送窗口并不总是和接收方的接收窗口**一样大。

- 网络传送窗口值需要经历一定的时间滞后，并且这个时间还是不确定的。

- 发送方还可能根据网络当时的拥塞情况适当减小自己的发送窗口尺寸。

对于**不按序到达的数据应如何处理**，TCP并无明确规定。

- 如果接收方把不按序到达的数据一律丢弃，那么接收窗口的管理将会比较简单，但这样做对网络资源的利用不利,因为发送方会重复传送较多的数据。

- TCP通常对不按序到达的数据是先临时存放在接收窗口中，等到字节流中所缺少的字节收到后，再**按序交付上层的应用进程**。

TCP要求接收方必须有**累积确认和捎带确认机制**，这样可以减小传输开销。接收方可以在合适的时候发送确认，也可以在自己有数据要发送时把确认信息顺便捎带上。

- 接收方不应过分推迟发送确认，否则会导致发送方不必要的超时重传，这反而浪费了网络的资源。

- TCP标准规定，确认推迟的时间不应超过0.5秒。若收到一连串具有最大长度的报文段，则必须每隔-个报文段就发送一个确认[RFC 1122]。

- 捎带确认实际上并不经常发生，因为大多数应用程序很少同时在两个方向上发送数据。

**TCP的通信是全双工通信**。通信中的每一方都在发送和接收报文段。因此，每一方都有自己的发送窗口和接收窗口。在谈到这些窗口时，一定要弄清楚是哪一方的窗口。

例题：主机甲与主机乙之间已建立一个TCP连接，主机甲向主机乙发送了两个连续的TCP段，分别包含300字节和500字节的有效载荷，第一个段的序号为200，主机乙正确接收到两个段后，发送给主机甲的确认序号是

A.500    B.700    C.800    D.1000

解析：

![](https://img.0pt.im/computernet/5-7/5-7-1.png)

选D

例题：主机甲与主机乙之间已建立一个TCP连接，主机甲向主机乙发送了3个连续的TCP段，分别包含300字节、400字节和500字节的有效载荷，第3个段的序号为900。若主机乙仅正确接收到第1个和第3个段，则主机乙发送给主机甲的确认序号是

A.300    B.500    C.1200    D.1400

解析：

![](https://img.0pt.im/computernet/5-7/5-7-2.png)
