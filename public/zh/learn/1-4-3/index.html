<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>从零开始的计算机网络4-3 | 春风少年兄</title><meta name=keywords content="计算机网络"><meta name=description content="四.网络层"><meta name=author content="Me"><link rel=canonical href=https://blog.0pt.im/learn/1-4-3/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.a7e65f948d47ba4355f19f4d95c472c871278312e92de4f796e75f0c3155eb98.css integrity="sha256-p+ZflI1HukNV8Z9NlcRyyHEngxLpLeT3ludfDDFV65g=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://img.0pt.im/blogbuilt/title.jpeg><link rel=icon type=image/png sizes=16x16 href=https://img.0pt.im/blogbuilt/title.jpeg><link rel=icon type=image/png sizes=32x32 href=https://img.0pt.im/blogbuilt/title.jpeg><link rel=apple-touch-icon href=https://img.0pt.im/blogbuilt/title.jpeg><link rel=mask-icon href=https://img.0pt.im/blogbuilt/title.jpeg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="从零开始的计算机网络4-3"><meta property="og:description" content="四.网络层"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.0pt.im/learn/1-4-3/"><meta property="og:image" content="https://blog.0pt.im/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-24T18:09:28+08:00"><meta property="article:modified_time" content="2023-07-24T18:09:28+08:00"><meta property="og:site_name" content="春风少年兄"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.0pt.im/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="从零开始的计算机网络4-3"><meta name=twitter:description content="四.网络层"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"从零开始的计算机网络4-3","item":"https://blog.0pt.im/learn/1-4-3/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"从零开始的计算机网络4-3","name":"从零开始的计算机网络4-3","description":"四.网络层","keywords":["计算机网络"],"articleBody":"IPv4地址概述 在TCP/IP体系中，IP地址是一个最基本的概念，我们必须把它弄清楚。\nIPv4地址就是给因特网(Internet)上的每一台主机(或路由器）的每一个接口分配一个在全世界范围内是唯一的32比特的标识符。\nIP地址由因特网名字和数字分配机构ICANN(Internet Corporation for Assigned Names and Numbers)进行分配。\n我国用户可向亚太网络信息中心APNIC(Asia Pacific Network Information Center)申请IP地址，需要缴费。\n2011年2月3日，互联网号码分配管理局IANA(由ICANN行使职能）宣布，IPv4地址已经分配完毕。\n我国在2014至2015年也逐步停止了向新用户和应用分配IPv4地址。同时全面开展商用部署\nIPv4地址的编址方法经历了如下三个历史阶段:\n1981年 分类编址\n1985年 划分子网\n1993年 无分类编址\n32比特的IPv4地址不方便阅读、记录以及输入等，因此IPv4地址采用点分十进制表示方法以方便用户使用。\n例题：请将以下这些32比特的IPv4地址转换为点分十进制形式。\n(1) 00001010 11111110 00001111 11110000\n(2)10101100 00010000 10111111 11110111\n(3)11000000 10101000 10100101 00000111\n答案：\n(1)10.254.15.240 (2)172.16.191.247 (3)192.168.165.7\n二进制与十进制的转换自己学，较简单\n分类编址的IPv4地址 注意事项:\n只有A类、B类和C类地址可分配给网络中的主机或路由器的各接口\n主机号为“全0”的地址是网络地址，不能分配给主机或路由器的各接口\n主机号为“全1”的地址是广播地址，不能分配给主机或路由器的各接口\nA类地址 可指派的网络数量为2^(8-1) - 2 = 126(减2的原因是除去最小网络号0和最大网络号127)\n每个网络中可分配的IP地址数量为2^24 -2= 16777214(减2的原因是除去主机号为全0的网络地址和全1的广播地址)\nB类地址 可指派的网络数量为2^(16-2) =16384\n每个网络中可分配的IP地址数量为2^16 - 2 = 65534(减2的原因是除去主机号为全0的网络地址和全1的广播地址)\n注意:有些教材中指出128.0是保留网络号，B类第一个可指派的网络号为128.1。但根据2002年9月发表的RFC3330文档，128.0网络号已经可以分配了。\nC类地址 可指派的网络数量为2^(24-3) = 2097152\n每个网络中可分配的IP地址数量为2^8 - 2= 254 (减2的原因是除去主机号为全0的网络地址和全1的广播地址)\n注意:有些教材中指出192.0.0是保留网络号，C类第一个可指派的网络号为192.0.1。但根据2002年9月发表的RFC 3330文档，192.0.0网络号已经可以分配了。只不过目前还没有分配出去。\n例题：\n解析：\n1.根据地址左起第一个十进制数的值，可以判断出网络类别(小于127的为A类，128~191的为B类，192~223的为C类);\n2.根据网络类别，就可找出地址中的网络号部分和主机号部分(A类地址网络号为左起第一个字节，B类地址网络号为左起前两个字节,C类地址网络号为左起前三个字节);\n3.以下三种情况的地址不能指派给主机或路由器接口:\nA类网络号0和127\n主机号为“全0”，这是网络地址\n主机号为“全1”，这是广播地址\n例题：下列IP地址中，只能作为IP分组的源IP地址但不能作为目的IP地址的是\nA.0.0.0.0 B.127.0.0.1 C.20.10.10.3 D.255.255.255.25\n解析：\n地址0.0.0.0是一个特殊的IPv4地址，只能作为源地址使用，表示“在本网络上的本主机”。封装有DHCPDiscovery报文的IP分组的源地址使用0.0.0.0;\n以127开头且后面三个字节非“全O”或“全1”的IP地址是一类特殊的IPv4地址，既可以作为源地址使用，也可以作为目的地址使用，用于本地软件环回测试，例如常用的环回测试地址127.0.0.1;\n地址255.255.255.255是一个特殊的IPv4地址，只能作为目的地址使用，表示“只在本网络上进行广播(各路由器均不转发)”。\n例题：请根据本节课所学内容给出下图各网络的IPv4地址分配方案。请按照节约IP地址的原则进行分配。\n解析：\n路由器接口也需要一个ip地址\n划分子网的的IPv4地址 将原有的网络地址划分成若干个更细的子网，避免重复申请新的网络地址，从而节约网络地址。\n如某单位申请了一个b类地址145.16.0.0，将其分为3个子网，主机号为145.16向后借去子网号，如145.16.0，145.16.2，145.16.3\n10010001.00010000.00000000.00000000 (145.16.0.0)\n10010001.00010000.00000001.00000000 (145.16.1.0)\n10010001.00010000.00000010.00000000 (145.16.2.0)\n10010001.00010000.00000011.00000000 (145.16.3.0)\n32比特的子网掩码可以表明分类IP地址的主机号部分被借用了几个比特作为子网号\n子网掩码使用连续的比特1来对应网络号和子网号\n子网掩码使用连续的比特0来对应主机号\n将划分子网的IPv4地址与其相应的子网掩码进行逻辑与运算就可得到IPv4地址所在子网的网络地址\n例题：已知某个网络的地址为218.75.230.0，使用子网掩码255.255.255.128对其进行子网划分，请给出划分细节。\n对正常c类网进行分析\n但是我们要分子网将主机号写成8个比特的二进制数\n相当于分成2个子网。\n例题：已知某个网络的地址为218.75.230.0，使用子网掩码255.255.255.192对其进行子网划分，请给出划分细节。\n解析：\n1.根据所给网络地址可知其为C类网络地址，网络号占3个字节，主机号占1个字节;\n2.根据所给子网掩码可知从1字节主机号中借用2位作为子网号;\n例题：某主机的IP地址为180.80.77.55，子网掩码为255.255.252.0，如该主机向其所在子网发送广播分组，则目的地址可以是\nA.180.80.76.0 B.180.80.76.255 C.180.80.77.255 D.180.80.79.255\n解析：\n默认的子网掩码是指在未划分子网的情况下使用的子网掩码。\n无分类编址的IPv4地址 划分子网在一定程度上缓解了因特网在发展中遇到的困难，但是数量巨大的C类网因为其地址空间太小并没有得到充分使用，而因特网的IP地址仍在加速消耗，整个IPv4地址空间面临全部耗尽的威胁。\n为此，因特网工程任务组IETF又提出了采用无分类编址的方法来解决IP地址紧张的问题同时还专门成立IPv6工作组负责研究新版本IP以彻底解决IP地址耗尽问题。\n1993年，IETF发布了无分类域间路由选择CIDR(Classless Inter-Domain Routing)的RFC文档:RFC 1517~1519和1520。\nCIDR消除了传统的A类、B类和C类地址，以及划分子网的概念;\nCIDR可以更加有效地分配IPv4的地址空间，并且可以在新的IPv6使用之前允许因特网的规模继续增长。\nCIDR使用“斜线记法”，或称CIDR记法。即在IPv4地址后面加上斜线“/”，在斜线后面写上网络前缀所占的比特数量。\n举例：128.14.35.7 / 20\n网络前缀占用的比特数量：20 主机编号占用的比特数量： 32-20=12\nCIDR实际上是将网络前缀都相同的连续的IP地址组成一个“CIDR地址块”。\n我们只要知道CIDR地址块中的任何一个地址，就可以知道该地址块的全部细节:\n地址块的最小地址\n地址块的最大地址\n地址块中的地址数量\n地址块聚合某类网络(A类、B类或C类)的数量\n地址掩码（也可继续称为子网掩码）\n例题：请给出CIDR地址块128.14.35.7/20的全部细节（最小地址，最大地址，地址数量，聚合C类网数量，地址掩码)。\n解析：\n例题：请给出CIDR地址块206.0.64.8/18的全部细节（最小地址，最大地址，地址数量，聚合C类网数量，地址掩码）。\n解析：\n路由聚合(构造超网)\n举例：\n网络前缀越长，地址块越小，路由越具体;\n若路由器查表转发分组时发现有多条路由可选，则选择网络前缀最长的那条，这称为最长前缀匹配,因为这样的路由更具体。\n例题：在子网192.168.4.0 / 30中，能接收目的地址为192.168.4.3的IP分组的最大主机数是\nA.0 B.1 C.2 D.4\n解析：\n选C\n例题：某路由表中有转发接口相同的4条路由表项，其目的网络地址分别为35.230.32.0/21、35.230.40.0/21、35.230.48.0/21和35.230.56.0/21，将该4条路由聚合后的目的网络地址为\nA.35.230.0.0/19 B.35.230.0.0/20 C.35.230.32.0/19 D.35.230.32.0/20\n解析：\n故选C\nIPv4地址的应用规划 1.定长的子网掩码FLSM\n使用同一个子网掩码来划分子网\n每个子网所分配的IP地址数量相同，造成IP地址的浪费\n2.变长的子网掩码VLSM\n使用不同的子网掩码来划分子网\n每个子网所分配的IP地址数量可以不同，尽可能减少对IP地址的浪费\nFLSM举例\n假设申请到的C类网络为218.75.230.0，请使用定长的子网掩码给下图所示的小型互联网中的各设备分配IP地址。\n应用需求:将C类网络218.75.230.0划分成5个子网，每个子网上可分配的IP地址数量不得少于各自的需求。\n任选5个\nVLSM举例\n假设申请到的C类网络为218.75.230.0/24，请使用定长的子网掩码给下图所示的小型互联网中的各设备分配IP地址。\n应用需求:从地址块218.75.230.0/24中取出5个地址块\n(1个“/27”地址块，3个“/28”地址块，1个“/30\"(1个“/27”地址块，3个“/28”地址块，1个“/30\"地址块)，按需分配给上图所示的5个网络。\n在该地址块中给左图所示的网络N1~N5分配子块，分配原则是“每个子块的起点位置不能随意选取，只能选取块大小整数倍的地址作为起点”。建议先给大的子块分配。\n","wordCount":"191","inLanguage":"zh","datePublished":"2023-07-24T18:09:28+08:00","dateModified":"2023-07-24T18:09:28+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.0pt.im/learn/1-4-3/"},"publisher":{"@type":"Organization","name":"春风少年兄","logo":{"@type":"ImageObject","url":"https://img.0pt.im/blogbuilt/title.jpeg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.0pt.im/zh/ accesskey=h title="世纪大道 (Alt + H)"><img src=https://blog.0pt.im/apple-touch-icon.png alt aria-label=logo height=35>世纪大道</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.0pt.im/zh/search title=找><span>找</span></a></li><li><a href=https://blog.0pt.im/zh/learn/ title=学><span>学</span></a></li><li><a href=https://blog.0pt.im/zh/music/ title=音><span>音</span></a></li><li><a href=https://blog.0pt.im/zh/game/ title=游><span>游</span></a></li><li><a href=https://blog.0pt.im/zh/think/ title=感><span>感</span></a></li><li><a href=https://blog.0pt.im/zh/link/ title=链><span>链</span></a></li><li><a href=https://blog.0pt.im/zh/archives title=时><span>时</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.0pt.im/zh/>主页</a></div><h1 class=post-title>从零开始的计算机网络4-3</h1><div class=post-description>四.网络层</div><div class=post-meta><span title='2023-07-24 18:09:28 +0800 CST'>七月 24, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;191 字&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/antipeth/hugo/content/posts/learn/1-4-3.md rel="noopener noreferrer" target=_blank></a></div></header><div class=post-content><h1 id=ipv4地址概述>IPv4地址概述<a hidden class=anchor aria-hidden=true href=#ipv4地址概述>#</a></h1><p>在TCP/IP体系中，IP地址是一个最基本的概念，我们必须把它弄清楚。</p><p>IPv4地址就是给因特网(Internet)上的<strong>每一台主机(或路由器）的每一个接口</strong>分配一个在全世界范围内是<strong>唯一的32比特的标识符</strong>。</p><p>IP地址由因特网名字和数字分配机构ICANN(Internet Corporation for Assigned Names and Numbers)进行分配。</p><ul><li><p>我国用户可向亚太网络信息中心APNIC(Asia Pacific Network Information Center)申请IP地址，需要缴费。</p></li><li><p>2011年2月3日，互联网号码分配管理局IANA(由ICANN行使职能）宣布，IPv4地址已经分配完毕。</p></li><li><p>我国在2014至2015年也逐步停止了向新用户和应用分配IPv4地址。同时全面开展商用部署</p></li></ul><p><strong>IPv4地址的编址方法经历了如下三个历史阶段</strong>:</p><ul><li><p>1981年 分类编址</p></li><li><p>1985年 划分子网</p></li><li><p>1993年 无分类编址</p></li></ul><p>32比特的IPv4地址不方便阅读、记录以及输入等，因此IPv4地址采用点分十进制表示方法以方便用户使用。</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-1.png alt></p><p>例题：请将以下这些32比特的IPv4地址转换为点分十进制形式。</p><p>(1) 00001010 11111110 00001111 11110000</p><p>(2)10101100 00010000 10111111 11110111</p><p>(3)11000000 10101000 10100101 00000111</p><p>答案：</p><p>(1)10.254.15.240 (2)172.16.191.247 (3)192.168.165.7</p><blockquote><p>二进制与十进制的转换自己学，较简单</p></blockquote><h3 id=分类编址的ipv4地址>分类编址的IPv4地址<a hidden class=anchor aria-hidden=true href=#分类编址的ipv4地址>#</a></h3><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-2.png alt></p><p>注意事项:</p><p>只有A类、B类和C类地址可分配给网络中的主机或路由器的各接口</p><p>主机号为“全0”的地址是网络地址，不能分配给主机或路由器的各接口</p><p>主机号为“全1”的地址是广播地址，不能分配给主机或路由器的各接口</p><h3 id=a类地址>A类地址<a hidden class=anchor aria-hidden=true href=#a类地址>#</a></h3><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-3.png alt></p><p>可指派的网络数量为2^(8-1) - 2 = 126(减2的原因是除去最小网络号0和最大网络号127)</p><p>每个网络中可分配的IP地址数量为2^24 -2= 16777214(减2的原因是除去主机号为全0的网络地址和全1的广播地址)</p><h3 id=b类地址>B类地址<a hidden class=anchor aria-hidden=true href=#b类地址>#</a></h3><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-5.png alt></p><p>可指派的网络数量为2^(16-2) =16384</p><p>每个网络中可分配的IP地址数量为2^16 - 2 = 65534(减2的原因是除去主机号为全0的网络地址和全1的广播地址)</p><p>注意:有些教材中指出128.0是保留网络号，B类第一个可指派的网络号为128.1。但根据2002年9月发表的RFC3330文档，128.0网络号已经可以分配了。</p><h3 id=c类地址>C类地址<a hidden class=anchor aria-hidden=true href=#c类地址>#</a></h3><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-6.png alt></p><p>可指派的网络数量为2^(24-3) = 2097152</p><p>每个网络中可分配的IP地址数量为2^8 - 2= 254 (减2的原因是除去主机号为全0的网络地址和全1的广播地址)</p><p>注意:有些教材中指出192.0.0是保留网络号，C类第一个可指派的网络号为192.0.1。但根据2002年9月发表的RFC 3330文档，192.0.0网络号已经可以分配了。只不过目前还没有分配出去。</p><p>例题：</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-7.png alt></p><p>解析：</p><p>1.根据地址左起第一个十进制数的值，可以判断出网络类别(小于127的为A类，128~191的为B类，192~223的为C类);</p><p>2.根据网络类别，就可找出地址中的网络号部分和主机号部分(A类地址网络号为左起第一个字节，B类地址网络号为左起前两个字节,C类地址网络号为左起前三个字节);</p><p>3.以下三种情况的地址不能指派给主机或路由器接口:</p><ul><li><p>A类网络号0和127</p></li><li><p>主机号为“全0”，这是网络地址</p></li><li><p>主机号为“全1”，这是广播地址</p></li></ul><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-8.png alt></p><p>例题：下列IP地址中，只能作为IP分组的源IP地址但不能作为目的IP地址的是</p><p>A.0.0.0.0 B.127.0.0.1 C.20.10.10.3 D.255.255.255.25</p><p>解析：</p><p>地址0.0.0.0是一个特殊的IPv4地址，只能作为源地址使用，表示“在本网络上的本主机”。封装有DHCPDiscovery报文的IP分组的源地址使用0.0.0.0;</p><p>以127开头且后面三个字节非“全O”或“全1”的IP地址是一类特殊的IPv4地址，既可以作为源地址使用，也可以作为目的地址使用，用于本地软件环回测试，例如常用的环回测试地址127.0.0.1;</p><p>地址255.255.255.255是一个特殊的IPv4地址，只能作为目的地址使用，表示“只在本网络上进行广播(各路由器均不转发)”。</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-9.png alt></p><p>例题：请根据本节课所学内容给出下图各网络的IPv4地址分配方案。请按照节约IP地址的原则进行分配。</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-10.png alt></p><p>解析：</p><p><strong>路由器接口也需要一个ip地址</strong></p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-11.png alt></p><h3 id=划分子网的的ipv4地址>划分子网的的IPv4地址<a hidden class=anchor aria-hidden=true href=#划分子网的的ipv4地址>#</a></h3><p>将原有的网络地址划分成若干个更细的子网，避免重复申请新的网络地址，从而节约网络地址。</p><p>如某单位申请了一个b类地址145.16.0.0，将其分为3个子网，主机号为145.16向后借去子网号，如145.16.0，145.16.2，145.16.3</p><p>10010001.00010000.00000000.00000000 (145.16.0.0)</p><p>10010001.00010000.00000001.00000000 (145.16.1.0)</p><p>10010001.00010000.00000010.00000000 (145.16.2.0)</p><p>10010001.00010000.00000011.00000000 (145.16.3.0)</p><p><strong>32比特的子网掩码可以表明分类IP地址的主机号部分被借用了几个比特作为子网号</strong></p><ul><li><p>子网掩码使用<strong>连续的比特1来对应网络号和子网号</strong></p></li><li><p>子网掩码使用<strong>连续的比特0来对应主机号</strong></p></li><li><p>将划分子网的<strong>IPv4地址</strong>与其相应的<strong>子网掩码</strong>进行<strong>逻辑与运算</strong>就可得到IPv4地址<strong>所在子网的网络地址</strong></p></li></ul><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-12.png alt></p><p>例题：已知某个网络的地址为218.75.230.0，使用子网掩码255.255.255.128对其进行子网划分，请给出划分细节。</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-13.png alt></p><p>对正常c类网进行分析</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-14.png alt></p><p>但是我们要分子网将主机号写成8个比特的二进制数</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-15.png alt></p><p>相当于分成2个子网。</p><p>例题：已知某个网络的地址为218.75.230.0，使用子网掩码255.255.255.192对其进行子网划分，请给出划分细节。</p><p>解析：</p><p>1.根据所给网络地址可知其为C类网络地址，网络号占3个字节，主机号占1个字节;</p><p>2.根据所给子网掩码可知从1字节主机号中借用2位作为子网号;</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-16.png alt></p><p>例题：某主机的IP地址为180.80.77.55，子网掩码为255.255.252.0，如该主机向其所在子网发送广播分组，则目的地址可以是</p><p>A.180.80.76.0 B.180.80.76.255 C.180.80.77.255 D.180.80.79.255</p><p>解析：</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-18.png alt></p><p>默认的子网掩码是指在未划分子网的情况下使用的子网掩码。</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-19.png alt></p><h3 id=无分类编址的ipv4地址>无分类编址的IPv4地址<a hidden class=anchor aria-hidden=true href=#无分类编址的ipv4地址>#</a></h3><p>划分子网在一定程度上缓解了因特网在发展中遇到的困难，但是<strong>数量巨大的C类网</strong>因为其<strong>地址空间太小</strong>并<strong>没有得到充分使用</strong>，而因特网的IP地址仍在加速消耗，整个<strong>IPv4地址空间面临全部耗尽的威胁</strong>。</p><p>为此，因特网工程任务组IETF又提出了采用<strong>无分类编址</strong>的方法来解决IP地址紧张的问题同时还专门成立IPv6工作组负责研究新版本IP以彻底解决IP地址耗尽问题。</p><p>1993年，IETF发布了<strong>无分类域间路由选择</strong>CIDR(Classless Inter-Domain Routing)的RFC文档:RFC 1517~1519和1520。</p><ul><li><p><strong>CIDR消除了传统的A类、B类和C类地址，以及划分子网的概念</strong>;</p></li><li><p><strong>CIDR可以更加有效地分配IPv4的地址空间</strong>，并且可以在新的IPv6使用之前允许因特网的规模继续增长。</p></li></ul><p>CIDR使用“斜线记法”，或称CIDR记法。即在IPv4地址后面加上斜线“/”，在斜线后面写上网络前缀所占的比特数量。</p><p>举例：128.14.35.7 / 20</p><p>网络前缀占用的比特数量：20 主机编号占用的比特数量： 32-20=12</p><p>CIDR实际上是<strong>将网络前缀都相同的连续的IP地址组成一个“CIDR地址块”</strong>。</p><p>我们只要知道CIDR地址块中的任何一个地址，就可以知道该地址块的全部细节:</p><ul><li><p>地址块的最小地址</p></li><li><p>地址块的最大地址</p></li><li><p>地址块中的地址数量</p></li><li><p>地址块聚合某类网络(A类、B类或C类)的数量</p></li><li><p>地址掩码（也可继续称为子网掩码）</p></li></ul><p>例题：请给出CIDR地址块128.14.35.7/20的全部细节（最小地址，最大地址，地址数量，聚合C类网数量，地址掩码)。</p><p>解析：</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-20.png alt></p><p>例题：请给出CIDR地址块206.0.64.8/18的全部细节（最小地址，最大地址，地址数量，聚合C类网数量，地址掩码）。</p><p>解析：</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-21.png alt></p><p><strong>路由聚合</strong>(构造超网)</p><p>举例：</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-22.png alt></p><p><strong>网络前缀越长，地址块越小，路由越具体</strong>;</p><p>若路由器查表转发分组时发现有多条路由可选，则选择网络前缀最长的那条，这称为<strong>最长前缀匹配</strong>,因为这样的路由更具体。</p><p>例题：在子网192.168.4.0 / 30中，能接收目的地址为192.168.4.3的IP分组的最大主机数是</p><p>A.0 B.1 C.2 D.4</p><p>解析：</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-23.png alt></p><p>选C</p><p>例题：某路由表中有转发接口相同的4条路由表项，其目的网络地址分别为35.230.32.0/21、35.230.40.0/21、35.230.48.0/21和35.230.56.0/21，将该4条路由聚合后的目的网络地址为</p><p>A.35.230.0.0/19 B.35.230.0.0/20 C.35.230.32.0/19 D.35.230.32.0/20</p><p>解析：</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-24.png alt></p><p>故选C</p><h3 id=ipv4地址的应用规划>IPv4地址的应用规划<a hidden class=anchor aria-hidden=true href=#ipv4地址的应用规划>#</a></h3><p>1.定长的子网掩码FLSM</p><ul><li><p>使用同一个子网掩码来划分子网</p></li><li><p>每个子网所分配的IP地址数量相同，造成IP地址的浪费</p></li></ul><p>2.变长的子网掩码VLSM</p><ul><li><p>使用不同的子网掩码来划分子网</p></li><li><p>每个子网所分配的IP地址数量可以不同，尽可能减少对IP地址的浪费</p></li></ul><p>FLSM举例</p><p>假设申请到的C类网络为218.75.230.0，请使用定长的子网掩码给下图所示的小型互联网中的各设备分配IP地址。</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-25.png alt></p><p>应用需求:将C类网络218.75.230.0划分成5个子网，每个子网上可分配的IP地址数量不得少于各自的需求。</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-26.png alt></p><p>任选5个</p><p>VLSM举例</p><p>假设申请到的C类网络为218.75.230.0/24，请使用定长的子网掩码给下图所示的小型互联网中的各设备分配IP地址。</p><p><img loading=lazy src=https://img.0pt.im/computernet/4-3/4-3-27.png alt></p><p>应用需求:从地址块218.75.230.0/24中取出5个地址块</p><p>(1个“/27”地址块，3个“/28”地址块，1个“/30"(1个“/27”地址块，3个“/28”地址块，1个“/30"地址块)，按需分配给上图所示的5个网络。</p><p>在该地址块中给左图所示的网络N1~N5分配子块，分配原则是“<strong>每个子块的起点位置不能随意选取，只能选取块大小整数倍的地址作为起点</strong>”。建议先给大的子块分配。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.0pt.im/zh/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/>计算机网络</a></li></ul><nav class=paginav><a class=prev href=https://blog.0pt.im/learn/1-4-4/><span class=title>« 上一页</span><br><span>从零开始的计算机网络4-4</span></a>
<a class=next href=https://blog.0pt.im/learn/1-4-2/><span class=title>下一页 »</span><br><span>从零开始的计算机网络4-2</span></a></nav></footer><style>.comments_details summary::marker{font-size:20px;content:'👉展开评论';color:var(--content)}.comments_details[open] summary::marker{font-size:20px;content:'👇关闭评论';color:var(--content)}</style><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>💬评论</span><hr></div><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.16/twikoo.all.min.js></script>
<script>twikoo.init({envId:"https://twikoo-ten-pearl.vercel.app/",el:"#tcomment",lang:"zh-CN",region:"",path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.0pt.im/zh/>春风少年兄</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>