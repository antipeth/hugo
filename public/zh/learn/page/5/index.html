<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>学 | 春风少年兄</title><meta name=keywords content><meta name=description content="学记"><meta name=author content="Me"><link rel=canonical href=https://blog.0pt.im/learn/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.4b652714b710c7fd948e965adf64e815b9d09f68a358365c02ac09b95e5516be.css integrity="sha256-S2UnFLcQx/2UjpZa32ToFbnQn2ijWDZcAqwJuV5VFr4=" rel="preload stylesheet" as=style><link rel=icon href=https://img.0pt.im/blogbuilt/title.jpeg><link rel=icon type=image/png sizes=16x16 href=https://img.0pt.im/blogbuilt/title.jpeg><link rel=icon type=image/png sizes=32x32 href=https://img.0pt.im/blogbuilt/title.jpeg><link rel=apple-touch-icon href=https://img.0pt.im/blogbuilt/title.jpeg><link rel=mask-icon href=https://img.0pt.im/blogbuilt/title.jpeg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.0pt.im/learn/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="学"><meta property="og:description" content="学记"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.0pt.im/learn/"><meta property="og:image" content="https://blog.0pt.im/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="春风少年兄"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.0pt.im/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="学"><meta name=twitter:description content="学记"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.0pt.im/zh/posts/"},{"@type":"ListItem","position":2,"name":"学","item":"https://blog.0pt.im/learn/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.0pt.im/zh/ accesskey=h title="世纪大道 (Alt + H)"><img src=https://blog.0pt.im/apple-touch-icon.png alt aria-label=logo height=35>世纪大道</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.0pt.im/zh/search title=找><span>找</span></a></li><li><a href=https://blog.0pt.im/zh/learn/ title=学><span>学</span></a></li><li><a href=https://blog.0pt.im/zh/music/ title=音><span>音</span></a></li><li><a href=https://blog.0pt.im/zh/game/ title=游><span>游</span></a></li><li><a href=https://blog.0pt.im/zh/think/ title=感><span>感</span></a></li><li><a href=https://blog.0pt.im/zh/link/ title=链><span>链</span></a></li><li><a href=https://blog.0pt.im/zh/archives title=时><span>时</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://blog.0pt.im/zh/>主页</a>&nbsp;»&nbsp;<a href=https://blog.0pt.im/zh/posts/>Posts</a></div><h1>学
<a href=/learn/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1><div class=post-description>学记</div></header><article class=post-entry><header class=entry-header><h2>从零开始的计算机网络4-5</h2></header><div class=entry-content><p>静态路由配置及其可能产生的路由环路问题 静态路由配置是指用户或网络管理员使用路由器的相关命令给路由器人工配置路由表。
这种人工配置方式简单、开销小。但不能及时适应网络状态(流量、拓扑等)的变化。
一般只在小规模网络中采用。
使用静态路由配置可能出现以下导致产生路由环路的错误
配置错误
聚合了不存在的网络
网络故障
假设R1要转发给192.168.2.0/24，应该转发给R2的接口0。但是R1路由表除了直连自动识别外，没有R2接口0，换句话说，R1不知道目的网络的存在。
因此，我们可以使用路由器的相关配置命令，给R1添加一条到达该目的网络的路由条目。
该路由条目是是我们人工设置的静态路由。
默认路由为0.0.0.0/0，对于本例，下一跳为R2的接口0
人工配置默认路由，减少人工配置工作量，可以删了上一个静态路由。
特定主机路由
静态路由配置错误导致路由环路
R2要转发IP数据报给192.168.1.0/24，但是把静态路由配错了如图所示。如何会发给R3，R3检查路由表，把该数据报发给R2,R2检查路由表，又发给R3，形成路由环路。
为了防止IP数据报在路由环路中永久兜圈，在IP数据报首部设有生存时间TTL字段。
IP数据报进入路由器后，TTL字段的值减1。若TTL的值不等于0，则被路由器转发，否则被丢弃。
聚合了不存在的网络而导致的路由环路
先把黑洞路由当作不存在。R2要转发给192.168.2.0/24，检查路由表，发现192.168.0.0/22的聚合路由，于是发送给R1，R1检查路由表，匹配192.168.2.0/24，于是发送给192.168.2.0/24。
但是，聚合路由192.168.0.0/22包含4个IP，其中2个还不存在，试想，当R2要转发给一个不存在的IP192.168.0.0/24，检查路由表，发现192.168.0.0/22的聚合路由，于是发送给R1，R1检查路由表，只能匹配默认路由，于是发回给R2，然后就形成路由环路。
所以，我们可以在路由表中，添加所聚合的、不存在的黑洞路由。此时R2要转发给一个不存在的IP192.168.0.0/24，检查路由表，发现192.168.0.0/22的聚合路由与192.168.0.0/24的黑洞路由，根据最长前缀匹配，选择到黑洞路由，之后，该数据报被丢弃，相当于进入黑洞，有去无回。
网络故障导致的路由环路
当图示网络故障，路由表会自动删除所直连的路由记录。此时R1要发送给192.168.1.0/24，检查路由表，发现192.168.0.0/22的聚合路由，于是发送给R1，R1检查路由表，只能匹配默认路由，于是发回给R2，然后就形成路由环路。
所以，我们同样也可以添加黑洞路由。可以设置黑洞路由在故障发送后路由记录被删除后自动生效。</p></div><footer class=entry-footer><span title='2023-07-26 18:09:28 +0800 CST'>七月 26, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;25 字&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 从零开始的计算机网络4-5" href=https://blog.0pt.im/learn/1-4-5/></a></article><article class=post-entry><header class=entry-header><h2>从零开始的计算机网络4-4</h2></header><div class=entry-content><p>数据报的发送和转发过程 IP数据报的发送和转发过程包含以下两部分:
主机发送IP数据报
路由器转发IP数据报
为了将重点放在TCP/IP协议栈的网际层发送和转发IP数据报的过程上，在之后的举例中，我们忽略使用ARP协议来获取目的主机或路由器接口的MAC地址的过程以及以太网交换机自学习和转发帧的过程。
举例：
假设C要发送数据给F，源主机如何知道目的主机是否与自己在同一个网络中？通过想与运算。
C怎么知道R的存在？
指定默认网关。
假设A发送数据给D
路由器是如何转发呢？
检查lP数据报首部是否出错:若出错，则直接丢弃该lIP数据报并通告源主机若没有出错，则进行转发
根据lP数据报的目的地址在路由表中查找匹配的条目:若找到匹配的条目，则转发给条目中指示的下一跳若找不到，则丢弃该lP数据报并通告源主机
将目的地址与目的网络相应的地址掩码进行相与，得到的结果为目的网络，即匹配。
路由器隔离广播域，就算广播数据报的目的地址为其他网络，也不转发。
例题：下列网络设备中，能够抑制广播风暴的是
1中继器 2集线器 3网桥 4路由器
A.仅1和2 B.仅3 C.仅3和4 D.仅4
解析：
中继器和集线器工作在物理层，既不隔离冲突域也不隔离广播域。
网桥和交换机(多端口网桥）工作在数据链路层，可以隔离冲突域，不能隔离广播域。
路由器工作在网络层，既隔离冲突域，也隔离广播域。
选D
例题：下列关于IP路由器概念的描述中，正确的是
1运行路由协议，设置路由表
2监测到拥塞时，合理丢弃IP分组
3对收到的IP分组头进行差错校验，确保传输的IP分组不丢失
4根据收到的IP分组的目的IP地址，将其转发到合适的输出线路上
A.仅34 B.仅123 C.仅124 D.1234
解析：
IP路由器工作在TCP/IP体系结构的网际层(或称IP层)，TCP/IP体系结构的网际层并不负责可靠传输，也就是不能确保传输的IP分组不丢失。
IP路由器对收到的lP分组头进行差错校验，当发现错误时会丢弃该IP分组并向源主机发送ICMP差错报告报文(类型为参数错误)。
综上所述，题目中的描述ⅢI是错误的，利用排除法可知选项C正确。题目中的其他描述项都是正确的。
例题：
某网络拓扑如下图所示，其中路由器内网接口、DHCP服务器、WWW服务器与主机1均采用静态IP地址配置，相关地址信息见图中标注;主机2~主机N通过DHCP服务器动态获取IP地址等配置信息。
若主机1的子网掩码和默认网关分别配置为255.255.255.0和111.123.15.2，则该主机是否能访问WWW服务器?是否能访问Internet?请说明理由。
解析：主机1可以访问WWW服务器。从IP地址与子网掩码配置以及物理连接方面看，主机1和wwW服务器在同一网络中。
主机1不能访问Internet，因为它的默认网关错误配置成了DHCP服务器的IP地址,DHCP服务器不具备路由器的功能,无法将IP分组转发到Internet。</p></div><footer class=entry-footer><span title='2023-07-25 18:09:28 +0800 CST'>七月 25, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;47 字&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 从零开始的计算机网络4-4" href=https://blog.0pt.im/learn/1-4-4/></a></article><article class=post-entry><header class=entry-header><h2>从零开始的计算机网络4-3</h2></header><div class=entry-content><p>IPv4地址概述 在TCP/IP体系中，IP地址是一个最基本的概念，我们必须把它弄清楚。
IPv4地址就是给因特网(Internet)上的每一台主机(或路由器）的每一个接口分配一个在全世界范围内是唯一的32比特的标识符。
IP地址由因特网名字和数字分配机构ICANN(Internet Corporation for Assigned Names and Numbers)进行分配。
我国用户可向亚太网络信息中心APNIC(Asia Pacific Network Information Center)申请IP地址，需要缴费。
2011年2月3日，互联网号码分配管理局IANA(由ICANN行使职能）宣布，IPv4地址已经分配完毕。
我国在2014至2015年也逐步停止了向新用户和应用分配IPv4地址。同时全面开展商用部署
IPv4地址的编址方法经历了如下三个历史阶段:
1981年 分类编址
1985年 划分子网
1993年 无分类编址
32比特的IPv4地址不方便阅读、记录以及输入等，因此IPv4地址采用点分十进制表示方法以方便用户使用。
例题：请将以下这些32比特的IPv4地址转换为点分十进制形式。
(1) 00001010 11111110 00001111 11110000
(2)10101100 00010000 10111111 11110111
(3)11000000 10101000 10100101 00000111
答案：
(1)10.254.15.240 (2)172.16.191.247 (3)192.168.165.7
二进制与十进制的转换自己学，较简单
分类编址的IPv4地址 注意事项:
只有A类、B类和C类地址可分配给网络中的主机或路由器的各接口
主机号为“全0”的地址是网络地址，不能分配给主机或路由器的各接口
主机号为“全1”的地址是广播地址，不能分配给主机或路由器的各接口
A类地址 可指派的网络数量为2^(8-1) - 2 = 126(减2的原因是除去最小网络号0和最大网络号127)
每个网络中可分配的IP地址数量为2^24 -2= 16777214(减2的原因是除去主机号为全0的网络地址和全1的广播地址)
B类地址 可指派的网络数量为2^(16-2) =16384
每个网络中可分配的IP地址数量为2^16 - 2 = 65534(减2的原因是除去主机号为全0的网络地址和全1的广播地址)
注意:有些教材中指出128.0是保留网络号，B类第一个可指派的网络号为128.1。但根据2002年9月发表的RFC3330文档，128.0网络号已经可以分配了。
C类地址 可指派的网络数量为2^(24-3) = 2097152...</p></div><footer class=entry-footer><span title='2023-07-24 18:09:28 +0800 CST'>七月 24, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;191 字&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 从零开始的计算机网络4-3" href=https://blog.0pt.im/learn/1-4-3/></a></article><article class=post-entry><header class=entry-header><h2>从零开始的计算机网络4-2</h2></header><div class=entry-content><p>网络层提供的两种服务 面向连接的虚电路服务 可靠通信由网络来保证
必须建立网络层的连接——虚电路VC(Virtual Circuit)
通信双方沿着已建立的虚电路发送分组
目的主机的地址仅在连接建立阶段使用，之后每个分组的首部只需携带一条虚电路的编号(构成虚电路的每一段链路都有一个虚电路编号)。
这种通信方式如果再使用可靠传输的网络协议，就可使所发送的分组最终正确到达接收方(无差错按序到达、不丢失、不重复)。
通信结束后，需要释放之前所建立的虚电路。
很多广域分组交换网都使用面向连接的虚电路服务。例如，曾经的X.25和逐渐过时的帧中继FR、异步传输模式ATM等。
无连接的数据报服务 可靠通信应当由用户主机来保证
不需要建立网络层连接
每个分组可走不同的路径
每个分组的首部必须携带目的主机的完整地址
这种通信方式所传送的分组可能误码、丢失、重复和失序。
由于网络本身不提供端到端的可靠传输服务，这就使网络中的路由器可以做得比较简单，而且价格低廉(与电信网的交换机相比较)。
因特网采用了这种设计思想，也就是将复杂的网络处理功能置于因特网的边缘(用户主机和其内部的运输层)，而将相对简单的尽最大努力的分组交付功能置于因特网核心。</p></div><footer class=entry-footer><span title='2023-07-23 18:09:28 +0800 CST'>七月 23, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;18 字&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 从零开始的计算机网络4-2" href=https://blog.0pt.im/learn/1-4-2/></a></article><article class=post-entry><header class=entry-header><h2>从零开始的计算机网络4-1</h2></header><div class=entry-content><p>网络层概述 网络层的主要任务是实现网络互连，进而实现数据包在各网络之间的传输。
要实现网络层任务，需要解决以下主要问题:
网络层向运输层提供怎样的服务（“可靠传输”还是“不可靠传输”）
网络层寻址问题
路由选择问题
因特网(Internet)是目前全世界用户数量最多的互联网，它使用TCP/IP协议栈。
由于TCP/IP协议栈的网络层使用网际协议IP，它是整个协议栈的核心协议，因此在TCP/IP协议栈中网络层常称为网际层。
综上所述，我们通过学习TCP/IP协议栈的网际层来学习网络层的理论知识和实践技术。</p></div><footer class=entry-footer><span title='2023-07-22 18:09:28 +0800 CST'>七月 22, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;9 字&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 从零开始的计算机网络4-1" href=https://blog.0pt.im/learn/1-4-1/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://blog.0pt.im/learn/page/4/>«&nbsp;上一页&nbsp;</a>
<a class=next href=https://blog.0pt.im/learn/page/6/>下一页&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=https://blog.0pt.im/zh/>春风少年兄</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>