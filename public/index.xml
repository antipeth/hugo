<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>春风少年兄</title>
    <link>https://blog.0pt.im/zh/</link>
    <description>Recent content on 春风少年兄</description>
    <image>
      <title>春风少年兄</title>
      <url>https://blog.0pt.im/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://blog.0pt.im/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 05 Nov 2023 00:48:58 +0800</lastBuildDate><atom:link href="https://blog.0pt.im/zh/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>docker搭建泰拉瑞亚Tshock服务器</title>
      <link>https://blog.0pt.im/game/0-0-1/</link>
      <pubDate>Sun, 05 Nov 2023 00:48:58 +0800</pubDate>
      
      <guid>https://blog.0pt.im/game/0-0-1/</guid>
      <description>环境 Debian11
安装docker apt update apt install docker 部署镜像 拉取镜像 docker pull ryshe/terraria 运行容器 创建一个世界 docker run -it -p 7777:7777 --rm -v $HOME/terraria/world:/root/.local/share/Terraria/Worlds ryshe/terraria:latest 这里的 $HOME 指的是你当前所在目录。也可以指定一个想要存放游戏文件的目录。
比如我的目录是/var/lib/docker/volumes/terraria/_data
所以我的命令是
docker run -it -p 7777:7777 --rm -v /var/lib/docker/volumes/terraria/_data/terraria/world:/root/.local/share/Terraria/Worlds ryshe/terraria:latest 执行后会出现服务器的界面
接下来根据提示，创建一个世界。
创建完了。
这个时候先可以退出ssh。
配置Tshock强制开荒 在刚才的$HOME/terraria/world目录下，找到配置文件config.json和sscconfig.json
这是tshock的配置文件，可以参考下面我的配置文件进行更改。
{ &amp;#34;Settings&amp;#34;: { &amp;#34;ServerPassword&amp;#34;: &amp;#34;&amp;#34;, // 服务器密码 &amp;#34;ServerPort&amp;#34;: 7777, // 服务器端口 &amp;#34;MaxSlots&amp;#34;: 8, // 最大玩家槽位 &amp;#34;ReservedSlots&amp;#34;: 20, // 预留槽位 &amp;#34;ServerName&amp;#34;: &amp;#34;&amp;#34;, // 服务器名称 &amp;#34;UseServerName&amp;#34;: false, // 使用服务器名称 &amp;#34;LogPath&amp;#34;: &amp;#34;tshock/logs&amp;#34;, // 日志路径 &amp;#34;DebugLogs&amp;#34;: false, // 调试日志 &amp;#34;DisableLoginBeforeJoin&amp;#34;: false, // 加入前禁止登录 &amp;#34;IgnoreChestStacksOnLoad&amp;#34;: false, // 加载时忽略储物箱叠放 &amp;#34;WorldTileProvider&amp;#34;: &amp;#34;default&amp;#34;, &amp;#34;AutoSave&amp;#34;: true, // 自动保存 &amp;#34;AnnounceSave&amp;#34;: true, // 保存时公告 &amp;#34;ShowBackupAutosaveMessages&amp;#34;: true, // 显示备份和自动保存信息 &amp;#34;BackupInterval&amp;#34;: 10, // 备份间隔 &amp;#34;BackupKeepFor&amp;#34;: 240, // 保留备份时间 &amp;#34;SaveWorldOnCrash&amp;#34;: true, // 崩溃时保存世界 &amp;#34;SaveWorldOnLastPlayerExit&amp;#34;: true, // 最后一个玩家退出时保存世界 &amp;#34;InvasionMultiplier&amp;#34;: 1, // 入侵倍增器 &amp;#34;DefaultMaximumSpawns&amp;#34;: 5, // 默认最大生成数量 &amp;#34;DefaultSpawnRate&amp;#34;: 600, // 默认生成速率 &amp;#34;InfiniteInvasion&amp;#34;: false, // 无限入侵 &amp;#34;PvPMode&amp;#34;: &amp;#34;normal&amp;#34;, // PvP模式 &amp;#34;SpawnProtection&amp;#34;: false, // 出生点保护 &amp;#34;SpawnProtectionRadius&amp;#34;: 10, // 出生点保护半径 &amp;#34;RangeChecks&amp;#34;: true, // 范围检查 &amp;#34;HardcoreOnly&amp;#34;: false, // 仅极限模式 &amp;#34;MediumcoreOnly&amp;#34;: false, // 仅中核模式 &amp;#34;SoftcoreOnly&amp;#34;: false, // 仅软核模式 &amp;#34;DisableBuild&amp;#34;: false, // 禁止建筑 &amp;#34;DisableHardmode&amp;#34;: false, // 禁止极限模式 &amp;#34;DisableDungeonGuardian&amp;#34;: false, // 禁止地牢守卫者 &amp;#34;DisableClownBombs&amp;#34;: false, // 禁止小丑炸弹 &amp;#34;DisableSnowBalls&amp;#34;: false, // 禁止雪球 &amp;#34;DisableTombstones&amp;#34;: false, // 禁止墓碑 &amp;#34;DisablePrimeBombs&amp;#34;: false, // 禁止机械首领炸弹 &amp;#34;ForceTime&amp;#34;: &amp;#34;normal&amp;#34;, // 强制时间 &amp;#34;DisableInvisPvP&amp;#34;: false, // 禁止隐形PvP &amp;#34;MaxRangeForDisabled&amp;#34;: 10, // 禁用的最大范围 &amp;#34;RegionProtectChests&amp;#34;: false, // 区域保护储物箱 &amp;#34;RegionProtectGemLocks&amp;#34;: false, // 区域保护宝石锁 &amp;#34;IgnoreProjUpdate&amp;#34;: false, // 忽略投射物更新 &amp;#34;IgnoreProjKill&amp;#34;: false, // 忽略投射物击杀 &amp;#34;AllowCutTilesAndBreakables&amp;#34;: false, &amp;#34;AllowIce&amp;#34;: false, // 允许冰 &amp;#34;AllowCrimsonCreep&amp;#34;: true, // 允许猩红蔓延 &amp;#34;AllowCorruptionCreep&amp;#34;: true, // 允许腐化蔓延 &amp;#34;AllowHallowCreep&amp;#34;: true, // 允许神圣蔓延 &amp;#34;StatueSpawn200&amp;#34;: 3, &amp;#34;StatueSpawn600&amp;#34;: 6, &amp;#34;StatueSpawnWorld&amp;#34;: 10, &amp;#34;PreventBannedItemSpawn&amp;#34;: true, // 防止被封禁物品生成 &amp;#34;PreventDeadModification&amp;#34;: true, // 防止死亡修改 &amp;#34;PreventInvalidPlaceStyle&amp;#34;: true, // 防止无效的放置样式 &amp;#34;ForceXmas&amp;#34;: false, // 强制圣诞节 &amp;#34;ForceHalloween&amp;#34;: false, // 强制万圣节 &amp;#34;AllowAllowedGroupsToSpawnBannedItems&amp;#34;: false, // 允许有权限的组生成被封禁物品 &amp;#34;RespawnSeconds&amp;#34;: 15, // 重生时间（秒） &amp;#34;RespawnBossSeconds&amp;#34;: 10, // Boss战重生时间（秒） &amp;#34;AnonymousBossInvasions&amp;#34;: true, // 匿名Boss入侵 &amp;#34;MaxHP&amp;#34;: 500, // 最大生命值 &amp;#34;MaxMP&amp;#34;: 200, // 最大魔力值 &amp;#34;BombExplosionRadius&amp;#34;: 5, // 炸弹爆炸半径 &amp;#34;GiveItemsDirectly&amp;#34;: false, // 直接给予物品 &amp;#34;DefaultRegistrationGroupName&amp;#34;: &amp;#34;default&amp;#34;, // 默认注册组名称 &amp;#34;DefaultGuestGroupName&amp;#34;: &amp;#34;guest&amp;#34;, // 默认访客组名称 &amp;#34;RememberLeavePos&amp;#34;: true, // 记住离开位置 &amp;#34;MaximumLoginAttempts&amp;#34;: 10, // 最大登录尝试次数 &amp;#34;KickOnMediumcoreDeath&amp;#34;: false, // 中核模式死亡踢出 &amp;#34;MediumcoreKickReason&amp;#34;: &amp;#34;死亡导致踢出&amp;#34;, // 中核模式踢出原因 &amp;#34;BanOnMediumcoreDeath&amp;#34;: false, // 中核模式死亡封禁 &amp;#34;MediumcoreBanReason&amp;#34;: &amp;#34;死亡导致封禁&amp;#34;, // 中核模式封禁原因 &amp;#34;DisableDefaultIPBan&amp;#34;: false, // 禁用默认IP封禁 &amp;#34;EnableWhitelist&amp;#34;: false, // 启用白名单 &amp;#34;WhitelistKickReason&amp;#34;: &amp;#34;您不在白名单中。&amp;#34;, // 白名单踢出原因 &amp;#34;ServerFullReason&amp;#34;: &amp;#34;服务器已满&amp;#34;, // 服务器已满原因 &amp;#34;ServerFullNoReservedReason&amp;#34;: &amp;#34;服务器已满。没有预留槽位。&amp;#34;, // 服务器已满没有预留槽位原因 &amp;#34;KickOnHardcoreDeath&amp;#34;: false, // 极限模式死亡踢出 &amp;#34;HardcoreKickReason&amp;#34;: &amp;#34;死亡导致踢出&amp;#34;, // 极限模式踢出原因 &amp;#34;BanOnHardcoreDeath&amp;#34;: false, // 极限模式死亡封禁 &amp;#34;HardcoreBanReason&amp;#34;: &amp;#34;死亡导致封禁&amp;#34;, // 极限模式封禁原因 &amp;#34;KickProxyUsers&amp;#34;: true, // 踢出代理用户 &amp;#34;RequireLogin&amp;#34;: true, // 需要登录 &amp;#34;AllowLoginAnyUsername&amp;#34;: true, // 允许任何用户名登录 &amp;#34;AllowRegisterAnyUsername&amp;#34;: true, // 允许注册任何用户名 &amp;#34;MinimumPasswordLength&amp;#34;: 4, // 最小密码长度 &amp;#34;BCryptWorkFactor&amp;#34;: 7, // BCrypt工作因子 &amp;#34;DisableUUIDLogin&amp;#34;: false, // 禁用UUID登录 &amp;#34;KickEmptyUUID&amp;#34;: false, // 踢出空UUID &amp;#34;TilePaintThreshold&amp;#34;: 15, // 瓷砖绘制阈值 &amp;#34;KickOnTilePaintThresholdBroken&amp;#34;: false, // 瓷砖绘制阈值破坏踢出 &amp;#34;MaxDamage&amp;#34;: 51175, // 最大伤害 &amp;#34;MaxProjDamage&amp;#34;: 51175, // 最大投射物伤害 &amp;#34;KickOnDamageThresholdBroken&amp;#34;: false, // 伤害阈值破坏踢出 &amp;#34;TileKillThreshold&amp;#34;: 1060, // 瓷砖击杀阈值 &amp;#34;KickOnTileKillThresholdBroken&amp;#34;: false, // 瓷砖击杀阈值破坏踢出 &amp;#34;TilePlaceThreshold&amp;#34;: 1032, // 瓷砖放置阈值 &amp;#34;KickOnTilePlaceThresholdBroken&amp;#34;: false, // 瓷砖放置阈值破坏踢出 &amp;#34;TileLiquidThreshold&amp;#34;: 1050, // 瓷砖液体阈值 &amp;#34;KickOnTileLiquidThresholdBroken&amp;#34;: false, // 瓷砖液体阈值破坏踢出 &amp;#34;ProjIgnoreShrapnel&amp;#34;: true, // 投射物忽略破片 &amp;#34;ProjectileThreshold&amp;#34;: 1050, // 投射物阈值 &amp;#34;KickOnProjectileThresholdBroken&amp;#34;: false, // 投射物阈值破坏踢出 &amp;#34;HealOtherThreshold&amp;#34;: 1050, // 治愈他人阈值 &amp;#34;KickOnHealOtherThresholdBroken&amp;#34;: false, // 治愈他人阈值破坏踢出 &amp;#34;SuppressPermissionFailureNotices&amp;#34;: false, // 抑制权限失败通知 &amp;#34;DisableModifiedZenith&amp;#34;: false, // 禁用修改过的巅峰 &amp;#34;DisableCustomDeathMessages&amp;#34;: true, // 禁用自定义死亡消息 &amp;#34;CommandSpecifier&amp;#34;: &amp;#34;/&amp;#34;, // 命令指示符 &amp;#34;CommandSilentSpecifier&amp;#34;: &amp;#34;.</description>
      <content:encoded><![CDATA[<h1 id="环境">环境</h1>
<p>Debian11</p>
<h1 id="安装docker">安装docker</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">apt update
</span></span><span class="line"><span class="cl">apt install docker
</span></span></code></pre></div><h1 id="部署镜像">部署镜像</h1>
<h2 id="拉取镜像">拉取镜像</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker pull ryshe/terraria
</span></span></code></pre></div><h2 id="运行容器">运行容器</h2>
<h3 id="创建一个世界">创建一个世界</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -it -p 7777:7777 --rm -v <span class="nv">$HOME</span>/terraria/world:/root/.local/share/Terraria/Worlds ryshe/terraria:latest
</span></span></code></pre></div><p>这里的 <code>$HOME</code> 指的是你当前所在目录。也可以指定一个想要存放游戏文件的目录。</p>
<p>比如我的目录是/var/lib/docker/volumes/terraria/_data</p>
<p>所以我的命令是</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -it -p 7777:7777 --rm -v /var/lib/docker/volumes/terraria/_data/terraria/world:/root/.local/share/Terraria/Worlds ryshe/terraria:latest
</span></span></code></pre></div><p>执行后会出现服务器的界面</p>
<p><img loading="lazy" src="https://img.0pt.im/game/built-tr/1-1.png" alt=""  />
</p>
<p>接下来根据提示，创建一个世界。</p>
<p><img loading="lazy" src="https://img.0pt.im/game/built-tr/1-2.png" alt=""  />
</p>
<p>创建完了。</p>
<p>这个时候先可以退出ssh。</p>
<h3 id="配置tshock强制开荒">配置Tshock强制开荒</h3>
<p>在刚才的<code>$HOME/terraria/world</code>目录下，找到配置文件<code>config.json</code>和<code>sscconfig.json</code></p>
<p><img loading="lazy" src="https://img.0pt.im/game/built-tr/1-3.png" alt=""  />
</p>
<p>这是tshock的配置文件，可以参考下面我的配置文件进行更改。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-config.json" data-lang="config.json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Settings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ServerPassword&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  <span class="c1">// 服务器密码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ServerPort&#34;</span><span class="p">:</span> <span class="mi">7777</span><span class="p">,</span>  <span class="c1">// 服务器端口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MaxSlots&#34;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>  <span class="c1">// 最大玩家槽位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ReservedSlots&#34;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>  <span class="c1">// 预留槽位
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ServerName&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  <span class="c1">// 服务器名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;UseServerName&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 使用服务器名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;LogPath&#34;</span><span class="p">:</span> <span class="s2">&#34;tshock/logs&#34;</span><span class="p">,</span>  <span class="c1">// 日志路径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DebugLogs&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 调试日志
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableLoginBeforeJoin&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 加入前禁止登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;IgnoreChestStacksOnLoad&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 加载时忽略储物箱叠放
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;WorldTileProvider&#34;</span><span class="p">:</span> <span class="s2">&#34;default&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;AutoSave&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 自动保存
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AnnounceSave&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 保存时公告
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ShowBackupAutosaveMessages&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 显示备份和自动保存信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;BackupInterval&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1">// 备份间隔
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;BackupKeepFor&#34;</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span>  <span class="c1">// 保留备份时间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;SaveWorldOnCrash&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 崩溃时保存世界
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;SaveWorldOnLastPlayerExit&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 最后一个玩家退出时保存世界
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;InvasionMultiplier&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1">// 入侵倍增器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DefaultMaximumSpawns&#34;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>  <span class="c1">// 默认最大生成数量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DefaultSpawnRate&#34;</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span>  <span class="c1">// 默认生成速率
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;InfiniteInvasion&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 无限入侵
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;PvPMode&#34;</span><span class="p">:</span> <span class="s2">&#34;normal&#34;</span><span class="p">,</span>  <span class="c1">// PvP模式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;SpawnProtection&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 出生点保护
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;SpawnProtectionRadius&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1">// 出生点保护半径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RangeChecks&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 范围检查
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;HardcoreOnly&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 仅极限模式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MediumcoreOnly&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 仅中核模式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;SoftcoreOnly&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 仅软核模式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableBuild&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁止建筑
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableHardmode&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁止极限模式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableDungeonGuardian&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁止地牢守卫者
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableClownBombs&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁止小丑炸弹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableSnowBalls&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁止雪球
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableTombstones&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁止墓碑
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisablePrimeBombs&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁止机械首领炸弹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ForceTime&#34;</span><span class="p">:</span> <span class="s2">&#34;normal&#34;</span><span class="p">,</span>  <span class="c1">// 强制时间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableInvisPvP&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁止隐形PvP
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MaxRangeForDisabled&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1">// 禁用的最大范围
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RegionProtectChests&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 区域保护储物箱
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RegionProtectGemLocks&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 区域保护宝石锁
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;IgnoreProjUpdate&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 忽略投射物更新
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;IgnoreProjKill&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 忽略投射物击杀
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AllowCutTilesAndBreakables&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;AllowIce&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 允许冰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AllowCrimsonCreep&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 允许猩红蔓延
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AllowCorruptionCreep&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 允许腐化蔓延
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AllowHallowCreep&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 允许神圣蔓延
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;StatueSpawn200&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;StatueSpawn600&#34;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;StatueSpawnWorld&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;PreventBannedItemSpawn&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 防止被封禁物品生成
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;PreventDeadModification&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 防止死亡修改
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;PreventInvalidPlaceStyle&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 防止无效的放置样式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ForceXmas&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 强制圣诞节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ForceHalloween&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 强制万圣节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AllowAllowedGroupsToSpawnBannedItems&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 允许有权限的组生成被封禁物品
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RespawnSeconds&#34;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>  <span class="c1">// 重生时间（秒）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RespawnBossSeconds&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1">// Boss战重生时间（秒）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AnonymousBossInvasions&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 匿名Boss入侵
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MaxHP&#34;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="c1">// 最大生命值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MaxMP&#34;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>  <span class="c1">// 最大魔力值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;BombExplosionRadius&#34;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>  <span class="c1">// 炸弹爆炸半径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;GiveItemsDirectly&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 直接给予物品
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DefaultRegistrationGroupName&#34;</span><span class="p">:</span> <span class="s2">&#34;default&#34;</span><span class="p">,</span>  <span class="c1">// 默认注册组名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DefaultGuestGroupName&#34;</span><span class="p">:</span> <span class="s2">&#34;guest&#34;</span><span class="p">,</span>  <span class="c1">// 默认访客组名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RememberLeavePos&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 记住离开位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MaximumLoginAttempts&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1">// 最大登录尝试次数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnMediumcoreDeath&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 中核模式死亡踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MediumcoreKickReason&#34;</span><span class="p">:</span> <span class="s2">&#34;死亡导致踢出&#34;</span><span class="p">,</span>  <span class="c1">// 中核模式踢出原因
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;BanOnMediumcoreDeath&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 中核模式死亡封禁
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MediumcoreBanReason&#34;</span><span class="p">:</span> <span class="s2">&#34;死亡导致封禁&#34;</span><span class="p">,</span>  <span class="c1">// 中核模式封禁原因
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableDefaultIPBan&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁用默认IP封禁
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;EnableWhitelist&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 启用白名单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;WhitelistKickReason&#34;</span><span class="p">:</span> <span class="s2">&#34;您不在白名单中。&#34;</span><span class="p">,</span>  <span class="c1">// 白名单踢出原因
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ServerFullReason&#34;</span><span class="p">:</span> <span class="s2">&#34;服务器已满&#34;</span><span class="p">,</span>  <span class="c1">// 服务器已满原因
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ServerFullNoReservedReason&#34;</span><span class="p">:</span> <span class="s2">&#34;服务器已满。没有预留槽位。&#34;</span><span class="p">,</span>  <span class="c1">// 服务器已满没有预留槽位原因
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnHardcoreDeath&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 极限模式死亡踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;HardcoreKickReason&#34;</span><span class="p">:</span> <span class="s2">&#34;死亡导致踢出&#34;</span><span class="p">,</span>  <span class="c1">// 极限模式踢出原因
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;BanOnHardcoreDeath&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 极限模式死亡封禁
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;HardcoreBanReason&#34;</span><span class="p">:</span> <span class="s2">&#34;死亡导致封禁&#34;</span><span class="p">,</span>  <span class="c1">// 极限模式封禁原因
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickProxyUsers&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 踢出代理用户
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RequireLogin&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 需要登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AllowLoginAnyUsername&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 允许任何用户名登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;AllowRegisterAnyUsername&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 允许注册任何用户名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MinimumPasswordLength&#34;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>  <span class="c1">// 最小密码长度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;BCryptWorkFactor&#34;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>  <span class="c1">// BCrypt工作因子
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableUUIDLogin&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁用UUID登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickEmptyUUID&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 踢出空UUID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;TilePaintThreshold&#34;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>  <span class="c1">// 瓷砖绘制阈值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnTilePaintThresholdBroken&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 瓷砖绘制阈值破坏踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MaxDamage&#34;</span><span class="p">:</span> <span class="mi">51175</span><span class="p">,</span>  <span class="c1">// 最大伤害
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MaxProjDamage&#34;</span><span class="p">:</span> <span class="mi">51175</span><span class="p">,</span>  <span class="c1">// 最大投射物伤害
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnDamageThresholdBroken&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 伤害阈值破坏踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;TileKillThreshold&#34;</span><span class="p">:</span> <span class="mi">1060</span><span class="p">,</span>  <span class="c1">// 瓷砖击杀阈值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnTileKillThresholdBroken&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 瓷砖击杀阈值破坏踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;TilePlaceThreshold&#34;</span><span class="p">:</span> <span class="mi">1032</span><span class="p">,</span>  <span class="c1">// 瓷砖放置阈值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnTilePlaceThresholdBroken&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 瓷砖放置阈值破坏踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;TileLiquidThreshold&#34;</span><span class="p">:</span> <span class="mi">1050</span><span class="p">,</span>  <span class="c1">// 瓷砖液体阈值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnTileLiquidThresholdBroken&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 瓷砖液体阈值破坏踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ProjIgnoreShrapnel&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 投射物忽略破片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ProjectileThreshold&#34;</span><span class="p">:</span> <span class="mi">1050</span><span class="p">,</span>  <span class="c1">// 投射物阈值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnProjectileThresholdBroken&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 投射物阈值破坏踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;HealOtherThreshold&#34;</span><span class="p">:</span> <span class="mi">1050</span><span class="p">,</span>  <span class="c1">// 治愈他人阈值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;KickOnHealOtherThresholdBroken&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 治愈他人阈值破坏踢出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;SuppressPermissionFailureNotices&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 抑制权限失败通知
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableModifiedZenith&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁用修改过的巅峰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableCustomDeathMessages&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 禁用自定义死亡消息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;CommandSpecifier&#34;</span><span class="p">:</span> <span class="s2">&#34;/&#34;</span><span class="p">,</span>  <span class="c1">// 命令指示符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;CommandSilentSpecifier&#34;</span><span class="p">:</span> <span class="s2">&#34;.&#34;</span><span class="p">,</span>  <span class="c1">// 静默命令指示符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableSpewLogs&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 禁用喷射日志
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisableSecondUpdateLogs&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 禁用第二次更新日志
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;SuperAdminChatRGB&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="mi">255</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="mi">255</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="mi">255</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;SuperAdminChatPrefix&#34;</span><span class="p">:</span> <span class="s2">&#34;(超级管理员) &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;SuperAdminChatSuffix&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  <span class="c1">// 超级管理员聊天前缀和后缀
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;EnableGeoIP&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 启用地理IP
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;DisplayIPToAdmins&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 向管理员显示IP
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ChatFormat&#34;</span><span class="p">:</span> <span class="s2">&#34;{1}{2}{3}: {4}&#34;</span><span class="p">,</span>  <span class="c1">// 聊天格式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ChatAboveHeadsFormat&#34;</span><span class="p">:</span> <span class="s2">&#34;{2}&#34;</span><span class="p">,</span>  <span class="c1">// 头顶聊天格式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;EnableChatAboveHeads&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 启用头顶聊天
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;BroadcastRGB&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="mi">127</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="mi">255</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="mi">212</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;StorageType&#34;</span><span class="p">:</span> <span class="s2">&#34;sqlite&#34;</span><span class="p">,</span>  <span class="c1">// 存储类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;SqliteDBPath&#34;</span><span class="p">:</span> <span class="s2">&#34;tshock.sqlite&#34;</span><span class="p">,</span>  <span class="c1">// SQLite数据库路径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MySqlHost&#34;</span><span class="p">:</span> <span class="s2">&#34;localhost:3306&#34;</span><span class="p">,</span>  <span class="c1">// MySQL主机
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MySqlDbName&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  <span class="c1">// MySQL数据库名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MySqlUsername&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  <span class="c1">// MySQL用户名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;MySqlPassword&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>  <span class="c1">// MySQL密码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;UseSqlLogs&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 使用SQL日志
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RevertToTextLogsOnSqlFailures&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1">// SQL失败后返回文本日志
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RestApiEnabled&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 启用REST API
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RestApiPort&#34;</span><span class="p">:</span> <span class="mi">7878</span><span class="p">,</span>  <span class="c1">// REST API端口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;LogRest&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 记录REST请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;EnableTokenEndpointAuthentication&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="c1">// 启用令牌端点身份验证
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RESTMaximumRequestsPerInterval&#34;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>  <span class="c1">// 每个间隔的最大REST请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;RESTRequestBucketDecreaseIntervalMinutes&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1">// REST请求桶减少间隔（分钟）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ApplicationRestTokens&#34;</span><span class="p">:</span> <span class="p">{}</span>  <span class="c1">// 应用REST令牌
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sscconfig.json" data-lang="sscconfig.json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;Settings&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;Enabled&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// 强制开荒启用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;ServerSideCharacterSave&#34;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>  <span class="c1">// 服务器端角色保存
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;LogonDiscardThreshold&#34;</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>  <span class="c1">// 登录丢弃阈值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;StartingHealth&#34;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>  <span class="c1">// 初始生命值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;StartingMana&#34;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>  <span class="c1">// 初始法力值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;StartingInventory&#34;</span><span class="p">:</span> <span class="p">[</span>  <span class="c1">// 初始物品清单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;netID&#34;</span><span class="p">:</span> <span class="mi">-15</span><span class="p">,</span>  <span class="c1">// 物品ID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;prefix&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1">// 前缀
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;stack&#34;</span><span class="p">:</span> <span class="mi">1</span>  <span class="c1">// 堆叠数量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;netID&#34;</span><span class="p">:</span> <span class="mi">-13</span><span class="p">,</span>  <span class="c1">// 物品ID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;prefix&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1">// 前缀
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;stack&#34;</span><span class="p">:</span> <span class="mi">1</span>  <span class="c1">// 堆叠数量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;netID&#34;</span><span class="p">:</span> <span class="mi">-16</span><span class="p">,</span>  <span class="c1">// 物品ID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;prefix&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1">// 前缀
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nt">&#34;stack&#34;</span><span class="p">:</span> <span class="mi">1</span>  <span class="c1">// 堆叠数量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;WarnPlayersAboutBypassPermission&#34;</span><span class="p">:</span> <span class="kc">true</span>  <span class="c1">// 警告玩家绕过权限
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="启动服务器">启动服务器</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -it --rm -p 7777:7777 -v <span class="nv">$HOME</span>/terraria/world:/root/.local/share/Terraria/Worlds --name terraria ryshe/terraria:latest
</span></span></code></pre></div><p>对于我来说是</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -it --rm -p 7777:7777 -v /var/lib/docker/volumes/terraria/_data/terraria/world:/root/.local/share/Terraria/Worlds --name terraria ryshe/terraria:latest
</span></span></code></pre></div><p>选择你作为服务器的世界。根据提示，开启泰拉瑞亚服务器。</p>
<p><img loading="lazy" src="https://img.0pt.im/game/built-tr/1-4.png" alt=""  />
</p>
<p>现在来到服务器后台了。</p>
<h1 id="管理此部分较为简陋">管理（此部分较为简陋)</h1>
<p>在服务器后台，先给default组加权限。（default组是登录后玩家默认所在的组。）</p>
<pre tabindex="0"><code>/group addperm default * !tshock.ignore.ssc
</code></pre><p><img loading="lazy" src="https://img.0pt.im/game/built-tr/1-5.png" alt=""  />
</p>
<p>然后可以在服务端开账号。</p>
<pre tabindex="0"><code>/user add name passwd default
</code></pre><p>name是你的名字，也是你的账号。passwd是你的密码。default是你所在组。</p>
<p>管理后关闭移除容器。</p>
<h1 id="后台运行">后台运行</h1>
<p>配置权限后， 将terraria后台运行</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -d -p 7777:7777 -v <span class="nv">$HOME</span>/terraria/world:/root/.local/share/Terraria/Worlds --name terraria -e <span class="nv">WORLD_FILENAME</span><span class="o">=</span>your.wld ryshe/terraria:latest
</span></span></code></pre></div><p>对于我来说，是</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -d -p 7777:7777 -v /var/lib/docker/volumes/terraria/_data/terraria/world:/root/.local/share/Terraria/Worlds --name terraria -e <span class="nv">WORLD_FILENAME</span><span class="o">=</span>tuguige.wld ryshe/terraria:latest
</span></span></code></pre></div><h1 id="注册登录">注册登录</h1>
<p>打开游戏，连接你的泰拉瑞亚服务器。如果是搭建在本地。ip是 <code>localhost</code> 端口 <code>7777</code></p>
<p>如果搭建在服务器，ip是你的服务器ip，端口7777，记得给服务器放行7777端口。</p>
<p>创建一个角色，角色名就是你的账号。</p>
<p>连接上服务器时，打开聊天栏，输<code>/help</code>获得帮助。</p>
<p>如果没有账号，先注册一个 ，输<code>/register passwd</code></p>
<p>passwd是你的密码。你的账号是用户名。</p>
<p>然后再<code>/login passwd</code>。</p>
<p>完成。</p>
<h1 id="后记">后记</h1>
<p>对管理部分的参考。</p>
<p><a href="https://www.taozi1.com/16620.html">https://www.taozi1.com/16620.html</a></p>
<p><a href="https://ikebukuro.tshock.co/">https://ikebukuro.tshock.co/</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>他</title>
      <link>https://blog.0pt.im/think/0-0-1/</link>
      <pubDate>Mon, 23 Oct 2023 00:48:58 +0800</pubDate>
      
      <guid>https://blog.0pt.im/think/0-0-1/</guid>
      <description>他拉着一口棺材，穿越在广袤的冰原上，冰雪覆盖的大地上白雪皑皑，寒风呼啸而过，将他包裹在一片银白的孤独之中。
他回想起来先前的不幸遭遇。在一个寒冷的夏日，美国东京的华尔街被一股异常寒冷的西伯利亚寒潮所笼罩。他，一个年轻普通的男人，命运似乎已经注定要与渥太华大公的命运交织在一起。他因为无意中触碰了渥太华大公的驴车，被迫接受了一项不可思议的处罚，要拉着一口棺材，从美国纽约的自由女神像走到苏联基辅的英雄母亲雕塑前。
冷风呼啸而过，寒意透骨，缺总是不乏勇士猛人。阿兹特克战士们突如其来地出现，这些阿兹特克战士身着华丽的鹅毛服装，脸上覆盖着神秘的面具，手持古老的长戟。他们突然从白茫茫的雪地中冒出，围绕他形成了一个圆圈。
阿兹特克战士发出战吼，面具掩盖着他们浴血战斗的欲望，若干年后，当世界上的纳粹们疯狂进攻时，人们才能体会到另一种程度的对血的渴望，以至于十字架与大蒜成为对抗他们的强大武器。
他打心底的害怕他们，但是，头脑里的想法很快清除了，取而代之的是，让之后数千年的各国学者都摸不着头脑的一句话——保护好棺材！当阿兹特克战士的长戟刺向棺材时，他冲了上去。血并没有流下来？他十分疑惑的看着刺穿身体的长戟。
阿兹特克战士开始颤抖，扔下武器，逃走了。远处，一队大汗的侦察兵现身。他们被称为穆罕默德之鞭。矮小的战士，骑着牛，挥舞着笛子。这些勇敢的骑兵征服了大半个非洲，现在，要来制服这片冰原。他们拼尽全力，冲向了他。
他拔出长戟，奋力一挥，割下了一对牛角。他举起一头牛，狠狠地向骑兵砸去。然而，绕后的骑兵将棺材顶翻了。他继续用胸膛将牛角顶住，任凭骑兵吹出何种吊诡的终曲，敌不过他的不死之躯。于是骑兵仓皇撤离。
骑兵回报大汗曰：“有一人，引一棺，五音不入，牛角不伤，亦人亦鬼，似是天神下凡。””天意如此，岂能逆天而为？“大汗从此停止了对冰原的制服。再过数百年，曼彻斯特，马赛与亚历山大港的人民会举起夜壶欢庆，庆祝那个打败了大汗的英雄。而大汗王庭所在地华盛顿会永远铭记那个让他们耻辱的日子。
他现在有机会好好看看这口棺材了。用越南紫檀木作的棺木，印第安的黄金，南非的宝石镶嵌其中。其正中，是拿破仑请自用毛笔题写的梵语：चितायां शयानस्य व्यक्तिस्य महत्त्वं नास्ति。
冰原上，城市拔地而起。穿过拥挤的人群，望向闪烁着霓虹灯的街道。玛雅人的城市——君士坦丁。过去，这里人们用红砖盖房子，现在，他们挖走了红砖，换上了水泥与钢筋。未来，可能就用上了新型高分子材料。
他几乎是刚来到城市，就火了起来。艺术家认为他是前卫先锋，行为艺术天王。人们认为他是猎奇素材，饭后谈资。明星认为他是两年半出道，五体投地。网红认为他是流量担当。纷纷效仿。政客认为他是行走的选票，资本家认为他是麻痹人民的工具。高深的知识分子对此非常不屑，认为他只不过是一个哗众取宠的小丑。于是人们为他树立了一个纪念碑，把他刻在了十字架上，想永远纪念他，没过几个月，就被推倒了。
第二天，他就离开了带上了冰工厂里人们生产出来的可乐，米老鼠与炸弹。这些东西，随着他的行走，散落在街上，后来，都成为了游乐的工具。
终于，他远远看见了英雄母亲雕像，被甜雨腐蚀的面目全非。风中飘来一段语音播报。我们摧毁，我们制服。
还有100米，他倒下了。负担很轻，但身体麻木。他在某一次睁开眼时，发现自己从未离开过棺材里。
人们最后发现了他，他是dag冰原的英雄。无数后来人对他进行歌颂。有人说他离开了宫廷生活，选择成为苦行僧，寻求解决人类痛苦的方法。然后，他在悟道菩提树下进行了长时间的冥想，最终实现了真正的觉醒，称之为涅槃；还有人说，他是上帝的儿子和救世主，强调了爱、宽恕、仁慈和关怀弱者，但是他被捕、审判和钉在十字架上受刑处死，最终在第三天从死亡中复活，为世人的罪提供了救赎。有人说，他决心要追逐太阳。每天，他追赶太阳，试图抓住它，但太阳始终在他手边遥不可及。他追逐的过程中，不断奔跑，导致地球干涸，江河湖泊枯竭，植被死亡；还有人说，他是太上老君，如来佛祖。但是更多的人将感恩他，如同感恩自己的一日三餐那样。</description>
      <content:encoded><![CDATA[<p>他拉着一口棺材，穿越在广袤的冰原上，冰雪覆盖的大地上白雪皑皑，寒风呼啸而过，将他包裹在一片银白的孤独之中。</p>
<p>他回想起来先前的不幸遭遇。在一个寒冷的夏日，美国东京的华尔街被一股异常寒冷的西伯利亚寒潮所笼罩。他，一个年轻普通的男人，命运似乎已经注定要与渥太华大公的命运交织在一起。他因为无意中触碰了渥太华大公的驴车，被迫接受了一项不可思议的处罚，要拉着一口棺材，从美国纽约的自由女神像走到苏联基辅的英雄母亲雕塑前。</p>
<p>冷风呼啸而过，寒意透骨，缺总是不乏勇士猛人。阿兹特克战士们突如其来地出现，这些阿兹特克战士身着华丽的鹅毛服装，脸上覆盖着神秘的面具，手持古老的长戟。他们突然从白茫茫的雪地中冒出，围绕他形成了一个圆圈。</p>
<p>阿兹特克战士发出战吼，面具掩盖着他们浴血战斗的欲望，若干年后，当世界上的纳粹们疯狂进攻时，人们才能体会到另一种程度的对血的渴望，以至于十字架与大蒜成为对抗他们的强大武器。</p>
<p>他打心底的害怕他们，但是，头脑里的想法很快清除了，取而代之的是，让之后数千年的各国学者都摸不着头脑的一句话——保护好棺材！当阿兹特克战士的长戟刺向棺材时，他冲了上去。血并没有流下来？他十分疑惑的看着刺穿身体的长戟。</p>
<p>阿兹特克战士开始颤抖，扔下武器，逃走了。远处，一队大汗的侦察兵现身。他们被称为穆罕默德之鞭。矮小的战士，骑着牛，挥舞着笛子。这些勇敢的骑兵征服了大半个非洲，现在，要来制服这片冰原。他们拼尽全力，冲向了他。</p>
<p>他拔出长戟，奋力一挥，割下了一对牛角。他举起一头牛，狠狠地向骑兵砸去。然而，绕后的骑兵将棺材顶翻了。他继续用胸膛将牛角顶住，任凭骑兵吹出何种吊诡的终曲，敌不过他的不死之躯。于是骑兵仓皇撤离。</p>
<p>骑兵回报大汗曰：“有一人，引一棺，五音不入，牛角不伤，亦人亦鬼，似是天神下凡。””天意如此，岂能逆天而为？“大汗从此停止了对冰原的制服。再过数百年，曼彻斯特，马赛与亚历山大港的人民会举起夜壶欢庆，庆祝那个打败了大汗的英雄。而大汗王庭所在地华盛顿会永远铭记那个让他们耻辱的日子。</p>
<p>他现在有机会好好看看这口棺材了。用越南紫檀木作的棺木，印第安的黄金，南非的宝石镶嵌其中。其正中，是拿破仑请自用毛笔题写的梵语：चितायां शयानस्य व्यक्तिस्य महत्त्वं नास्ति。</p>
<p>冰原上，城市拔地而起。穿过拥挤的人群，望向闪烁着霓虹灯的街道。玛雅人的城市——君士坦丁。过去，这里人们用红砖盖房子，现在，他们挖走了红砖，换上了水泥与钢筋。未来，可能就用上了新型高分子材料。</p>
<p>他几乎是刚来到城市，就火了起来。艺术家认为他是前卫先锋，行为艺术天王。人们认为他是猎奇素材，饭后谈资。明星认为他是两年半出道，五体投地。网红认为他是流量担当。纷纷效仿。政客认为他是行走的选票，资本家认为他是麻痹人民的工具。高深的知识分子对此非常不屑，认为他只不过是一个哗众取宠的小丑。于是人们为他树立了一个纪念碑，把他刻在了十字架上，想永远纪念他，没过几个月，就被推倒了。</p>
<p>第二天，他就离开了带上了冰工厂里人们生产出来的可乐，米老鼠与炸弹。这些东西，随着他的行走，散落在街上，后来，都成为了游乐的工具。</p>
<p>终于，他远远看见了英雄母亲雕像，被甜雨腐蚀的面目全非。风中飘来一段语音播报。我们摧毁，我们制服。</p>
<p>还有100米，他倒下了。负担很轻，但身体麻木。他在某一次睁开眼时，发现自己从未离开过棺材里。</p>
<p>人们最后发现了他，他是dag冰原的英雄。无数后来人对他进行歌颂。有人说他离开了宫廷生活，选择成为苦行僧，寻求解决人类痛苦的方法。然后，他在悟道菩提树下进行了长时间的冥想，最终实现了真正的觉醒，称之为涅槃；还有人说，他是上帝的儿子和救世主，强调了爱、宽恕、仁慈和关怀弱者，但是他被捕、审判和钉在十字架上受刑处死，最终在第三天从死亡中复活，为世人的罪提供了救赎。有人说，他决心要追逐太阳。每天，他追赶太阳，试图抓住它，但太阳始终在他手边遥不可及。他追逐的过程中，不断奔跑，导致地球干涸，江河湖泊枯竭，植被死亡；还有人说，他是太上老君，如来佛祖。但是更多的人将感恩他，如同感恩自己的一日三餐那样。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>停音志</title>
      <link>https://blog.0pt.im/music/0-0-1/</link>
      <pubDate>Tue, 05 Sep 2023 00:48:58 +0800</pubDate>
      
      <guid>https://blog.0pt.im/music/0-0-1/</guid>
      <description>记我的听歌历程 我的听歌历程，大致回忆，想什么就写什么。很多地方表述不当，还请见谅。
我很小的时候，喜欢听凤凰传奇。刚上小学的时候，喜欢听周杰伦。每次追电视上放的好声音，都带有朴素的情感，总是希望周杰伦赢。（应该是好声音第四季，张磊的民谣直接封神）。到了大概6年级，我听到了Beyond的《光辉岁月》。虽然以前也听过，只觉得这首歌非常熟悉，但是那一次突发奇想，对Beyond来了兴趣。于是去搜，发现了《海阔天空》，《不再犹豫》，《真的爱你》，《冷雨夜》，《大地》这一系列金曲。全部出自这一个乐队。
左《乐与怒》专辑封面，右是Beyond四子时期的照片·
慢慢的，我已经不满足于听这些已经烂熟的歌，于是开始从Beyond第一张专辑《永远等待》开始听（虽然那个时候也不太听的明白Beyond早期作品）。后面了解Beyond的历史，黄家驹才华横溢却英年早逝。（印象很深的是一个MV，1993年，马来西亚不插电演唱会上，家驹食言了。泪目了当时。）
黄家驹在演唱会结束时
寒假，我看完了Beyond1991生命接触演唱会（家驹金属狂人的裸衣奔跑）和Beyond2005告别演唱会（快结束的时候忍不住哭了，泪奔）。
Beyond对我意义重大，不仅是歌曲中积极的元素传达给我，还对我的听歌方向产生重大影响。 （摇滚的启蒙，老歌的导师）
由于beyond是个香港乐队，出名的歌大部分是粤语金曲，所以自然而然去听一些香港金曲，后面扩展为港台金曲。
这个时候，听的就不太深入了，大多是把一些熟悉的老歌听了遍，说几首对我而言比较深刻的歌。张国荣的春夏秋冬，Monica，梅艳芳的女人花，似是故人来（后面才知道这歌是罗大佑写的曲子），林子祥的男儿当自强，敢爱敢做，还有十分十二寸（当时最喜欢的现场1985年香港年度金曲颁奖典礼），四大天王的热歌。
但是台湾那边听的少，华裔歌手也基本没听。像周杰伦，林俊杰，邓紫棋等。
有一个印象很深的是台湾的王杰。这个就厉害了。先是听了他几首出名的歌。被他独特的嗓音和浪子情怀吸引了。而且，在之后听歌进入重金属时期，唯一能听的下去的港台明星就只有王杰了。（何曾想到，在高考完后的一段时间天天听这个。一场游戏一场梦，忘了你忘了我，有一个比较有冲劲的歌叫人在风雨中。）
王杰 及其年轻的王杰
可以看出，本人听的基本是80年代到90年代居多。而且了解是比较贫乏的。
直到初一的时候，酷狗音乐当时不知道怎么给我推歌，给我整了一个Rammstein（德国战车）的eifersucht(吃醋)。刚开始听被吓到了。赶紧切到港台金曲。然后又突然很想听，又在听歌记录里翻出eifersucht。然后又被吓出来切歌。就这么往复几次，然后就被其中机械阴冷的风格，重复硬朗的节奏(有个戏称叫弹钢筋)深深吸引了。于是入坑工业金属。这是第一个我把全部专辑从头听到尾的乐队。
比较上头的是第一专辑《Herzeleid》，第二张专辑《Sehnsucht》，第三张专辑《Mutter》，第四张专辑《Reise，Reise》的所有歌，后面几张也是慢慢上头的，一句话，我非常喜欢Rammstein。
《Herzeleid》部分封面
既然接触了Rammstein，那么不可避免的接触到戏称为伪金属迷最喜欢的Marilyn Manson（玛丽莲曼森）。这个也是重量级，this is new shit的听感，颇有听eifersucht的感觉，果断入坑。Manson非常摇滚，非常金属，奇异的装扮，叛经离道的态度与行为。（基督教貌似在西方国家还是有很大影响力，反基督确实哈人，但我是无神论。） 我听了他比较前面几张专辑，第一张《Portrait Of An American Family》。还有经典翻唱sweet dreams（mv里非常抽象，我觉得太强了）。后面《Antichrist Superstar》，《Mechanical Animals》,《Holy Wood》,《The Golden Age Of Grotesque 》。都太强了，一度成为我对摇滚明星的定义（Bavid Bowie，Iggy Pop当时还不知道，都是重量级）。在初二寒假，那时我也比较抽象，每天早上6点爬起来写作业（超前做作业），必拿着当时一个破的杂牌手机在我的房间外放Marilyn Manson。放一整天。
marilyn manson 当然，Slipknot（活结）也是一个伪金属迷的必要修养。但是这个听的就比较浅了。只听了几首出名的歌，可能是我更喜欢工业金属吧。
题外话，在这段时间里，我也开始听洛天依。2018年中国好声音，初选，有个打包安琪的组合（重金属的嘶吼的黄安琪后面应该是往金属发展了，而偏甜美人声的刘安琪往歌手发展，但最后有了一个国风摇滚乐队，四喜丸子），翻唱了一首洛天依的权御天下。确实感觉很好，在经过我的所谓伪金属鄙视链(瞧不起其他音乐)，我最终还是放弃挣扎，开始听洛天依。还有言和，乐正绫等。也仅限于此。
至此，我对中国摇滚的认知为零（汪峰算不算?当时被营销号带节奏，感觉汪峰不行，但是后面听鲍家街34号和汪峰，感觉他非常行）。
2019年，乐队的夏天第一季横空出世。这个算是我的中国摇滚启蒙了。我从家里电视上的广告了解到这个综艺，引起了我的兴趣。我看了前面几期，后面决赛因为学业没空看，但是了解到新裤子乐队拿了冠军（后面主唱彭磊在乐夏第三季已经成为超级乐迷了）。初看的时候，总是觉得还是工业金属牛，这都是啥跟啥啊。但是后面渐渐觉得其实还是可以听下去的。我认识了许多优秀的乐队，像新裤子，刺猬，痛仰（第一张专辑太猛了）等，还有那一季没上乐夏的二手玫瑰，后海大鲨鱼，还有谢天笑，还去听了一些比较小众的乐队。
我其实没有认真去听这些乐队的歌，只是去听一听他们的热门歌曲，顺便再去往前翻他们之前有没有让我感兴趣的专辑。但是最重要的是音乐观念上的转变，从之前的工业金属至上到对摇滚的开放态度（总的还是偏摇滚）。
左上：新裤子《龙虎人丹》 右上：刺猬《白日梦蓝》
左下：痛痒《这是个问题》 右下：谢天笑《冷血动物》
然后，疫情来了。
在家摸鱼，自然有非常多的时间去做喜欢的事 去发掘音乐。
首先是魔岩三杰。经常看见网上懂哥诉说这三人的传说，中国摇滚乐的巅峰。
窦唯，我听了前3个专辑，《黑梦》，《艳阳天》，《山河水》。《黑梦》里 噢，乖 非常有感触，其他没听出什么感触。《艳阳天》里的词拿去写作文了，但是也没听出什么感触。《山河水》应该是我当时最喜欢的窦唯的专辑（后面最喜欢的是《雨吁》）。非常喜欢这种用非中国传统乐曲来营造一种中国式浪漫空灵的氛围。（高考后回听感觉《黑梦》与《艳阳天》都非常顶。黑梦非常独特，有态度有力量，如梦中的，不是那种甜美，柔软，飘飘然的梦，是黑梦，实验性与音乐性并存。艳阳天的听感更加柔和自然，艳阳天里懒洋洋的意境。）（形容不出来了，以后想到了补上。）
左上：《黑梦》 右上：《艳阳天》 左下：《山河水》 右下：《雨吁》
何勇的麒麟日记，俩版垃圾场都很猛。何勇的歌正如他在采访时说的，麒麟，没有一个固定的风格。声音里有力量。钟鼓楼，头上的包，还有幽灵，我比较喜欢。垃圾场振聋发聩。（有没有希望?）
下：《垃圾场》
张楚是一个特殊的摇滚音乐人。他的词非常质朴动人。声音也像他的词。他更是一个诗人，气质与窦唯的高冷，何勇的猛，形成鲜明对比。2张专辑（其实前面还有一张，还没听惯），扎根于社会生活，默默展现批评与生命的力量。在台上唱歌也是喜欢安静站或坐着唱。我较为喜欢的是孤独的人是可耻的，姐姐，厕所和床，造飞机的工厂。
《孤独的人是可耻的》
《造飞机的工厂》
然后是伍佰。开始是把他当做回忆台湾老歌来听，因为他有一些非常经典流行的作品。之后由于乐夏的影响，发现伍佰还有一个IP是伍佰&amp;amp;China&amp;rsquo;s blue。是个乐队。于是开始翻伍佰的专辑。抛去前3专（《爱上别人是快乐的事》当时不知道，这个也好，爱情的尽头与浪人情歌当时不是很喜欢）。我从《树枝孤鸟》开始听，初听其实听不惯，最终还是像之前听工业金属一样，又或者处在闽语区，对这种语言有着天生的熟悉。借着这个劲，我将伍佰的所以专辑都听了，他即写出了许多流行经典，又有许多自己的巧妙构思，做过许多不同风格，骨子里是浓浓的台语摇滚。最喜欢的一定是钉子花那张专辑（个人认为是伍佰最好的专辑，充满乡土人文情怀）。</description>
      <content:encoded><![CDATA[<h1 id="记我的听歌历程">记我的听歌历程</h1>
<p>我的听歌历程，大致回忆，想什么就写什么。很多地方表述不当，还请见谅。</p>
<p>我很小的时候，喜欢听凤凰传奇。刚上小学的时候，喜欢听周杰伦。每次追电视上放的好声音，都带有朴素的情感，总是希望周杰伦赢。（应该是好声音第四季，张磊的民谣直接封神）。到了大概6年级，我听到了Beyond的《光辉岁月》。虽然以前也听过，只觉得这首歌非常熟悉，但是那一次突发奇想，对Beyond来了兴趣。于是去搜，发现了《海阔天空》，《不再犹豫》，《真的爱你》，《冷雨夜》，《大地》这一系列金曲。全部出自这一个乐队。</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-1.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-2.jpg" alt=""  />
</th>
</tr>
</thead>
</table>
<blockquote>
<p>左《乐与怒》专辑封面，右是Beyond四子时期的照片·</p>
</blockquote>
<p>慢慢的，我已经不满足于听这些已经烂熟的歌，于是开始从Beyond第一张专辑《永远等待》开始听（虽然那个时候也不太听的明白Beyond早期作品）。后面了解Beyond的历史，黄家驹才华横溢却英年早逝。（印象很深的是一个MV，1993年，马来西亚不插电演唱会上，家驹食言了。泪目了当时。）</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-3.png" alt=""  />
</p>
<blockquote>
<p>  黄家驹在演唱会结束时</p>
</blockquote>
<p>  寒假，我看完了Beyond1991生命接触演唱会（家驹金属狂人的裸衣奔跑）和Beyond2005告别演唱会（快结束的时候忍不住哭了，泪奔）。</p>
<p>    Beyond对我意义重大，不仅是歌曲中积极的元素传达给我，还对我的听歌方向产生重大影响。 （摇滚的启蒙，老歌的导师）</p>
<p>由于beyond是个香港乐队，出名的歌大部分是粤语金曲，所以自然而然去听一些香港金曲，后面扩展为港台金曲。</p>
<p>    这个时候，听的就不太深入了，大多是把一些熟悉的老歌听了遍，说几首对我而言比较深刻的歌。张国荣的春夏秋冬，Monica，梅艳芳的女人花，似是故人来（后面才知道这歌是罗大佑写的曲子），林子祥的男儿当自强，敢爱敢做，还有十分十二寸（当时最喜欢的现场1985年香港年度金曲颁奖典礼），四大天王的热歌。</p>
<p>    但是台湾那边听的少，华裔歌手也基本没听。像周杰伦，林俊杰，邓紫棋等。</p>
<p>    有一个印象很深的是台湾的王杰。这个就厉害了。先是听了他几首出名的歌。被他独特的嗓音和浪子情怀吸引了。而且，在之后听歌进入重金属时期，唯一能听的下去的港台明星就只有王杰了。（何曾想到，在高考完后的一段时间天天听这个。一场游戏一场梦，忘了你忘了我，有一个比较有冲劲的歌叫人在风雨中。）</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-4.jpg" alt=""  />
</th>
<th style="text-align:center"><img loading="lazy" src="https://img.0pt.im/music-history1/0-5.jpg" alt=""  />
</th>
</tr>
</thead>
</table>
<blockquote>
<p>   王杰 及其年轻的王杰</p>
</blockquote>
<p>可以看出，本人听的基本是80年代到90年代居多。而且了解是比较贫乏的。</p>
<p>    直到初一的时候，酷狗音乐当时不知道怎么给我推歌，给我整了一个Rammstein（德国战车）的eifersucht(吃醋)。刚开始听被吓到了。赶紧切到港台金曲。然后又突然很想听，又在听歌记录里翻出eifersucht。然后又被吓出来切歌。就这么往复几次，然后就被其中机械阴冷的风格，重复硬朗的节奏(有个戏称叫弹钢筋)深深吸引了。于是入坑工业金属。这是第一个我把全部专辑从头听到尾的乐队。</p>
<p>比较上头的是第一专辑《Herzeleid》，第二张专辑《Sehnsucht》，第三张专辑《Mutter》，第四张专辑《Reise，Reise》的所有歌，后面几张也是慢慢上头的，一句话，我非常喜欢Rammstein。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-6.jpg" alt=""  />
</p>
<blockquote>
<p>《Herzeleid》部分封面</p>
</blockquote>
<p>    既然接触了Rammstein，那么不可避免的接触到戏称为伪金属迷最喜欢的Marilyn Manson（玛丽莲曼森）。这个也是重量级，this is new  shit的听感，颇有听eifersucht的感觉，果断入坑。Manson非常摇滚，非常金属，奇异的装扮，叛经离道的态度与行为。（基督教貌似在西方国家还是有很大影响力，反基督确实哈人，但我是无神论。）  我听了他比较前面几张专辑，第一张《Portrait Of An American Family》。还有经典翻唱sweet dreams（mv里非常抽象，我觉得太强了）。后面《Antichrist Superstar》，《Mechanical Animals》,《Holy Wood》,《The Golden Age Of Grotesque 》。都太强了，一度成为我对摇滚明星的定义（Bavid Bowie，Iggy Pop当时还不知道，都是重量级）。在初二寒假，那时我也比较抽象，每天早上6点爬起来写作业（超前做作业），必拿着当时一个破的杂牌手机在我的房间外放Marilyn Manson。放一整天。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-7.jpg" alt=""  />
</p>
<blockquote>
<p>  marilyn manson </p>
</blockquote>
<p>当然，Slipknot（活结）也是一个伪金属迷的必要修养。但是这个听的就比较浅了。只听了几首出名的歌，可能是我更喜欢工业金属吧。</p>
<p>    题外话，在这段时间里，我也开始听洛天依。2018年中国好声音，初选，有个打包安琪的组合（重金属的嘶吼的黄安琪后面应该是往金属发展了，而偏甜美人声的刘安琪往歌手发展，但最后有了一个国风摇滚乐队，四喜丸子），翻唱了一首洛天依的权御天下。确实感觉很好，在经过我的所谓伪金属鄙视链(瞧不起其他音乐)，我最终还是放弃挣扎，开始听洛天依。还有言和，乐正绫等。也仅限于此。</p>
<p>    至此，我对中国摇滚的认知为零（汪峰算不算?当时被营销号带节奏，感觉汪峰不行，但是后面听鲍家街34号和汪峰，感觉他非常行）。</p>
<p>    2019年，乐队的夏天第一季横空出世。这个算是我的中国摇滚启蒙了。我从家里电视上的广告了解到这个综艺，引起了我的兴趣。我看了前面几期，后面决赛因为学业没空看，但是了解到新裤子乐队拿了冠军（后面主唱彭磊在乐夏第三季已经成为超级乐迷了）。初看的时候，总是觉得还是工业金属牛，这都是啥跟啥啊。但是后面渐渐觉得其实还是可以听下去的。我认识了许多优秀的乐队，像新裤子，刺猬，痛仰（第一张专辑太猛了）等，还有那一季没上乐夏的二手玫瑰，后海大鲨鱼，还有谢天笑，还去听了一些比较小众的乐队。</p>
<p>    我其实没有认真去听这些乐队的歌，只是去听一听他们的热门歌曲，顺便再去往前翻他们之前有没有让我感兴趣的专辑。但是最重要的是音乐观念上的转变，从之前的工业金属至上到对摇滚的开放态度（总的还是偏摇滚）。</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-8.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-9.jpg" alt=""  />
</th>
</tr>
</thead>
<tbody>
<tr>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-10.jpg" alt=""  />
</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-11.jpg" alt=""  />
</td>
</tr>
</tbody>
</table>
<blockquote>
<p>  左上：新裤子《龙虎人丹》    右上：刺猬《白日梦蓝》</p>
<p>左下：痛痒《这是个问题》    右下：谢天笑《冷血动物》</p>
</blockquote>
<p>    然后，疫情来了。</p>
<p>    在家摸鱼，自然有非常多的时间去做喜欢的事 去发掘音乐。</p>
<p>    首先是魔岩三杰。经常看见网上懂哥诉说这三人的传说，中国摇滚乐的巅峰。</p>
<p>    窦唯，我听了前3个专辑，《黑梦》，《艳阳天》，《山河水》。《黑梦》里 噢，乖 非常有感触，其他没听出什么感触。《艳阳天》里的词拿去写作文了，但是也没听出什么感触。《山河水》应该是我当时最喜欢的窦唯的专辑（后面最喜欢的是《雨吁》）。非常喜欢这种用非中国传统乐曲来营造一种中国式浪漫空灵的氛围。（高考后回听感觉《黑梦》与《艳阳天》都非常顶。黑梦非常独特，有态度有力量，如梦中的，不是那种甜美，柔软，飘飘然的梦，是黑梦，实验性与音乐性并存。艳阳天的听感更加柔和自然，艳阳天里懒洋洋的意境。）（形容不出来了，以后想到了补上。）</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-12.jpg" alt=""  />
</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-13.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-14.jpg" alt=""  />
</th>
</tr>
</thead>
<tbody>
<tr>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-15.jpg" alt=""  />
</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-16.jpg" alt=""  />
</td>
</tr>
</tbody>
</table>
<blockquote>
<p>左上：《黑梦》  右上：《艳阳天》  左下：《山河水》  右下：《雨吁》</p>
</blockquote>
<p>    何勇的麒麟日记，俩版垃圾场都很猛。何勇的歌正如他在采访时说的，麒麟，没有一个固定的风格。声音里有力量。钟鼓楼，头上的包，还有幽灵，我比较喜欢。垃圾场振聋发聩。（有没有希望?）</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-17.jpg" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-18.jpg" alt=""  />
</p>
<blockquote>
<p>下：《垃圾场》</p>
</blockquote>
<p>    张楚是一个特殊的摇滚音乐人。他的词非常质朴动人。声音也像他的词。他更是一个诗人，气质与窦唯的高冷，何勇的猛，形成鲜明对比。2张专辑（其实前面还有一张，还没听惯），扎根于社会生活，默默展现批评与生命的力量。在台上唱歌也是喜欢安静站或坐着唱。我较为喜欢的是孤独的人是可耻的，姐姐，厕所和床，造飞机的工厂。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-19.jpg" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-20.jpg" alt=""  />
</p>
<blockquote>
<p>《孤独的人是可耻的》</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-21.jpg" alt=""  />
</p>
<blockquote>
<p>《造飞机的工厂》</p>
</blockquote>
<p>然后是伍佰。开始是把他当做回忆台湾老歌来听，因为他有一些非常经典流行的作品。之后由于乐夏的影响，发现伍佰还有一个IP是伍佰&amp;China&rsquo;s blue。是个乐队。于是开始翻伍佰的专辑。抛去前3专（《爱上别人是快乐的事》当时不知道，这个也好，爱情的尽头与浪人情歌当时不是很喜欢）。我从《树枝孤鸟》开始听，初听其实听不惯，最终还是像之前听工业金属一样，又或者处在闽语区，对这种语言有着天生的熟悉。借着这个劲，我将伍佰的所以专辑都听了，他即写出了许多流行经典，又有许多自己的巧妙构思，做过许多不同风格，骨子里是浓浓的台语摇滚。最喜欢的一定是钉子花那张专辑（个人认为是伍佰最好的专辑，充满乡土人文情怀）。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-22.jpg" alt=""  />
</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-23.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-24.jpg" alt=""  />
</th>
</tr>
</thead>
</table>
<blockquote>
<p>左：《树枝孤鸟》    右：《钉子花》</p>
</blockquote>
<p>    再者就是万能青年旅店，草东没有派对。他们很火，想不知道都难。我认为现在中国的新乐队都受到或多或少的这俩个乐队的影响。专辑都很好。</p>
<p>    此外是在其他金属方面的探索，激流金属，工业金属，激流金属，力量金属，新金属，死亡金属（重量级），黑金属等。</p>
<p>    比较认真听的一个是Opeth（月亮之城）。第一次听到一首歌10分钟左右。而且一张专辑里还几首这样的歌。歌词与歌曲意境很匹配（据说歌词是主唱乱写的），编曲很有美感。可听性很强。主唱是个锐评哥。反正给我是大受震撼。前几张专辑都很不错，最喜欢《Damnation》和《Blackwater Park》。我的网名出于此，直接用他们的名字。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-25.jpg" alt=""  />
</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-26.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-27.jpg" alt=""  />
</th>
</tr>
</thead>
</table>
<blockquote>
<p>左：《Damnation》    右：《Blackwater Park》</p>
</blockquote>
<p>   还有一个是Alcest，这个是之前刷百度了解到的乐队。不好定义风格，自赏黑，黑金属，盯鞋等，音乐听起来就像美好的小精灵穿梭于黯淡的森林之中，治愈，奇幻，优美，听不腻。每首歌我觉得都好听。我社交媒体的头像之前出于此，拿他们的照片。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-28.jpg" alt=""  />
</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-29.jpg" alt=""  />
1 Souvenirs d&rsquo;un autre monde</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-30.jpg" alt=""  />
2  Écailles de lune</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-31.jpg" alt=""  />
3 Les voyages de l&rsquo;âme</th>
</tr>
</thead>
<tbody>
<tr>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-32.jpg" alt=""  />
4 Shelter</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-33.jpg" alt=""  />
5 Kodama</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-34.jpg" alt=""  />
6 Spiritual Instinct</td>
</tr>
</tbody>
</table>
<p>  最后，逐渐了解一些知名国外乐队以及他们的名曲。</p>
<p>    疫情期间，我做作业的时候被伍佰的《梦的河流》这张专辑里的一首歌，暴雨洗脑了。休息的时候我会坐在我家的窗边，阳光照进来，身上暖洋洋的，喜欢放橘子海的歌，让自己去到心中的那片海。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-36.jpg" alt=""  />
</p>
<p>    那年乐队的夏天2如约而至。借着这阵风，我又接触了一波中国乐队，到高一为止，海朋森，蛙池，回春丹，刘森等，这段时间喜欢比较批评文艺网红的。</p>
<p>    高二的时候，主要是继承之前的听歌风格了。但是比较文艺复兴。</p>
<p>    重听beyond。再听beyond早期的专辑与三子时期的专辑。感觉许多东西都听明白了。最喜欢应该是《亚拉伯罕跳舞女郎》。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-35.jpg" alt=""  />
</p>
<p>    再听窦唯，主要发现了《雨吁》这张专辑，词的虚化，意境的构造，给人一种中国风的感觉。还有《殃金咒》，长达40几分钟的死亡金属。</p>
<p>    再听刘森，把刘森的几个小号（小号和分身是真的多）都拿出来听。刘森给人一种县城文艺青年的感觉，有理想，有烟火。</p>
<p>    高三上学期，学习上比较抑郁，整个人也比较抑郁。这时候开始听起后朋。</p>
<p>    最开始听的是来自白俄罗斯的后朋，Molchat Doma。Судно (Борис Рыжий)（夜壶（鲍里斯.里日））确实哈人，机械的鼓机，冰冷的吉他，不带一点感情的演唱，高级黑暗的歌词，来自最后一个苏联诗人Борис Рыжий（ 鲍里斯.里日）。在致郁方面只能说是太得劲了。在考差了的那个下午，回到家，面对稀稀拉拉的车流，小河也在慢慢流淌。要日落，于是天阴沉沉的。我靠在窗台上，透过由铁栏杆制成的防盗网里面看外面。插上耳机，循环播放这首歌。脑袋里面也止不住的胡思乱想。</p>
<p>（以上是错误的生活态度，别学。）</p>
<p>  回到Molchat Doma本身，这个乐队的专辑封面采样于在苏联控制或影响下的宏伟建筑。这些建筑体现了苏联独特的美学，野兽派风格。不禁令人遐想起曾经的那个红色巨人的强大壮观，而如今物是人非，一种悲伤之感油然而生。歌曲本身带有的致郁情绪，令人伤感。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-37.jpg" alt=""  />
</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-38.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-39.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-40.jpg" alt=""  />
</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th>1  С крыш наших домов（从我们的屋顶）                                封面是朝鲜平壤的柳京饭店，出于竞赛目的吸引外资建设的摩天大楼，曾有“世界最高空置建筑”的吉尼斯纪录。</th>
<th>2  Этажи（地板）    封面是粗野主义的代表，1970年代， 捷克斯洛伐克的酒店Panorama</th>
<th>3  Монумент（纪念碑）              封面是平壤建党纪念塔，浮雕“朝鲜人民一切胜利的组织者和向导者朝鲜劳动党万岁！”字样，塔身由象征朝鲜劳动党组成部分的工人、农民和知识分子攥紧的锤子、镰刀和毛笔组成。</th>
</tr>
</thead>
</table>
<p>   其他的俄式后朋，处在后苏联地区下，听起来也是伤感。编曲简单，不断重复，听多了确实也腻了。但是我不是很喜欢其他语种的后朋，只有俄式后朋才能听的到某种特殊的感觉。</p>
<p>    然而，后朋不应该只是网抑云。它更是一种对自我的反思，与朋克不同的一种内敛的形式。</p>
<p>    之后在某些后朋歌单，我接触了苏联摇滚教父Виктор Цой（维克多.崔）。他的乐队叫做Кино（电影）。他的音乐很独特，成长于苏联的地下环境，赶上了戈尔巴乔夫的错误改革，地下摇滚之声走上台前。歌曲中自省，向上的元素，深深感染了我。初听也是不太习惯，俄语太拗口了，但是后面反复去听几次，也就习惯了，他的音乐把我从一味的悲伤拽出来，并深刻理解后朋克。遗憾的是，1990年8月15日，他因一场意外的车祸去世。</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-41.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-42.png" alt=""  />
</th>
</tr>
</thead>
</table>
<blockquote>
<p>左： Кино乐队    右：维克多.崔</p>
</blockquote>
<p>    在高三寒假，我突然想听听老歌怀怀旧。听起罗大佑的经典歌曲，那是他的第一张专辑《之乎者也》（1982年，太厉害了）里的。于是饶有兴致开听，直接被 之乎者也 （这是专辑里的一首同名歌）深深折服了，之前初中在重金属听的最凶的时候也听过 之乎者也 。但是那时见识短浅，觉得这唱的是什么垃圾，没有重金属带劲。但这次听，却有一种沉闷的力量，所谓歌曲者，是否如此也。专辑内，一首乡愁四韵，一首错误，让我领悟到了不一样的东西。原来歌曲可以这样的丰富，诗意。鹿港小镇，听多少次还是一样的震撼。何为好，何为不好，何为故土，何为乡情，罗大佑的铜锣嗓，独特的嗓音十分契合了他的歌曲。我将他所以的专辑一一听过，每首歌都在贯彻他的理念，言之有物。我明白了，他为何被冠以教父之名，他的歌放在今天也不会过时。我喜欢的专辑是《之乎者也》，和《原乡》。《原乡》是罗大佑中国三部曲中最后一部曲（第一部《皇后大道东》，第二部《首都》），熟悉闽南话传递出多少代中国人不变的乡土之情。而且，罗大佑也深刻影响了我的听歌方向。摇滚不一定就是最好的，要多元广泛了解更多的音乐，作为一名中国人，要关注乡土人情，我们的根在那，而不在别的地方。</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-43.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-46.jpg" alt=""  />
</th>
</tr>
</thead>
</table>
<blockquote>
<p>左：罗大佑    右：罗大佑年轻时</p>
</blockquote>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-44.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-45.jpg" alt=""  />
</th>
</tr>
</thead>
</table>
<blockquote>
<p>左：《之乎者也》    右：《原乡》</p>
</blockquote>
<p>    然后就是西北歌王，王洛宾。作为一名老干部，他在西北，收集民歌，改编创作，在抗战时期与解放战争时期就辗转西部地区，历经沧桑几十载。初识王洛宾，是因为刘森翻唱了一首永隔一江水。而后在听罗大佑时，发现他的第二张专辑里翻唱了一首青春舞曲。于是专门去找关于他的专辑，网易云上能听的只有一张，均是由骆宾王收集或者创作，别人翻唱。里面有许多脍炙人口的歌曲，《马车夫之歌》，《青春舞曲》《在那遥远的地方》《掀起你的盖头来》，民歌是民族之声，声声不息。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-47.jpg" alt=""  />
</p>
<p>    然后就开始听红歌。红歌荟萃，听了好多红歌。印象很深的是国际歌，东方红和大海航行靠舵手。我老家非常偏僻，但是那老一辈的人好多都会唱这几首（我所知道的）。我最喜欢的是映山红，邓玉华老师演唱的版本，从开始独唱到后面突然器乐声一下子响起来，气势磅礴，“血撒红旗哟旗更红”“革命鲜花哟代代红”这个歌词好，根据地的人民对于红军，中国共产党的期盼，敢于反抗国民党，地主的守旧势力，不怕流血，敢于牺牲的精神令人动容。在经典红歌里可以听出，人民是英雄的，感情是真挚的，所以感动。</p>
<p>对于西方摇滚，我开始认真听起The Beatles（披头士），The Rolling Stones（滚石），Bob Dylan（鲍勃.迪伦），Led Zeppelin（齐柏林飞艇），还有David Bowie（大卫.鲍伊），Iggy Pop（伊基波普）<strong>等等</strong>。</p>
<p>然后，就开始沉迷德国的Kraftwerk（发电站乐队），目前最喜欢的乐队。由最开始的泡菜摇滚开始，成为电子乐的先驱。简单的音色，精彩的编排，令我神往。不像现在商业化电音与满是动次打次的土DJ，发电站的音乐比较纯粹。（可能是祖师爷的时代也没那么多乐器）。歌曲也非常前卫，处处透露着严谨德国人的态度。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-48.jpg" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-49.jpg" alt=""  />
</p>
<blockquote>
<p>专辑《Autobahn》（高速公路），模仿汽车上高速的场景，还有彗星划过的声音。特别是他们用电子乐器来模仿鸟叫，营造出东方山水的清幽之感。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-50.jpg" alt=""  />
</p>
<blockquote>
<p>专辑《Trans-Europe Express》，我习惯叫做欧洲特快。整张专辑行云流水，像是坐上高铁穿越欧洲。始发，运行，到站，十分巧妙。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-51.jpg" alt=""  />
</p>
<blockquote>
<p>专辑《The Man Machine》，the model比较出名。使人置身于未来都市，其中metropolis（大都会）个人最为喜欢，为此还特意去看了德国的同名电影，电影也不错。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-52.jpg" alt=""  />
</p>
<blockquote>
<p>专辑《Computer World》，走进电脑与计算的世界，1981年算是深刻预言了现在的社会发展。最爱computer love（旋律优美上头）。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-53.jpg" alt=""  />
</p>
<blockquote>
<p>专辑《Techno Pop》，个人最喜欢的专辑，非常现代成熟。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-54.jpg" alt=""  />
</p>
<blockquote>
<p>专辑《Tour De France》，为环法自行车赛做的专辑。听起来像是自己在环法，特别是自己骑自行车的时候。</p>
</blockquote>
<p>顺带也了解了一下ymo（<strong>坂本龙一</strong>之前的乐队，比kraftwerk晚一点）。</p>
<p>    这个时候开始沉迷合成器了，之前的后朋，还有现在一些中国的乐队都较多运用合成器。比较喜欢的乐队是depeche mode（赶时髦）。很经典的合成器流行乐队。刚开始的合成器比较简易，也比较洗脑。</p>
<p>    之后开始回听工业金属。美国的内阁乐队，德国的kmfdm（记成昆明防盗门），都是工业金属先驱。之前听的工业基本都是德式工业，或多或少带点战车味道。</p>
<p>    高考结束后，又开始怀旧，找了许多老歌开始听，听齐豫，张雨生，齐秦，邓丽君，郑智化等（特别是王杰），也终于开始认真听周杰伦了。补齐之前听老歌的版图。</p>
<p>    在了解中国台湾乐坛的时候，再次发现了交工乐队。其实初三就知道了，当时没感觉。一个客家乐队。成立于1999年，台湾客家美浓镇土生土长的乐团，早期因为反美浓水库而受到重视，后来开始关注农民和农村议题，音乐形式也愈趋成熟。客家话虽然我听不懂，但是，土地和人民的语言是共通的。听《菊花夜行军》，非常感动。听菊花夜行军这个歌时，感觉土地之泪，农民之惨，人民之苦，有点不敢听，不忍心听，菊花大降价，菊农只能对着菊花偷偷梦想。听风神125的时候，也是泪目感动，哭出来了，不知道为什么。阿妈的声音深深刺在我心里。“成仔，要努力认真做，别人家如果开辆BMW（可能是某种拖拉机），我们就铁牛车勉强拖，凑合凑合一定会有高进的日子。”但是，初来城市打拼的我却狠狠的失败了，人生幻灭，只能回家乡。于是我骑着风神125（某种土摩托），“辞别这个哮喘的城市”，但是又愧对阿妈，不想让家乡的人知道我的失败。在这种矛盾下，加上主唱林生祥后面绝望近乎嘶吼的嗓音，更令我难绷。这首歌我听了会哭，因为歌里可能写的是自己吧。</p>
<p><img loading="lazy" src="https://img.0pt.im/music-history1/0-55.jpg" alt=""  />
</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-56.jpg" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-57.jpg" alt=""  />
</th>
</tr>
</thead>
</table>
<blockquote>
<p>左：《我等就来唱山歌》   右：《菊花夜行军》</p>
</blockquote>
<p>    暑假快结束的时候，乐队的夏天第三季也开播了。之前很喜欢的乐队也上去了（橘子海比较可惜，看好二手玫瑰），还有给我到来惊喜的小众乐队，不过很可惜没有重型乐队参加。</p>
<p>    最后 评选一下我心目中的十大专辑。</p>
<table>
<thead>
<tr>
<th>第一，罗大佑的《之乎者也》</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-44.jpg" alt=""  />
</th>
</tr>
</thead>
<tbody>
<tr>
<td>第二，窦唯《雨吁》        个人认为这个才是中国风</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-16.jpg" alt=""  />
</td>
</tr>
<tr>
<td>第三，Kraftwerk《techno pop》</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-53.jpg" alt=""  />
</td>
</tr>
<tr>
<td>第四，Kraftwerk《autobahn》</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-49.jpg" alt=""  />
</td>
</tr>
<tr>
<td>第五，Alcest《Kodama》</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-33.jpg" alt=""  />
</td>
</tr>
<tr>
<td>第六，罗大佑《原乡》</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-45.jpg" alt=""  />
</td>
</tr>
<tr>
<td>第七，交工乐队《菊花夜行军》</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-57.jpg" alt=""  />
</td>
</tr>
<tr>
<td>第八，Кино《Чёрный Альбом》（黑色专辑） 维克多崔的遗作。</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-58.jpg" alt=""  />
</td>
</tr>
<tr>
<td>第九，Opeth（月亮之城）的《Damnation》不一样的黑金属。</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-26.jpg" alt=""  />
</td>
</tr>
<tr>
<td>第十，伍佰的《钉子花》</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-24.jpg" alt=""  />
</td>
</tr>
</tbody>
</table>
<p>还有几张专辑也是非常喜欢的。</p>
<table>
<thead>
<tr>
<th>鲍家街43号《鲍家街43号》                汪峰老师中国摇滚半壁江山</th>
<th><img loading="lazy" src="https://img.0pt.im/music-history1/0-59.jpg" alt=""  />
</th>
</tr>
</thead>
<tbody>
<tr>
<td>R.E.M.（快转眼球）《Murmur》      另类摇滚祖师爷，快转眼球的第一张专辑</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-60.jpg" alt=""  />
</td>
</tr>
<tr>
<td>林强的《向前走》                             林强不严谨的说法叫台湾窦唯，闽南语与摇滚结合的开创者，博客名字出自他的另一个专辑</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-61.jpg" alt=""  />
</td>
</tr>
<tr>
<td>Judas Priest（犹大圣徒）的《Painkiller》（感觉不是翻译成止痛药，我习惯叫超级杀手）                 重金属，非常猛</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-62.jpg" alt=""  />
</td>
</tr>
<tr>
<td>罗大佑的《青春舞曲-演唱会实况精华》                                                    最喜欢的现场专辑</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-63.jpg" alt=""  />
</td>
</tr>
<tr>
<td>Кино的《Последний герой》（最后的英雄）                                     Группа крови（血液型）据说俄罗斯人都会唱。很深刻</td>
<td><img loading="lazy" src="https://img.0pt.im/music-history1/0-64.jpg" alt=""  />
</td>
</tr>
</tbody>
</table>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络6-7</title>
      <link>https://blog.0pt.im/learn/1-6-7/</link>
      <pubDate>Mon, 07 Aug 2023 18:17:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-6-7/</guid>
      <description>六.应用层</description>
      <content:encoded><![CDATA[<h1 id="万维网www">万维网WWW</h1>
<p>万维网WWW（World Wide Web）<strong>并非某种特殊的计算机网络。它是一个大规模的、联机式的信息储藏所,是运行在因特网上的一个分布式应用</strong>。</p>
<p>万维网利用网页之间的<strong>超链接</strong>将不同网站的网页链接成一张逻辑上的信息网。</p>
<p>万维网是欧洲粒子物理实验室的Tim Berners-Lee最初于1989年3月提出的。</p>
<p>1993年2月，第一个图形界面的浏览器Mosaic</p>
<p>1995年著名的Netscape Navigator浏览器上市。</p>
<p>目前比较流行的浏览器如下:（后面是浏览器内核）</p>
<p>Chrome    Blink</p>
<p>Firefox    Gecko</p>
<p>Safari    WebKit</p>
<p>Opera    Blink</p>
<p>lnternet Explorer    Trident</p>
<p>浏览器最重要的部分是<strong>渲染引擎</strong>，也就是<strong>浏览器内核</strong>。负责对网页内容进行解析和显示。</p>
<ul>
<li>
<p>不同的浏览器内核对网页内容的解析也有不同，因此同一网页在不同内核的浏览器里的显示效果可能不同;</p>
</li>
<li>
<p>网页编写者需要在不同内核的浏览器中测试网页显示效果。</p>
</li>
</ul>
<p>为了方便地访问在世界范围的文档，万维网使用<strong>统一资源定位符URL</strong>来指明因特网上任何种类“资源”的位置。URL的一般形式由以下四个部分组成:</p>
<p>&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</p>
<p>万维网的文档</p>
<ul>
<li>
<p>HTML    超文本标记语言HTML(HyperText Markup Language)，使用多种“标签”来描述<strong>网页的结构和内容</strong></p>
</li>
<li>
<p>CSS    层叠样式表CSS(Cascading Style Sheets)，从审美的角度来描述<strong>网页的样式</strong></p>
</li>
<li>
<p>JavaScript    一种脚本语言(和Java没有任何关系)，控制网页的行为</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-1.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-2.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-3.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-4.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-5.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-6.png" alt=""  />
</p>
<p>超文本传输协议HTTP(HyperText Transfer Protocol)</p>
<p>HTTP定义了浏览器（即万维网客户进程）怎样向万维网服务器请求万维网文档，以及万维网服务器怎样把万维网文档传送给浏览器。</p>
<p>HTTP/1.0采用<strong>非持续连接</strong>方式。在该方式下，每次浏览器要请求一个文件都要与服务器建立TCP连接,当收到响应后就立即关闭连接。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-7.png" alt=""  />
</p>
<ul>
<li>
<p><strong>每请求一个文档就要有两倍的RTT的开销</strong>。若一个网贝上有很多引用对家（例如图/守)，B求每一个对象都需要花费2RTT的时间。</p>
</li>
<li>
<p>为了减小时延，浏览器通常会建立多个并行的TCP连接同时请求多个对象。但是，这会大量占用万维网服务器的资源，特别是万维网服务器往往要同时服务于大量客户的请求，这会使其负担很重。</p>
</li>
</ul>
<p>HTTP/1.1采用<strong>持续连接</strong>方式。在该方式下，万维网服务器在发送响应后仍然保持这条连接，使同一个</p>
<p>客户(浏览器）和该服务器可以继续在区条连孩上传达石续i人IIr阴水报THW队人。-I于传送同一个页面上引用的对象，而是只要这些文档都在同一个服务器上就行。</p>
<ul>
<li>为了进一步提高效率，HTTP/1.1的持续连接还可以使用<strong>流水线</strong>方式工作，即浏览器在收到HTTP的响应报文之前就能够连续发送多个请求报文。这样的一个接一个的请求报文到达服务器后，服务器就发回一个接一个的响应报文。这样就节省了很多个RTT时间，使TCP连接中的空闲时间减少，提高了下载文档的效率。</li>
</ul>
<p>HTTP的报文格式</p>
<p>HTTP是<strong>面向文本</strong>的，其报文中的每一个<strong>字段</strong>都是一些<strong>ASCII码串</strong>，并且每个字段的<strong>长度</strong>都是<strong>不确定</strong>的。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-8.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-9.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-10.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-14.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-12.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-13.png" alt=""  />
</p>
<p>使用Cookie在服务器上记录用户信息</p>
<ul>
<li>
<p>早期的万维网应用非常简单，仅仅是用户查看存放在不同服务器上的各种静态的文档。因此HTTP被设计为一种<strong>无状态</strong>的协议。这样可以简化服务器的设计。</p>
</li>
<li>
<p>现在，用户可以通过万维网实现各种复杂的应用，如网上购物、电子商务等。这些应用往往需要万维网服务器能够识别用户。</p>
</li>
<li>
<p>Cookie提供了一种机制使得万维网服务器能够“记住”用户，而无需用户主动提供用户标识信息。也就是说，<strong>Cookie是一种对无状态的HTTP进行状态化的技术</strong>。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-15.png" alt=""  />
</p>
<p>万维网缓存与代理服务器</p>
<ul>
<li>
<p>在万维网中还可以使用缓存机制以提高万维网的效率。</p>
</li>
<li>
<p>万维网缓存又称为<strong>Web缓存</strong>(Web Cache)，可位于客户机，也可位于中间系统上，位于中间系统上的Web缓存又称为<strong>代理服务器</strong>(Proxy Server) 。</p>
</li>
<li>
<p>Web缓存把最近的一些请求和响应暂存在本地磁盘中。<strong>当新请求到达时，若发现这个请求与暂时存放的请求相同，就返回暂存的响应，而不需要按URL的地址再次去因特网访问该资源。</strong></p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-16.png" alt=""  />
</p>
<p>试问：假如原始服务器的文档已修改，出现上图情况，主机请求到错误文档？</p>
<p>通常情况，代理服务器会为每个响应对象设定一个修改时间字段（Last-Modified）和一个有效日期字段(Expires)。没过期正常响应，过期了向原始服务器发送请求，若文档无变化，如下</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-17.png" alt=""  />
</p>
<p>若文档有变化，如下</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-18.png" alt=""  />
</p>
<p>例题：某浏览器发出的HTTP请求报文如下</p>
<p>GETlindex.html HTTP/1.1</p>
<p>Host: <a href="https://www.test.edu.cn">www.test.edu.cn</a></p>
<p>Connection: Close</p>
<p>Cookie: 123456</p>
<p>下列叙述中，错误的是</p>
<p>A.该浏览器请求浏览index.html    B. index.html存放在www.test.edu.cn上</p>
<p>C.该浏览器请求使用持续连接    D.该浏览器曾经浏览过www.test.edu.cn</p>
<p>解析：</p>
<p>请求行:指明方法GET，URL，HTTP版本</p>
<p>首部行的开始:指明服务器的域名</p>
<p>告诉服务器发送完请求的文档后就可释放连接，即非持续连接;</p>
<p>若是持续连接方式，取值应为keep-alive，而不是Close</p>
<p>这是服务器为浏览器生成的Cookie识别码，表明该浏览器曾经访问过www.test.edu.cn</p>
<p>选C</p>
<p>例题：假设HTTP1.1协议以持续的非流水线方式工作，一次请求-响应的时间为RTT,rfc.html页面引用了2个JPEG小图像，则浏览器从开始建立TCP连接到收到全部内容为止，需要多少个RTT?</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-7/6-7-19.png" alt=""  />
</p>
<p>4个RTT</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络6-6</title>
      <link>https://blog.0pt.im/learn/1-6-6/</link>
      <pubDate>Mon, 07 Aug 2023 18:16:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-6-6/</guid>
      <description>六.应用层</description>
      <content:encoded><![CDATA[<h1 id="电子邮件">电子邮件</h1>
<p>电子邮件（E-mail）是因特网上<strong>最早流行的一种应用</strong>，并且仍然是当今因特网上最重要、最实用的应用之一。</p>
<p>传统的电话通信属于实时通信，存在以下两个缺点:</p>
<ul>
<li>
<p>电话通信的主叫和被叫双方必须同时在场;</p>
</li>
<li>
<p>一些不是十分紧迫的电话也常常不必要地打断人们的工作或休息。</p>
</li>
</ul>
<p>而电子邮件与邮政系统的寄信相似。</p>
<ul>
<li>
<p>发件人将邮件发送到自己使用的<strong>邮件服务器</strong>;</p>
</li>
<li>
<p>发件人的邮件服务器将收到的邮件按其目的地址转发到收件人邮件服务器中的收件人邮箱;</p>
</li>
<li>
<p>收件人在方便的时候访问收件人邮件服务器中自己的邮箱，获取收到的电子邮件。</p>
</li>
</ul>
<p>电子邮件使用方便、传递迅速而且费用低廉。它不仅可以传送文字信息，而且还可附上声音和图像。</p>
<p>由于电子邮件的广泛使用，现在许多国家已经正式取消了电报业务。在我国，<strong>电信局的电报业务也因电子邮件的普及而濒临消失</strong>。</p>
<p>电子邮件系统采用<strong>客户/服务器方式</strong>。</p>
<p>电子邮件系统的三个主要组成构件：<strong>用户代理，邮件服务器</strong>，以及<strong>电子邮件所需的协议</strong>。</p>
<ul>
<li>
<p>用户代理是用户与电子邮件系统的接口，又称为电子邮件客户端软件。</p>
</li>
<li>
<p>邮件服务器是电子邮件系统的基础设施。因特网上所有的ISP都有邮件服务器，其功能是发送和接收邮件，同时还要负责维护用户的邮箱。</p>
</li>
<li>
<p>协议包括邮件发送协议（例如SMTP）和邮件读取协议（例如POP3，IMAP）。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-6/6-6-1.png" alt=""  />
</p>
<p>简单邮件传送协议SMTP (Simple Mail Transfer Protocol)的基本工作原理</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-6/6-6-2.png" alt=""  />
</p>
<p>注意:</p>
<ul>
<li>
<p>1.为了简单起见，省略了认证过程;</p>
</li>
<li>
<p>2.应答代码后面一般都跟有简单的描述信息;</p>
</li>
<li>
<p>3.不同的SMTP服务器给出的相同应答代码的描述信息可能不同。</p>
</li>
</ul>
<p>电子邮件的信息格式并不是由SMTP定义的，而是在RFC 822中单独定义的。这个RFC文档已在2008年更新为RFC 5322。一个电子邮件有<strong>信封</strong>和<strong>内容</strong>两部分。而内容又由<strong>首部</strong>和<strong>主体</strong>两部分构成。</p>
<p><strong>SMTP协议只能传送ASCII码文本数据</strong>，不能传送可执行文件或其他的二进制对象。</p>
<p>SMTP不能满足传送多媒体邮件（例如带有图片、音频或视频数据）的需要。并且许多其他非英语国家的文字（例如中文、俄文、甚至带有重音符号的法文或德文）也无法用SMTP传送。</p>
<p>为解决SMTP传送非ASCII码文本的问题，提出了<strong>多用途因特网邮件扩展MIME</strong> (Multipurpose Internet MailExtensions)。</p>
<ul>
<li>
<p>增加了<strong>5个新的邮件首部字段</strong>，这些字段提供了有关邮件主体的信息。</p>
</li>
<li>
<p>定义了<strong>许多邮件内容的格式</strong>，对多媒体电子邮件的表示方法进行了标准化。</p>
</li>
<li>
<p>定义了<strong>传送编码</strong>，可对任何内容格式进行转换，而不会被邮件系统改变。</p>
</li>
</ul>
<p>实际上，MIME不仅仅用于SMTP，也用于后来的同样面向ASCII字符的HTTP。</p>
<p>常用的邮件读取协议有以下两个:</p>
<ul>
<li>
<p><strong>邮局协议POP</strong> (Post Office Protocol)，POP3是其第三个版本，是因特网正式标准。非常简单、功能有限的邮件读取协议。用户只能以<strong>下载并删除方式</strong>或<strong>下载并保留方式</strong>从邮件服务器下载邮件到用户方计算机。<strong>不允许用户在邮件服务器上管理自己的邮件</strong>。(例如创建文件夹，对邮件进行分类管理等)。</p>
</li>
<li>
<p><strong>因特网邮件访问协议IMAP</strong> (Internet Message Access Protocol)，IMAP4是其第四个版本，目前还只是因特网建议标准。功能比POP3强大的邮件读取协议。<strong>用户在自己的计算机上就可以操控邮件服务器中的邮箱</strong>，就像在本地操控━样，因此IMAP是一个联机协议。</p>
</li>
<li>
<p>POP3和IMAP4都采用<strong>基于TCP连接的客户/服务器方式</strong>。POP3使用熟知端口110，IMAP4使用熟知端口143。</p>
</li>
</ul>
<p>基于万维网的电子邮件</p>
<ul>
<li>
<p>通过<strong>浏览器</strong>登录（提供用户名和口令）<strong>邮件服务器万维网网站</strong>就可以撰写、收发、阅读和管理电子邮件。这种工作模式与IMAP很类似，不同的是用户计算机无需安装专门的用户代理程序，只需要使用通用的万维网浏览器。</p>
</li>
<li>
<p>邮件服务器网站通常都提供非常强大和方便的邮件管理功能，用户可以在邮件服务器网站上管理和处理自己的邮件，而不需要将邮件下载到本地进行管理。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-6/6-6-3.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络6-5</title>
      <link>https://blog.0pt.im/learn/1-6-5/</link>
      <pubDate>Mon, 07 Aug 2023 18:15:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-6-5/</guid>
      <description>六.应用层</description>
      <content:encoded><![CDATA[<h1 id="文件传送协议ftp">文件传送协议FTP</h1>
<p>将某台计算机中的文件通过网络传送到可能相距很远的另一台计算机中，是一项基本的网络应用，即文件传送。<strong>文件传送协议FTP</strong> (File Transfer Protocol)是因特网上使用得最广泛的文件传送协议。</p>
<ul>
<li>
<p>FTP<strong>提供交互式的访问</strong>，允许客户<strong>指明文件的类型与格式</strong>(如指明是否使用ASCII码)，并允许<strong>文件具有存取权限</strong>（如访问文件的用户必须经过授权，并输入有效的口令）。</p>
</li>
<li>
<p><strong>FTP屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件</strong>。</p>
</li>
</ul>
<p>在因特网发展的早期阶段，用FTP传送文件约占整个因特网的通信量的三分之一，而由电子邮件和域名系统所产生的通信量还要小于FTP所产生的通信量。只是到了1995年，万维网WWW的通信量才首次超过了FTP。</p>
<p>FTP的常见用途是在计算机之间传输文件，尤其是用于批量传输文件。</p>
<p>FTP的另一个常见用途是让网站设计者将构成网站内容的大量文件批量上传到他们的Web服务器。</p>
<p>FTP的基本工作原理</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-5/6-5-1.png" alt=""  />
</p>
<p>2:控制连接在整个会话期间一直保持打开，用于传送FTP相关控制命令。</p>
<p>5:数据连接用于文件传输，在每次文件传输时才建立，传输结束就关闭。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-5/6-5-2.png" alt=""  />
</p>
<p>例题：FTP客户和服务器间传递FTP命令时，使用的连接是</p>
<p>A.建立在TCP之上的控制连接    B.建立在TCP之上的数据连接</p>
<p>C.建立在UDP之上的控制连接    D.建立在UDP之上的数据连接</p>
<p>解析：FTP客户和服务器之间要建立以下两个并行的TCP连接:</p>
<p>一个是控制连接，在整个会话期间一直保持打开，用于传送FTP相关控制命令.另一个是数据连接，用于文件传输，在每次文件传输时才建立，传输结束就关闭。</p>
<p>例题：下列关于FTP协议的叙述中，错误的是</p>
<p>A.数据连接在每次数据传输完毕后就关闭   B.控制连接在整个会话期间保持打开状态</p>
<p>C.服务器与客户端的TCP20端口建立数据连接  D.客户端与服务器的TCP21端口建立控制连接</p>
<p>解析：FTP客户和服务器之间要建立“控制连接”和“数据连接”这两个并行的TCP连接。控制连接在整个会话期间都保持打开状态，而数据连接在每次文件传输时才建立，传输结束就关闭。</p>
<p>默认情况下，FTP使用TCP21端口进行控制连接，TCP20端口进行数据连接。</p>
<p>但是，是否使用TCP 20端口建立数据连接与传输模式有关，主动方式使用TCP20端口，被动方式由服务器和客户端自行协商决定。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络6-4</title>
      <link>https://blog.0pt.im/learn/1-6-4/</link>
      <pubDate>Mon, 07 Aug 2023 18:14:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-6-4/</guid>
      <description>六.应用层</description>
      <content:encoded><![CDATA[<h1 id="域名系统dns-domain-name-system">域名系统DNS (Domain Name System)</h1>
<p>早在1983年，因特网就开始采用<strong>层次结构的命名树</strong>作为主机的名字（即域名），并使用<strong>分布式的域名系统</strong>DNS。</p>
<p>DNS使<strong>大多数域名都在本地解析</strong>，仅少量解析需要在因特网上通信，因此系统效率很高。</p>
<p>由于DNS是分布式系统，即使单个计算机出了故障，也不会妨碍整个系统的正常运行。</p>
<p>因特网采用<strong>层次树状结构的域名结构</strong></p>
<p>域名的结构由若干个分量组成，各分量之间用“点”隔开，分别代表不同级别的域名。</p>
<p>···.三级域名.二级域名.顶级域名</p>
<ul>
<li>
<p>每一级的域名都由英文字母和数字组成，不超过63个字符，不区分大小写字母。</p>
</li>
<li>
<p>级别最低的域名写在最左边，而级别最高的顶级域名写在最右边。</p>
</li>
<li>
<p>完整的域名不超过255个字符。</p>
</li>
</ul>
<p>域名系统既不规定一个域名需要包含多少个下级域名，也不规定每一级的域名代表什么意思。</p>
<p>各级域名由其上一级的域名管理机构管理，而最高的顶级域名则由因特网名称与数字地址分配机构ICANN进行管理。</p>
<p>顶级域名TLD (Top Level Domain)分为以下三类:</p>
<ul>
<li>
<p>国家顶级域名nTLD    采用ISO 3166的规定。如cn表示中国，us表示美国，uk表示英国、等等。</p>
</li>
<li>
<p>通用顶级域名gTLD    最常见的通用顶级域名有七个，即:com(公司企业)、net (网络服务机构)、org (非营利性组织)、int(国际组织)、edu(美国教育结构)、gov(美国政府部门) . mil(美国军事部门)。</p>
</li>
<li>
<p>反向域arpa    用于反向域名解析，即IP地址反向解析为域名。</p>
</li>
</ul>
<p>在<strong>国家顶级域名下注册的二级域名均由该国家自行确定</strong>。例如，顶级域名为jp的日本，将其教育和企业机构的二级域名定为ac和co，而不用edu和com。</p>
<p><strong>我国</strong>则将<strong>二级域名</strong>划分为以下<strong>两类</strong>:</p>
<ul>
<li>
<p>类别域名    共七个: ac(科研机构)、com (工、商、金融等企业)、edu(教育机构)、gov(政府部门)、net(提供网络服务的机构)、mil(军事机构)和org (非营利性组织)。</p>
</li>
<li>
<p>行政区域名    共34个，适用于我国的各省、自治区、直辖市。例如: bj为北京市、sh为上海市、js为江苏省，等等。</p>
</li>
</ul>
<p>举例：因特网的域名空间</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-4/6-4-1.png" alt=""  />
</p>
<p>这种按等级管理的命名方法便于维护名字的唯一性，并且也容易设计出一种高效的域名查询机制。需要注意的是，域名只是个逻辑概念，并不代表计算机所在的物理地点。</p>
<p>域名和IP地址的映射关系必须保存在域名服务器中，供所有其他应用查询。显然不能将所有信息都储存在一台域名服务器中。DNS使用<strong>分布在各地的域名服务器</strong>来实现域名到IP地址的转换。</p>
<p>域名服务器可以划分为以下四种不同的类型:</p>
<ul>
<li>
<p>根域名服务器    根域名服务器是最高层次的域名服务器。每个根域名服务器都知道所有的顶级域名服务器的域名及其IP地址。因特网上共有13个不同IP地址的根域名服务器。尽管我们将这13个根域名服务器中的每一个都视为单个的服务器，但“每台服务器”实际上是由许多分布在世界各地的计算机构成的<strong>服务器群集</strong>。当本地域名服务器向根域名服务器发出查询请求时，路由器就把查询请求报文转发到离这个DNS客户最近的一个根域名服务器。这就加快了DNS的查询过程，同时也更合理地利用了因特网的资源。<strong>根域名服务器通常并不直接对域名进行解析，而是返回该域名所属顶级域名的顶级域名服务器的IP地址</strong>。</p>
</li>
<li>
<p>顶级域名服务器    这些域名服务器负责<strong>管理在该顶级域名服务器注册的所有二级域名</strong>。当收到DNS查询请求时就给出相应的回答（可能是最后的结果，也可能是下一级权限域名服务器的IP地址）。</p>
</li>
<li>
<p>权限域名服务器    这些域名服务器负责<strong>管理某个区的域名</strong>。每一个主机的域名都必须在某个权限域名服务器处注册登记。因此权限域名服务器知道其管辖的域名与IP地址的映射关系。另外，权限域名服务器还知道其下级域名服务器的地址。</p>
</li>
<li>
<p>本地域名服务器    本地域名服务器不属于上述的域名服务器的等级结构。当一个主机发出DNS请求报文时，这个报文就首先被送往该主机的本地域名服务器。<strong>本地域名服务器起着代理的作用，会将该报文转发到上述的域名服务器的等级结构中</strong>。每一个因特网服务提供者ISP，一个大学，甚至一个大学里的学院，都可以拥有一个本地域名服务器，它有时也称为<strong>默认域名服务器</strong>。本地域名服务器离用户较近，一般不超过几个路由器的距离，也有可能就在同一个局域网中。本地域名服务器的IP地址需要直接配置在需要域名解析的主机中。</p>
</li>
</ul>
<p>域名解析的过程</p>
<ul>
<li>
<p>递归查询</p>
</li>
<li>
<p>迭代查询</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-4/6-4-2.png" alt=""  />
</p>
<p>由于递归查询对于被查询大，通常采用以下模式:从请求主机到本地域名服务器的查询是递归查询，而其余的查询是迭代查询。</p>
<p>为了提高DNS的查询效率，并减轻根域名服务器的负荷和减少因特网上的DNS查询报文数量，在域名服务器中广泛地使用了<strong>高速缓存</strong>。高速缓存用来存放最近查询过的域名以及从何处获得域名映射信息的记录。</p>
<p>由于域名到IP地址的映射关系并不是永久不变，为保持高速缓存中的内容正确，域名服务器<strong>应为每项内容设置计时器并删除超过合理时间的项</strong>（例如，每个项目只存放两天)。</p>
<p>不但在本地域名服务器中需要高速缓存，在用户主机中也很需要。许多用户主机在启动时从本地域名服务器下载域名和IP地址的全部数据库，维护存放自己最近使用的域名的高速缓存，并且只在从缓存中找不到域名时才向域名服务器查询。同理，主机也需要保持高速缓存中内容的正确性。</p>
<p>例题：假设所有域名服务器均采用迭代查询方式进行域名解析，当H4访问规范域名为www.abc.xyz.com的网站时，域名服务器201.1.1.1在完成该域名解析过程中，可能发出DNS查询的最少和最多次数分别是</p>
<p>A.0，3    B.1，3    C.0，4    D.1，4</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-4/6-4-3.png" alt=""  />
</p>
<p>解析：</p>
<p>若主机H4的DNS高速缓存中有该域名的DNS信息时，不需要查询任何域名服务器。这样，H4无需向图中的默认域名服务器（本地域名服务器）发出DNS查询，该域名服务器也无需发出DNS查询。</p>
<p>题目给定采用迭代查询进行域名解析，在最坏的情况下，需要图中的本地域名服务器依次向以下域名服务器发出共4次DNS查询:</p>
<ul>
<li>
<p>根域名服务器</p>
</li>
<li>
<p>顶级域名服务器(.com)</p>
</li>
<li>
<p>权限域名服务器(xyz.com)</p>
</li>
<li>
<p>权限域名服务器(abc.xyz.com)</p>
</li>
</ul>
<p>选C</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络6-3</title>
      <link>https://blog.0pt.im/learn/1-6-3/</link>
      <pubDate>Mon, 07 Aug 2023 18:13:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-6-3/</guid>
      <description>六.应用层</description>
      <content:encoded><![CDATA[<h1 id="动态主机配置协议dhcp">动态主机配置协议DHCP</h1>
<p>DHCP的作用</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-3/6-3-1.png" alt=""  />
</p>
<p>人工配置工作量大，容易出错。</p>
<p>DHCP的工作过程</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-3/6-3-2.png" alt=""  />
</p>
<p>DHCP服务器为DHCP客户分配IP时，使用ARP确保所选IP地址未被网络中其他主机占用。</p>
<p>DHCP客户接受确认IP地址租约时，使用ARP检测所分配到的IP地址是否已被网络中其他主机占用:</p>
<ul>
<li>
<p>若被占用:给DHCP服务器发送“DHCPDECLINE”报文撤销IP地址租约，并重新发送“DHCP DISCOVER”报文;</p>
</li>
<li>
<p>若未被占用:可以使用租约中的IP地址与网络中其他主机通信了。</p>
</li>
</ul>
<p>DHCP中继代理</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/6-3/6-3-3.png" alt=""  />
</p>
<p>原本路由器不转发广播，所以得给路由器配置，使之成为DHCP中继代理。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络6-2</title>
      <link>https://blog.0pt.im/learn/1-6-2/</link>
      <pubDate>Mon, 07 Aug 2023 18:12:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-6-2/</guid>
      <description>六.应用层</description>
      <content:encoded><![CDATA[<h1 id="客户服务器方式cs方式和对等方式p2p方式">客户/服务器方式（C/S方式）和对等方式（P2P方式）</h1>
<p>网络应用程序运行在处于网络边缘的不同的端系统上，通过彼此间的通信来共同完成某项任务。</p>
<p>开发一种新的网络应用首先要考虑的问题就是<strong>网络应用程序在各种端系统上的组织方式和它们之间的关系</strong>。目前流行的主要有以下两种：</p>
<ul>
<li>
<p>客户/服务器(Client/Server，C/S)方式</p>
</li>
<li>
<p>对等(Peer-to-Peer，P2P)方式</p>
</li>
</ul>
<p>客户/服务器(Client/Server,C/S)方式</p>
<ul>
<li>
<p>客户和服务器是指通信中所涉及的两个应用进程。</p>
</li>
<li>
<p>客户/服务器方式所描述的是进程之间服务和被服务的关系。</p>
</li>
<li>
<p><strong>客户是服务请求方，服务器是服务提供方。</strong></p>
</li>
<li>
<p><strong>服务器总是处于运行状态，并等待客户的服务请求。服务器具有固定端口号（例如HTTP服务器的默认端口号为80），而运行服务器的主机也具有固定的IP地址。</strong></p>
</li>
</ul>
<p>C/S方式是因特网上传统的、同时也是最成熟的方式，很多我们熟悉的网络应用采用的都是C/S方式。包括万维网www、电子邮件、文件传输FTP等。</p>
<p>基于C/S方式的应用服务通常是<strong>服务集中型</strong>的，即应用服务集中在网络中比客户计算机少得多的服务器计算机上。</p>
<ul>
<li>
<p>由于一台服务器计算机要为多个客户机提供服务，在C/S应用中，<strong>常会出现服务器计算机跟不上众多客户机请求的情况</strong>。</p>
</li>
<li>
<p>为此，在C/S应用中，常用<strong>计算机群集</strong>（或服务器场）构建一个强大的<strong>虚拟服务器</strong>。</p>
</li>
</ul>
<p>对等(Peer-to-Peer，P2P)方式</p>
<ul>
<li>在P2P方式中，<strong>没有固定的服务请求者和服务提供者</strong>，分布在网络边缘各端系统中的应用进程是对等的，被称为<strong>对等方</strong>。<strong>对等方相互之间直接通信</strong>，每个对等方既是服务的请求者，又是服务的提供者。</li>
</ul>
<p>目前，在因特网上流行的P2P应用主要包括P2P文件共享、即时通信、P2P流媒体、分布式存储等。</p>
<p>基于P2P的应用是<strong>服务分散型</strong>的，因为服务不是集中在少数几个服务器计算机中，而是分散在大量对等计算机中，这些计算机并不为服务提供商所有，而是为个人控制的桌面计算机和笔记本电脑，它们通常位于住宅、校园和办公室中。</p>
<p>P2P方式的最突出特性之一就是它的<strong>可扩展性</strong>。因为系统每增加一个对等方，不仅增加的是服务的请求者，同时也增加了服务的提供者，<strong>系统性能不会因规模的增大而降低</strong>。</p>
<p>P2P方式<strong>具有成本上的优势</strong>，因为它通常不需要庞大的服务器设施和服务器带宽。为了降低成本，服务提供商对于将P2P方式用于应用的兴趣越来越大。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络6-1</title>
      <link>https://blog.0pt.im/learn/1-6-1/</link>
      <pubDate>Mon, 07 Aug 2023 18:11:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-6-1/</guid>
      <description>六.应用层</description>
      <content:encoded><![CDATA[<h1 id="应用层概述">应用层概述</h1>
<p>应用层是计算机网络体系结构的<strong>最顶层</strong>，是<strong>设计和建立计算机网络的最终目的</strong>，也是计算机网络中发展最快的部分。</p>
<ul>
<li>
<p>早期基于文本的应用（电子邮件、远程登录、文件传输、新闻组）</p>
</li>
<li>
<p>20世纪90年代将因特网带入千家万户的万维网www</p>
</li>
<li>
<p>当今流行的即时通信、P2P文件共享及各种音视频应用</p>
</li>
<li>
<p>计算设备的小型化和“无处不在”，宽带住宅接入和无线接入的日益普及和迅速发展，为未来更多的新型应用提供了广阔的舞台。</p>
</li>
</ul>
<p>在本章中，我们以一些经典的网络应用为例来学习有关网络应用的原理、协议和实现方面的知识。</p>
<p>万维网www</p>
<p>域名系统DNS</p>
<p>动态主机配置DHCP</p>
<p>电子邮件</p>
<p>文件传送FTP和P2P文件共享</p>
<p>多媒体网络应用</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-9</title>
      <link>https://blog.0pt.im/learn/1-5-9/</link>
      <pubDate>Mon, 07 Aug 2023 18:10:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-9/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="tcp报文段的首部格式">TCP报文段的首部格式</h1>
<p>为了实现可靠传输，TCP采用了<strong>面向字节流</strong>的方式。但TCP在发送数据时，是从发送缓存取出一部分或全部字节并给其添加一个首部使之成为<strong>TCP报文段</strong>后进行发送。</p>
<ul>
<li>
<p>一个TCP报文段由首部和数据载荷两部分构成;</p>
</li>
<li>
<p>TCP的全部功能都体现在它首部中各字段的作用。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-9/5-9-1.png" alt=""  />
</p>
<p>源端口：占16比特，写入源端口号，用来标识发送该TCP报文段的应用进程。
目的端口：占16比特，写入目的端口号，用来标识接收该TCP报文段的应用进程。</p>
<p>序号:占32比特，取值范围[0,2^32 - 1]，序号增加到最后一个后，下一个序号就又回到
<strong>指出本TCP报文段数据载荷的第一个字节的序号</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-9/5-9-2.png" alt=""  />
</p>
<p><strong>确认号</strong>:占32比特，取值范围[0,2^32 -1]，确认号增加到最后一个后，下一个确认号就又回到0。
<strong>指出期望收到对方下一个TCP报文段的数据载荷的第一个字节的序号，同时也是对之前收到的所有数据的确认。</strong></p>
<p>若确认号=n，则表明到序号n-1为止的所有数据都已正确接收，期望接收序号为n的数据。</p>
<p><strong>确认标志位ACK</strong>:取值为1时确认号字段才有效;取值为0时确认号字段无效。</p>
<p>TCP规定，在连接建立后所有传送的TCP报文段都必须把ACK置1。</p>
<p><strong>数据偏移</strong>：占4比特，并以4字节为单位。</p>
<p>用来指出TCP报文段的数据载荷部分的起始处距离TCP报文段的起始处有多远。</p>
<p>这个字段实际上是指出了TCP报文段的首部长度。</p>
<p>首部固定长度为20字节，因此数据偏移字段的最小值为(0101)（二进制）</p>
<p>首部最大长度为60字节，因此数据偏移字段的最大值为(1111)（二进制）</p>
<p>如数据偏移=0101，转换成十进制为5，所以首部长度为5 * 4字节 = 20字节</p>
<p><strong>窗口</strong>：占16比特，以字节为单位。<strong>指出发送本报文段的一方的接收窗口</strong>。</p>
<p>窗口值作为接收方让发送方设置其发送窗口的依据。</p>
<p>这是以接收方的接收能力来控制发送方的发送能力，称为流量控制。</p>
<p><strong>校验和</strong>：占16比特，检查范围包括TCP报文段的首部和数据载荷两部分。</p>
<p>在计算校验和时，要在TCP报文段的前面加上12字节的伪首部。</p>
<p><strong>同步标志位SYN</strong>：在TCP连接建立时用来同步序号。</p>
<p><strong>终止标志位FIN</strong>:用来释放TCP连接。</p>
<p><strong>复位标志位RST</strong>:用来复位TCP连接。</p>
<p>当RST=1时，表明TCP连接出现了异常,必须释放连接，然后再重新建立连接。</p>
<p>RST置1还用来拒绝一个非法的报文段或拒绝打开一个TCP连接。</p>
<p><strong>推送标志位PSH</strong>：接收方的TCP收到该标志位为1的报文段会<strong>尽快上交应用进程</strong>，
而不必等到接收缓存都填满后再向上交付。</p>
<p><strong>紧急标志位URG</strong>：取值为1时紧急指针字段有效;取值为0时紧急指针字段无效。
<strong>紧急指针</strong>：占16比特，以字节为单位，用来指明紧急数据的长度。
当发送方有紧急数据时，可将紧急数据插队到发送缓存的最前面，并立刻封装到一个TCP报文段中进行发送。紧急指针会指出本报文段数据载荷部分包含了多长的紧急数据，紧急数据之后是普通数据。</p>
<p><strong>选项</strong></p>
<p><strong>最大报文段长度MSS选项</strong>：TCP报文段数据载荷部分的最大长度。</p>
<p><strong>窗口扩大选项</strong>：为了扩大窗口(提高吞吐率)。</p>
<p><strong>时间戳选项</strong>:</p>
<ul>
<li>
<p>用来计算往返时间RTT</p>
</li>
<li>
<p>用于处理序号超范围的情况，又称为防止序号绕回PAWS。</p>
</li>
</ul>
<p><strong>选择确认选项</strong></p>
<p><strong>填充</strong>：由于选项的长度可变，因此使用填充来确保报文段首部能被4整除
（因为数据偏移字段，也就是首部长度字段，是以4字节为单位的）。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-8</title>
      <link>https://blog.0pt.im/learn/1-5-8/</link>
      <pubDate>Mon, 07 Aug 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-8/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="tcp的运输连接管理">TCP的运输连接管理</h1>
<h3 id="tcp的连接建立">TCP的连接建立</h3>
<p>TCP是面向连接的协议，它基于运输连接来传送TCP报文段。</p>
<p>TCP运输连接的建立和释放是每一次面向连接的通信中必不可少的过程。</p>
<p>TCP运输连接有以下三个阶段:</p>
<ul>
<li>
<p>建立TCP连接</p>
</li>
<li>
<p>数据传送</p>
</li>
<li>
<p>释放TCP连接</p>
</li>
</ul>
<p>TCP的运输连接管理就是使运输连接的建立和释放都能正常地进行。</p>
<p>TCP的连接建立要解决以下三个问题:</p>
<ul>
<li>
<p>使TCP双方能够确知对方的存在;</p>
</li>
<li>
<p>使TCP双方能够协商一些参数（如最大窗口值、是否使用窗口扩大选项和时间戳选项以及服务质量等）；</p>
</li>
<li>
<p>使TCP双方能够对运输实体资源（如缓存大小、连接表中的项目等）进行分配。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-8/5-8-1.png" alt=""  />
</p>
<p><strong>TCP连接请求报文段</strong>首部中的同步位SYN被设置为1，表明这是一个TCP请求报文段。</p>
<p>序号字段seq被设置了一个初始值x，作为TCP客户进程方选择的初始序号。</p>
<p>请准意：TGP规定SYN被设置为1的报文段不能携带数据，但要消耗掉一个序号。</p>
<p><strong>针对TCP连接请求的确认报文段</strong>首部中的同步位SYN和确认位ACK都设置为1，表明这是一个TCP连接请求确认报文段。序号字段seq被设置了─个初始值y，作为TCP服务器进程诚选择的初始序号。确认号字段adk的值被设置成了x+1，这是对TP客户进程所选择的初始序号的确认。</p>
<p>请注意：这个报文段也不能携带数据，因为它是SYN被设置为1的报文段，但同样要消耗掉一个序号。</p>
<p>针对TCP连接请求的确认的确认报文段首部中的确认位ACK被设置为1，表明这是一个普通的TCP确认报文段。序号字段seq被设置为x+1，这是因为MGP客户进程发送的第一个TCP报文段的序号为X，并且不携带数据，因此第二个报文段的序号为x+1。</p>
<p>请注意:TCP规定普通的TCP确认报文段可以携带数据，但如果不携带数据，则不消耗序号。在这种情况下，所发送的下一个数据报文段的序号仍是x+1。</p>
<p>确认号字段ack被设置为y+1，这是对TCP服务器进程所选择的初始序号的确认。TCP服务器递程收到该确认报文段后也进入连接已建立状态。</p>
<p>为什么最后要发针对TCP连接请求的确认的确认报文段？</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-8/5-8-2.png" alt=""  />
</p>
<p>这是为了防止已失效的连接请求报文段突然又传送到了TCP服务器，因而导致错误。</p>
<p>例题：主机甲向主机乙发送一个(SYN=1,seq=11220)的TCP段，期望与主机乙建立TCP连接，若主机乙接受该连接请求，则主机乙向主机甲发送的正确的TCP段可能是</p>
<p>A.(SYN=0，ACK=0, seq=11221, ack=11221)    B.(SYN=1，ACK=1, seq=11220, ack=11220)</p>
<p>C.(SYN=1，ACK=1, seq=11221, ack=11221)    D.(SYN=0，ACK=0, seq=11220,ack=11220)</p>
<p>解析：见上文，选C。</p>
<h3 id="tcp的连接释放">TCP的连接释放</h3>
<p>TCP通过“四报文挥手”来释放连接</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-8/5-8-3.png" alt=""  />
</p>
<p>该报文段首部中的终止位FIN和确认位ACK的值都被设置为1，表明这是一个TCP接释放报文段，同时世对之前收到的报文段进行确认。序号seq字段的值设置为u，它等于TCP客户进程之前已传送过的、数据的最后一个字节的序号加1。</p>
<p>请注意：TCP规定终止位FN等于1的报文段即使不携带数据，也要消耗掉一个序号。</p>
<p>确认号ack字段的值设置为v，它等于TCP客户进程之前已收到的、数据的最局一个字节的序号加1。</p>
<p>TCP服务器进程收到TCP连接释放报文段后，会发送一个普通的TCP确认报文段养进入关闭等待状态。</p>
<p>该报文段首部中的确认位ACK的值被设置为1，表明这是一个普通的TCP确认报文段。序号seq字段的值设置为v，它等于TCP服务器进程之前已传送过的数据的最后一个字节的序号加1。确认号adk字段的值设置为u+1，这是对TCP连接释放报文段的确认。TCP服务器进程这时应通知高层应用进程：TCP客户进程要断开与自己的TCP连接。此时，从TGP客户进程到TCP服务器进程这个方向的连接就释放了。这时的TCP连接属于半关闭状态，也就是TCP客户进程已经没有数据要发送了。但如果TCP服务器进程仍有数据要发送，TCP客户进程仍要接收。</p>
<p>也就是说，从TCP服务器进程到TCP客户进程这个方向的连接并未关闭。</p>
<p>TCP客户进程收到TCP确认报文段后就入终止等待2状态。等待TCP服务器进程发出的TCP连接释放报文段。若使用TCP服务器进程的应用进程已经没有数据要发送了，应用进程就通知其TCP服务器进程释放连接。由于TCP连接释放是由TCP客户进程主动发起的，因此TCP服务器进程对TCP连接的释放称为被动关闭连接。</p>
<p>TCP服务器进程发送TCP连接释放报文段并进入最后确认状态。该报文段省部中的终止位FIN和确认位ACK的值都被设置为1，表明这是一个TCP连接释放报文段，同时也对之前收到的报文段进行确认。现在假定序号seq字段的值为w。这是因为在半关闭状态下 ，TCP服务器进程可能又发送了一些数据。确认号ack字段的值为u+1，这是对之前收到的TCP连接释放报文段的重复确认。TCP客户进程收到TCP连接释放报文段后，必须针对该报文段发送普通的TCP确认报文段，之后进入时间等待状态。该报文段首部中的确认位ACK的值被设置为1，表明这是一个普通的TCP确认报文段。序号seq字段的值设置为u+1，这是因为TCP客户进程之前的TCP连接释放报文段虽然不携带数据，但要消耗掉一个序号。确认号ack字段的值设置为w+1，这是对所接受到的TCP连接释放报文段的确认。TCP服务器进程收到该报文段后就进入关闭状态。而TCP客户进程还要经过2MSL后才能进入关闭状态。</p>
<p>MSL(Maximum Segment Lifetime)意思是最长报文段寿命，RFC793建议为2分种。</p>
<p>为什么不直接进入关闭状态而是还要等待2MSL？</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-8/5-8-4.png" alt=""  />
</p>
<p>TCP服务器进程每收到一次TCP客户进程的数据，就重新设置并启动<strong>保活计时器</strong>（2小时定时）。</p>
<p>若保活计时器定时周期内未收到TCP客户进程发来的数据，则<strong>当保活计时器到时后，TCP服务器进程就向TCP客户进程发送一个探测报文段</strong>，以后则每隔75秒钟发送一次。若一连发送10个探测报文段后仍无TCP客户进程的响应，TCP服务器进程就认为TCP客户进程所在主机出了故障接着就关闭这个连接。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-7</title>
      <link>https://blog.0pt.im/learn/1-5-7/</link>
      <pubDate>Sun, 06 Aug 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-7/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="tcp可靠传输的实现">TCP可靠传输的实现</h1>
<p>TCP基于<strong>以字节为单位的滑动窗口</strong>来实现可靠传输</p>
<p>虽然发送方的发送窗口是根据接收方的接收窗口设置的，但在同一时刻，发送方的<strong>发送窗口并不总是和接收方的接收窗口</strong>一样大。</p>
<ul>
<li>
<p>网络传送窗口值需要经历一定的时间滞后，并且这个时间还是不确定的。</p>
</li>
<li>
<p>发送方还可能根据网络当时的拥塞情况适当减小自己的发送窗口尺寸。</p>
</li>
</ul>
<p>对于<strong>不按序到达的数据应如何处理</strong>，TCP并无明确规定。</p>
<ul>
<li>
<p>如果接收方把不按序到达的数据一律丢弃，那么接收窗口的管理将会比较简单，但这样做对网络资源的利用不利,因为发送方会重复传送较多的数据。</p>
</li>
<li>
<p>TCP通常对不按序到达的数据是先临时存放在接收窗口中，等到字节流中所缺少的字节收到后，再<strong>按序交付上层的应用进程</strong>。</p>
</li>
</ul>
<p>TCP要求接收方必须有<strong>累积确认和捎带确认机制</strong>，这样可以减小传输开销。接收方可以在合适的时候发送确认，也可以在自己有数据要发送时把确认信息顺便捎带上。</p>
<ul>
<li>
<p>接收方不应过分推迟发送确认，否则会导致发送方不必要的超时重传，这反而浪费了网络的资源。</p>
</li>
<li>
<p>TCP标准规定，确认推迟的时间不应超过0.5秒。若收到一连串具有最大长度的报文段，则必须每隔-个报文段就发送一个确认[RFC 1122]。</p>
</li>
<li>
<p>捎带确认实际上并不经常发生，因为大多数应用程序很少同时在两个方向上发送数据。</p>
</li>
</ul>
<p><strong>TCP的通信是全双工通信</strong>。通信中的每一方都在发送和接收报文段。因此，每一方都有自己的发送窗口和接收窗口。在谈到这些窗口时，一定要弄清楚是哪一方的窗口。</p>
<p>例题：主机甲与主机乙之间已建立一个TCP连接，主机甲向主机乙发送了两个连续的TCP段，分别包含300字节和500字节的有效载荷，第一个段的序号为200，主机乙正确接收到两个段后，发送给主机甲的确认序号是</p>
<p>A.500    B.700    C.800    D.1000</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-7/5-7-1.png" alt=""  />
</p>
<p>选D</p>
<p>例题：主机甲与主机乙之间已建立一个TCP连接，主机甲向主机乙发送了3个连续的TCP段，分别包含300字节、400字节和500字节的有效载荷，第3个段的序号为900。若主机乙仅正确接收到第1个和第3个段，则主机乙发送给主机甲的确认序号是</p>
<p>A.300    B.500    C.1200    D.1400</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-7/5-7-2.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-6</title>
      <link>https://blog.0pt.im/learn/1-5-6/</link>
      <pubDate>Sat, 05 Aug 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-6/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="tcp超时重传时间的选择">TCP超时重传时间的选择</h1>
<p>超时重传时间的选择是TCP最复杂的问题之一</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-6/5-6-1.png" alt=""  />
</p>
<p><strong>不能直接使用某次测量得到的RTT样本来计算超时重传时间RTO</strong>。</p>
<p>利用每次测量得到的RTT样本，计算加权平均<strong>往返时间RTTs</strong>（又称为平滑的往返时间）。</p>
<p>RTTs = RTT1</p>
<p><strong>新的RTTs = (l - α) ×旧的RTTs+α ×新的RTT样本</strong></p>
<p>在上式中,0 ≤a &lt;1 :</p>
<p>若α很接近于0，则新RTT样本对RTTs的影响不大;</p>
<p>若α很接近于1，则新RTT样本对RTTs的影响较大;</p>
<p>已成为建议标准的RFC6298推荐的α值为1/8，即0.125。</p>
<p>用这种方法得出的加权平均往返时间RTTs就比测量出的RTT值更加平滑。</p>
<p>显然，<strong>超时重传时间RTO应略大于加权平均往返时间RTTs</strong>。</p>
<p>RFC6298建议使用下式计算超时重传时间RTO:</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-6/5-6-2.png" alt=""  />
</p>
<p>往返时间RTT的测量比较复杂</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-6/5-6-3.png" alt=""  />
</p>
<p>源主机若误将确认当作是对原报文段的确认:</p>
<p>所计算出的RTTs和RTO就会偏大，降低了传输效率;</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-6/5-6-4.png" alt=""  />
</p>
<p>源主机若误将确认当作是对重传报文段的确认：</p>
<p>所计算出的RTTs和RTO就会偏小，导致报文段没必要的重传，增大网络负荷;</p>
<p>针对<strong>出现超时重传时无法测准往返时间RTT</strong>的问题，<strong>Karn</strong>提出了一个<strong>算法</strong>:<strong>在计算加权平均往返时间RTTs时</strong>，<strong>只要报文段重传了，就不采用其往返时间RTT样本</strong>。也就是出现重传时，不重新计算RTTs，进而超时重传时间RTO也不会重新计算。</p>
<p>这又引起了新的问题。设想出现这样的情况:报文段的时延突然增大了很多，并且之后很长一段时间都会保持这种时延。因此在原来得出的重传时间内，不会收到确认报文段。于是就重传报文段。但根据Karn算法，不考虑重传的报文段的往返时间样本。这样，超时重传时间就无法更新。这会导致报文段反复被重传。</p>
<p>因此，要对<strong>Karn算法进行修正</strong>。方法是：<strong>报文段每重传一次，就把超时重传时间RTO增大一些</strong>。典型的做法是将新RTO的值取为旧RTO值的2倍。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-6/5-6-5.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-5</title>
      <link>https://blog.0pt.im/learn/1-5-5/</link>
      <pubDate>Fri, 04 Aug 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-5/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="tcp的拥塞控制">TCP的拥塞控制</h1>
<p>在某段时间，若<strong>对网络中某一资源的需求超过了该资源所能提供的可用部分</strong>，网络性能就要变坏，这种情况就叫做拥塞(congestion)。</p>
<p>在计算机网络中的链路容量（即带宽）、交换结点中的缓存和处理机等，都是网络的资源。若<strong>出现拥塞而不进行控制</strong>，整个网络的<strong>吞吐量将随输入负荷的增大而下降</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-5/5-5-1.png" alt=""  />
</p>
<ul>
<li>
<p>慢开始(slow-start)</p>
</li>
<li>
<p>拥塞避免(congestion avoidance)</p>
</li>
<li>
<p>快重传(fast retransmit)</p>
</li>
<li>
<p>快恢复(fast recovery)</p>
</li>
</ul>
<p>下面介绍这四种拥塞控制算法的基本原理，假定如下条件:</p>
<ul>
<li>
<p>数据是单方向传送，而另一个方向只传送确认。</p>
</li>
<li>
<p>接收方总是有足够大的缓存空间，因而发送方发送窗口的大小由网络的拥塞程度来决定。</p>
</li>
<li>
<p>以最大报文段MSS的个数为讨论问题的单位，而不是以字节为单位。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-5/5-5-2.png" alt=""  />
</p>
<p>发送方维护一个叫做<strong>拥塞窗口cwnd</strong>的状态变量，其值<strong>取决于网络的拥塞程度</strong>，并且<strong>动态变化</strong>。</p>
<ul>
<li>
<p>拥塞窗口<strong>cwnd的维护原则</strong>:只要网络<strong>没有出现拥塞</strong>，<strong>拥塞窗口</strong>就再<strong>增大</strong>一些;但只要网络<strong>出现拥塞</strong>，<strong>拥塞窗口就减少</strong>一些。</p>
</li>
<li>
<p>判断出现<strong>网络拥塞的依据</strong>:没有按时收到应当到达的确认报文（即<strong>发生超时重传</strong>）。</p>
</li>
</ul>
<p>发送方将拥塞窗口作为<strong>发送窗口swnd</strong>，即<strong>swnd = cwnd</strong>。</p>
<p>维护一个慢开始门限<strong>ssthresh</strong>状态变量:</p>
<ul>
<li>
<p>当cwnd &lt; ssthresh时，使用慢开始算法;</p>
</li>
<li>
<p>当cwnd &gt; ssthresh时，停止使用慢开始算法而改用拥塞避免算法;</p>
</li>
<li>
<p>当cwnd = ssthresh时，既可使用慢开始算法，也可使用拥塞避免算法。</p>
</li>
</ul>
<p>设初始时cwnd = 1，ssthresh = 16</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-5/5-5-3.png" alt=""  />
</p>
<p>“慢开始”是指一开始向网络注入的报文段少，并不是指拥塞窗口cwnd增长速度慢;</p>
<p>“拥塞避免”并非指完全能够避免拥塞，而是指在拥塞避免阶段将拥塞窗口控制为按线性规律增长，使网络比较不容易出现拥塞;</p>
<p>慢开始和拥塞避免算法是1988年提出的TCP拥塞控制算法(TCP Tahoe版本)。</p>
<p>1990年又增加了两个新的拥塞控制算法（<strong>改进TCP的性能</strong>），这就是快重传和快恢复（TCP Reno版本)。有时，<strong>个别报文段</strong>会在网络中<strong>丢失</strong>，但实际上网络<strong>并未发生拥塞</strong>。</p>
<ul>
<li>
<p>这将导致<strong>发送方</strong>超时重传，并<strong>误认为</strong>网络发生了<strong>拥塞</strong>;</p>
</li>
<li>
<p><strong>发送方把拥塞窗口cwnd又设置为最小值1</strong>，并错误地启动慢开始算法，因而<strong>降低了传输效率</strong>。</p>
</li>
</ul>
<p>采用快重传算法可以<strong>让发送方尽早知道发生了个别报文段的丢失</strong>。</p>
<p>所谓快重传，就是使发送方<strong>尽快进行重传</strong>，而<strong>不是等超时重传计时器超时</strong>再重传。</p>
<ul>
<li>
<p>要求接收方不要等待自己发送数据时才进行捎带确认，而是要<strong>立即发送确认</strong>;</p>
</li>
<li>
<p>即使收到了失序的报文段也要立即发出对已收到的报文段的<strong>重复确认</strong>。</p>
</li>
<li>
<p>发送方一旦收到<strong>3个连续的重复确认</strong>，就将相应的报文段<strong>立即重传</strong>，而不是等该报文段的超时重传计时器超时再重传。</p>
</li>
<li>
<p>对于个别丢失的报文段，发送方不会出现超时重传，也就不会误认为出现了拥塞（进而降低拥塞窗口cwnd为1)。使用快重传可以使整个网络的吞吐量提高约20%。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-5/5-5-4.png" alt=""  />
</p>
<p><strong>发送方一旦收到3个重复确认</strong>，就知道现在只是丢失了个别的报文段。于是不启动慢开始算法，<strong>而执行快恢复算法</strong>;</p>
<p>也有的快恢复实现是把快恢复开始时的拥塞窗口cwnd值再增大一些</p>
<p>即等于新的ssthresh + 3。</p>
<ul>
<li>
<p>既然发送方收到3个重复的确认，就表明有3个数据报文段已经离开了网络;</p>
</li>
<li>
<p>这3个报文段不再消耗网络资源而是停留在接收方的接收缓存中;</p>
</li>
<li>
<p>可见现在网络中不是堆积了报文段而是减少了3个报文段。因此可以适当把拥塞窗口扩大些</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-5/5-5-5.png" alt=""  />
</p>
<p>例题：一个TCP连接总是以1KB的最大段长发送TCP段，发送方有足够多的数据要发送。当拥塞窗口为16KB时发生了超时，如果接下来的4个RTT（往返时间)内的TCP段的传输都是成功的，那么当第4个RTT时间内发送的所有TCP段都得到肯定应答时，拥塞窗口大小是</p>
<p>A.7KB        B.8KB        C.9KB        D.16KB</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-5/5-5-6.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-4</title>
      <link>https://blog.0pt.im/learn/1-5-4/</link>
      <pubDate>Thu, 03 Aug 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-4/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="tcp的流量控制">TCP的流量控制</h1>
<p>一般来说，我们总是希望数据传输得更快一些。</p>
<p>但如果发送方把数据发送得过快，接收方就可能来不及接收，这就会造成数据的丢失。</p>
<p>所谓流量控制(flow control)就是<strong>让发送方的发送速率不要太快</strong>，<strong>要让接收方来得及接收</strong>。</p>
<p>利用<strong>滑动窗口</strong>机制可以很方便地在TCP连接上实现对发送方的流量控制。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-4/5-4-1.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-4/5-4-2.png" alt=""  />
</p>
<blockquote>
<p>ACK是TCP报文段首部的标志位，取值1表示这是一个TCP确认报文段。小写adk是TCP报文段首部中的确认号字段，取值201表示序号201之前的数据已全蔷R确接收，现在希望收到序号201及赏后续数据。rwnd是TCP报文段首部中的窗口字段，取值300表示自己的接收窗口大小为300。</p>
</blockquote>
<p>如果零窗口探测报文丢失，怎么办？</p>
<p>零窗口探测报文段也有重传计时器。没事。</p>
<p>例题：主机甲和主机乙之间建立了一个TCP连接，TCP最大段长度为1000字节。若主机甲的当前拥塞窗口为4000字节在主机甲向主机乙连续发送两个最大段后，成功收到主机乙发送的第一个段的确认段，确认段中通告的接收窗口大小为2000字节，则此时主机甲还可以向主机乙发送的最大字节数是</p>
<p>A.1000    B.2000    C.3000    D.4000</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-4/5-4-3.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-3</title>
      <link>https://blog.0pt.im/learn/1-5-3/</link>
      <pubDate>Wed, 02 Aug 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-3/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="udp和tcp的对比">UDP和TCP的对比</h1>
<p>UDP和TCP是TCP/IP体系结构运输层中的两个重要协议</p>
<h3 id="用户数据报协议udpuser-datagram-protocol">用户数据报协议UDP(User Datagram Protocol)</h3>
<p>1.无连接的UDP</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-1.png" alt=""  />
</p>
<p>2.UDP支持单播、多播以及广播</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-3.png" alt=""  />
</p>
<p>3.UDP是面向应用报文的</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-5.png" alt=""  />
</p>
<p>4.UDP向上层提供无连接不可靠传输服务（适用于IP电话、视频会议等实时应用）</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-9.png" alt=""  />
</p>
<p>5.UDP用户数据包首部仅8字节</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-10.png" alt=""  />
 </p>
<h3 id="传输控制协议tcptransmission-control-protocol">传输控制协议TCP(Transmission Control Protocol)</h3>
<p>1.面向连接的TCP</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-2.png" alt=""  />
</p>
<p>2.TCP仅支持单播</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-4.png" alt=""  />
</p>
<p>3.TCP是面向字节流的</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-6.png" alt=""  />
</p>
<blockquote>
<p>TCP并不知道数据报的含义，只是将其视为字节流，加载到发送缓存中发送。接收方的TCP也不知道数据报的含义，只是交付给应用进程，接收方的应用进程必须有能力识别接收到的字节流。</p>
</blockquote>
<p>4.TCP向上层提供面向连接的可靠传输服务（适用于要求可靠传输的应用，例如文件传输）</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-8.png" alt=""  />
</p>
<p>5.TCP报文段首部最小20字节，最大60字节</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-3/5-3-11.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-2</title>
      <link>https://blog.0pt.im/learn/1-5-2/</link>
      <pubDate>Tue, 01 Aug 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-2/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="运输层端口号复用与分用的概念">运输层端口号、复用与分用的概念</h1>
<p>运行在计算机上的进程使用<strong>进程标识符PID</strong>来标志。</p>
<p>因特网上的计算机并不是使用统一的操作系统，不同的操作系统(windows，Linux，Mac os)又使用<strong>不同格式的进程标识符</strong>。</p>
<p>为了使运行不同操作系统的计算机的应用进程之间能够进行网络通信，就必须<strong>使用统一的方法对TCP/IP体系的应用进程进行标识</strong>。</p>
<p>TCP/IP体系的运输层使用<strong>端口号</strong>来区分应用层的不同应用进程。</p>
<p>端口号使用<strong>16比特表示</strong>，取值范围<strong>0~65535</strong>;</p>
<ul>
<li>
<p>熟知端口号:0~1023，IANA把这些端口号指派给了TCP/IP体系中最重要的一些应用协议，例如:FTP使用21/20，HTTP使用80，DNS使用53。</p>
</li>
<li>
<p>登记端口号:1024~49151，为没有熟知端口号的应用程序使用。使用这类端口号必须在IANA按照规定的手续登记，以防止重复。例如:Microsoft RDP微软远程桌面使用的端口是3389。</p>
</li>
<li>
<p>短暂端口号:49152~65535，留给客户进程选择暂时使用。当服务器进程收到客户进程的报文时，就知道了客户进程所使用的动态端口号。通信结束后，这个端口号可供其他客户进程以后使用。</p>
</li>
</ul>
<p><strong>端口号只具有本地意义</strong>，即端口号只是为了<strong>标识本计算机应用层中的各进程</strong>，在因特网中，<strong>不同计算机中的相同端口号是没有联系的</strong>。</p>
<p>发送方的复用和接收方的分用</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-2/5-2-1.png" alt=""  />
</p>
<p>TCP/IP体系的应用层常用协议所使用的运输层熟知端口号</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-2/5-2-2.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络5-1</title>
      <link>https://blog.0pt.im/learn/1-5-1/</link>
      <pubDate>Mon, 31 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-5-1/</guid>
      <description>五.运输层</description>
      <content:encoded><![CDATA[<h1 id="运输层概述">运输层概述</h1>
<p>之前课程所介绍的计算机网络体系结构中的<strong>物理层</strong>、<strong>数据链路层</strong>以及<strong>网络层</strong>它们共同解决了将主机通过异构网络互联起来所面临的问题，<strong>实现了主机到主机的通信</strong>。</p>
<p>但实际上在计算机网络中进行<strong>通信的真正实体是位于通信两端主机中的进程</strong>(AP)。</p>
<p><strong>如何为运行在不同主机上的应用进程提供直接的通信服务是运输层的任务</strong>，运输层协议又称为端到端协议。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-1/5-1-1.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/5-1/5-1-2.png" alt=""  />
</p>
<p>运输层向高层用户屏蔽了下面网络核心的细节(如网络拓扑、所采用的路由选择协议等)，它使应用进程看见的就<strong>好像是在两个运输层实体之间有一条端到端的逻辑通信信道</strong>。</p>
<p>根据应用需求的不同，<strong>因特网的运输层</strong>为应用层提供了两种不同的运输协议，即<strong>面向连接的TCP</strong>和<strong>无连接的UDP</strong>，这两种协议就是本章要讨论的主要内容。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-9</title>
      <link>https://blog.0pt.im/learn/1-4-9/</link>
      <pubDate>Sun, 30 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-9/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="虚拟专用网vpn与网络地址转换nat">虚拟专用网VPN与网络地址转换NAT</h1>
<h3 id="虚拟专用网vpnvirtual-private-network">虚拟专用网VPN(Virtual Private Network)</h3>
<p><strong>利用公用的因特网</strong>作为本机构各专用网之间的通信载体，这样的专用网又称为虚拟专用网。由于IPv4地址的紧缺，一个机构能够申请到的IPv4地址数量往往远小于本机构所拥有的主机数量。因此，<strong>虚拟专用网中的各主机所分配的地址应该是本机构可自由分配的专用地址</strong>，而不是需要申请的、在因特网上使用的公有地址。</p>
<p>专用(私有)地址:
10.0.0.0~10.255.255.255(10/8地址块)
172.16.0.0~172.31.255.255(172.16/12地址块)</p>
<p>192.168.0.0~192.168.255.255(192.168/16地址块)</p>
<blockquote>
<p>私有地址只能用于机构内部通信，而不能用于和因特网上的主机通信。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-9/4-9-1.png" alt=""  />
</p>
<p>从逻辑上看，R1和R2好像是一条直通的点对点链路。因此也被称为IP隧道技术</p>
<p>同一机构内不同部门的内部网络所构成的虚拟专用网VPN又称为<strong>内联网VPN</strong>
有时一个机构的VPN需要有某些外部机构（通常就是合作伙伴）参加进来。这样的VPN就称为<strong>外联网VPN</strong>，在外地工作的员工需要访问公司内部的专用网络时，只要在任何地点接入到因特网，运行驻留在员工PC中的VPN软件，在员工的PC和公司的主机之间建立VPN隧道，即可访问专用网络中的资源。这种VPN称为<strong>远程接入VPN</strong>。</p>
<p>网络地址转换NAT(Network Address Translation)</p>
<p>虽然因特网采用了无分类编址方式来减缓IPv4地址空间耗尽的速度，但由于因特网用户数目的激增，特别是大量小型办公室网络和家庭网络接入因特网的需求不断增加，IPv4地址空间即将面临耗尽的危险仍然没有被解除。</p>
<p>1994年提出了一种网络地址转换NAT的方法再次<strong>缓解了IPv4地址空间即将耗尽的问题</strong>。</p>
<p>NAT能使大量<strong>使用内部专用地址的专用网络用户共享少量外部全球地址来访问因特网上的主机和资源</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-9/4-9-2.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-9/4-9-3.png" alt=""  />
</p>
<p>该转换方法存在一个问题:如果NAT路由器具有N个全球IP地址，那么至多只能有N个内网主机能够同时和因特网上的主机通信。</p>
<p>由于绝大多数的网络应用都是使用运输层协议TCP或UDP来传送数据，因此可以利用运输层的端口号和IP地址一起进行转换。这样，<strong>用一个全球IP地址就可以使多个拥有本地地址的主机同时和因特网上的主机进行通信</strong>。这种将端口号和IP地址一起进行转换的技术叫作<strong>网络地址与端口号转换NAPT</strong>(Network Address and Port Translation)。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-9/4-9-4.png" alt=""  />
</p>
<p>外网主机不能首先对内网中的主机发起通信，因为NAPT转换表里找不到相应记录。</p>
<p>内网主机不能直接充当因特网服务器。</p>
<p>对于一些P2P网络应用，需要外网主机主动与内网主机进行通信，在通过NAT时会遇到问题,需要网络应用自己使用一些特殊的NAT穿越技术来解决问题。</p>
<p>另外，由于NAT对外网屏蔽了内网主机的网络地址，能为内网的主机提供一定的安全保护。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-8</title>
      <link>https://blog.0pt.im/learn/1-4-8/</link>
      <pubDate>Sat, 29 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-8/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="网际控制报文协议icmp">网际控制报文协议ICMP</h1>
<p>为了更有效地转发lP数据报和提高交付成功的机会，在网际层使用了网际控制报文协议ICMP(Internet Control Message Protocol)。</p>
<p>主机或路由器使用ICMP来发送差错<strong>报告报文</strong>和<strong>询问报文</strong>。</p>
<p><strong>ICMP报文被封装在IP数据报</strong>中发送。</p>
<p>ICMP差错报告报文共有以下五种:</p>
<ol>
<li>
<p>终点不可达</p>
</li>
<li>
<p>源点抑制</p>
</li>
<li>
<p>时间超过</p>
</li>
<li>
<p>参数问题</p>
</li>
<li>
<p>改变路由(重定向)</p>
</li>
</ol>
<p>1.终点不可达</p>
<p>当路由器或主机不能交付数据报时，就向源点发送终点不可达报文。</p>
<p>具体可再根据ICMP的代码字段细分为目的网络不可达目的主机不可达、目的协议不可达、目的端口不可达、目的网络未知、目的主机未知等13种错误。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-8/4-8-2.png" alt=""  />
</p>
<p>2.源点抑制</p>
<p>当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-8/4-8-3.png" alt=""  />
</p>
<p>3.时间超过</p>
<p>当路由器收到一个目的IP地址不是自己的IP数据报，会将其生存时间TTL字段的值减1。
若结果不为0，则将该IP数据报转发出去;若结果为O，除丢弃该IP数据报外，还要向源点发送时间超过报文。
另外，当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，也会向源点发送时间超过报文。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-8/4-8-4.png" alt=""  />
</p>
<p>4.参数问题</p>
<p>当路由器或目的主机收到IP数据报后，根据其首部中的检验和字段发现首部在传输过程中出现了误码就丢弃该数据报，并向源点发送参数问题报文。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-8/4-8-5.png" alt=""  />
</p>
<p>5.改变路由（重定向）</p>
<p>路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器（可通过更好的路由)。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-8/4-8-6.png" alt=""  />
</p>
<p>以下情况不应发送ICMP差错报告报文:</p>
<ul>
<li>
<p>对ICMP差错报告报文不再发送ICMP差错报告报文</p>
</li>
<li>
<p>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文</p>
</li>
<li>
<p>对具有多播地址的数报都不发送ICMP差错报告报文</p>
</li>
<li>
<p>对具有特殊地址(如127.0.0.0或0.0.0.0)的数据报不发送ICMP差错报告报文</p>
</li>
</ul>
<p>常用的ICMP询问报文有以下两种:</p>
<ul>
<li>
<p><strong>回送请求和回答</strong>    ICMP回送请求报文是由主机或路由器向一个特定的目的主机发出的询问。收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。这种询问报文用来<strong>测试目的站是否可达</strong>及了解其有关状态。</p>
</li>
<li>
<p><strong>时间戳请求和回答</strong>     ICMP时间戳请求报文是请某个主机或路由器回答当前的日期和时间。在ICMP时间戳回答报文中有一个32位的字段，其中写入的整数代表从1900年1月1日起到当前时刻一共有多少秒。这种询问报文用来<strong>进行时钟同步和测量时间</strong>。</p>
</li>
</ul>
<p>ICMP应用举例</p>
<p>1.分组网间探测PING(Packet InterNet Groper)</p>
<ul>
<li>
<p>用来测试主机或路由器间的连通性</p>
</li>
<li>
<p>应用层直接使用网际层的ICMP(没有通过运输层的TCP或UDP)</p>
</li>
<li>
<p>使用ICMP回送请求和回答报文</p>
</li>
</ul>
<blockquote>
<p>就是ping</p>
</blockquote>
<p>2.跟踪路由traceroute</p>
<ul>
<li>
<p>用来测试IP数据报从源主机到达目的主机要经过哪些路由器</p>
</li>
<li>
<p>Windows版本    tracert命令    应用层直接使用网际层ICMP    使用了ICMP回送请求和回答报文以及差错报告报文</p>
</li>
<li>
<p>Unix版本    traceroute命令    在运输层使用UDP协议    仅使用ICMP差错报告报文</p>
</li>
</ul>
<p>跟踪路由traceroute原理</p>
<p>主机依次发送TTL=1、2、3、4&hellip;的回送请求报文（1个1个发，当接收到ICMP差错报告后再发下一个）</p>
<p>经过路由依次丢弃IP数据报并给源主机发送ICMP差错报告（时间超过)</p>
<p>当到达目的主机时，目的主机向源主机发送ICMP回送请求的回答报文，源主机就知道到达终点，停止发送回送请求报文。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-7</title>
      <link>https://blog.0pt.im/learn/1-4-7/</link>
      <pubDate>Fri, 28 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-7/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="ipv4数据报的首部格式">IPv4数据报的首部格式</h1>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-7/4-7-1.png" alt=""  />
</p>
<p>首部长度</p>
<p>占4比特，表示IP数据报首部的长度。该字段的取值以4字节为单位。</p>
<p>最小十进制取值为5，表示IP数据报首部只有20字节固定部分;</p>
<p>最大十进制取值为15，表示IP数据报首部包含20字节固定部分和最大40字节可变部分;
可选字段</p>
<ul>
<li>
<p>长度从1个字节到40个字节不等。用来支持排错、测量及安全等措施。</p>
</li>
<li>
<p>可选字段增加了IP数据报的功能，但这同时也使得IP数据报的首部长度成为可变的。这就增加了每一个路由器处理IP数据报的开销。实际上可选字段很少被使用。</p>
</li>
</ul>
<p>填充字段</p>
<ul>
<li>确保首部长度为4字节的整数倍。使用全0进行填充。</li>
</ul>
<p>区分服务</p>
<ul>
<li>
<p>占8比特，用来获得更好的服务。</p>
</li>
<li>
<p>该字段在旧标准中叫作服务类型，但实际上一直没有被使用过。1998年，因特网工程任务组IETF把这个字段改名为区分服务。利用该字段的不同数值可提供不同等级的服务质量。</p>
</li>
<li>
<p>只有在使用区分服务时，该字段才起作用。一般情况下都不使用该字段。</p>
</li>
</ul>
<p>总长度</p>
<ul>
<li>
<p>占16比特，表示IP数据报的总长度（首部+数据载荷)。</p>
</li>
<li>
<p>最大取值为十进制的65535，以字节为单位。</p>
</li>
</ul>
<p>举例：（）为二进制   首部长度=(0101) x 4 = 5 x 4 = 20(字节)</p>
<p>总长度=(0000001111111100) = 1020(字节)</p>
<p>数据载荷长度=总长度-首部长度=1020 - 20 = 1000(字节)</p>
<p>标识</p>
<ul>
<li>
<p>占16比特，属于同一个数据报的各分片数据报应该具有相同的标识。</p>
</li>
<li>
<p>IP软件维持一个计数器，每产生一个数据报，计数器值加1，并将此值赋给标识字段。</p>
</li>
</ul>
<p>标志</p>
<p>占3比特，各比特含义如下:</p>
<ul>
<li>
<p>DF位:1表示不允许分片;0表示允许分片</p>
</li>
<li>
<p>MF位:1表示“后面还有分片”;0表示“这是最后一个分片”</p>
</li>
<li>
<p>保留位:必须为0</p>
</li>
</ul>
<p>片偏移</p>
<ul>
<li>
<p>占13比特，指出分片数据报的数据载荷部分偏移其在原数据报的位置有多少个单位。</p>
</li>
<li>
<p>片偏移以8个字节为单位。</p>
</li>
</ul>
<p>举例：对IPv4数据报进行分片</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-7/4-7-2.png" alt=""  />
</p>
<blockquote>
<p>片偏移除8是因为片偏移是以字节做单位。</p>
</blockquote>
<p>生存时间TTL</p>
<ul>
<li>
<p>占8比特，最初以秒为单位，最大生存周期为255秒;路由器转发IP数据报时，将IP数据报首部中的该字段的值减去IP数据报在本路由器上所耗费的时间，若不为0就转发，否则就丢弃。</p>
</li>
<li>
<p>现在以“跳数”为单位，路由器转发IP数据报时，将IP数据报首部中的该字段的值减1，若不为0就转发，否则就丢弃。</p>
</li>
<li>
<p>防止IP数据报在网络中永久兜圈。（前面有提到）</p>
</li>
</ul>
<p>协议</p>
<ul>
<li>占8比特，指明IPv4数据报的数据部分是何种协议数据单元。常用的一些协议和相应的协议字段值如下。</li>
</ul>
<table>
<thead>
<tr>
<th>协议名称</th>
<th>ICMP</th>
<th>IGMP</th>
<th>TCP</th>
<th>UDP</th>
<th>lPv6</th>
<th>OSPF</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>协议字段值</strong></td>
<td>1</td>
<td>2</td>
<td>6</td>
<td>17</td>
<td>41</td>
<td>89</td>
</tr>
</tbody>
</table>
<p>首部检验和</p>
<ul>
<li>
<p>占16比特，用来检测首部在传输过程中是否出现差错。比CRC检验码简单，称为因特网检验和.</p>
</li>
<li>
<p>IP数据报每经过一个路由器，路由器都要重新计算首部检验和，因为某些字段（生存时间、标志、片偏移等)的取值可能发生变化。</p>
</li>
<li>
<p>由于IP层本身并不提供可靠传输的服务，并且计算首部校验和是一项耗时的操作，因此在IPv6中,路由器不再计算首部校验和，从而更快转发IP数据报。</p>
</li>
</ul>
<p>源lP地址和目的IP地址</p>
<ul>
<li>各占32比特，用来填写发送该IP数据报的源主机的IP地址和接收该IP数据报的目的主机的IP地址。</li>
</ul>
<p>例题：某公司网络下图所示。IP地址空间192.168.1.0/24被均分给销售部和技术部两个子网，并已分别为部分主机和路由器接口分配了IP地址，销售部子网的MTU=1500B，技术部子网的MTU=800 B.</p>
<p>(2）假设主机192.168.1.1向主机192.168.1.208发送一个总长度为150OB的IP分组，IP分组的头部长度为20B，路由器在通过接口F1转发该IP分组时进行了分片。若分片时尽可能分为最大片，则一个最大IP分片封装数据的字节数是多少?至少需要分为几个分片?每个分片的片偏移量是多少?</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-7/4-7-3.png" alt=""  />
</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-7/4-7-4.png" alt=""  />
</p>
<p><strong>这么分是错的</strong>，因为片偏移量必须为整数。</p>
<p>应该取小于780且能被8整除的数，为776。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-7/4-7-5.png" alt=""  />
</p>
<p>例题：题47-a图是网络拓扑，题47-b图是主机进行Web请求的1个以太网数据帧前80个字节的十六进制及ASCII码内容。(1) Web服务器的IP地址是什么?该主机的默认网关的MAC地址是什么?
(4)该帧所封装的IP分组经过路由器R转发时，需修改IP分组头中的哪些字段。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-7/4-7-6.png" alt=""  />
</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-7/4-7-7.png" alt=""  />
</p>
<p>同理，该主机的默认网关的MAC地址是前6给字节，也就是00-21-27-21-51-ee</p>
<p>IP分组经过路由器R时,生存时间字段被减1;</p>
<p>首部检验和会被重新计算;</p>
<p>若IP分组总长度大于MTU，则需要进行分片,此时总长度字段、标志字段片偏移字段都需要修改。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-6</title>
      <link>https://blog.0pt.im/learn/1-4-6/</link>
      <pubDate>Thu, 27 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-6/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="路由选择协议概述">路由选择协议概述</h1>
<p>静态路由选择</p>
<ul>
<li>
<p>由<strong>人工配置</strong>的网络路由、默认路由、特定主机路由、黑洞路由等都属于静态路由。</p>
</li>
<li>
<p>这种人工配置方式简单、开销小。</p>
</li>
<li>
<p>但不能及时适应网络状态(流量、拓扑等)的变化。</p>
</li>
<li>
<p>一般只在小规模网络中采用。</p>
</li>
</ul>
<p>动态路由选择</p>
<ul>
<li>
<p>路由器通过路由选择协议<strong>自动获取路由信息</strong>。</p>
</li>
<li>
<p>比较复杂、开销比较大。</p>
</li>
<li>
<p><strong>能较好地适应网络状态的变化</strong>。</p>
</li>
<li>
<p>适用于<strong>大规模网络</strong>。</p>
</li>
</ul>
<p>因特网所采用的路由选择协议的主要特点</p>
<ul>
<li>
<p>自适应：动态路由选择，能较好地适应网络状态的变化</p>
</li>
<li>
<p>分布式：路由器之间交换路由信息</p>
</li>
<li>
<p>分层次：将整个因特网划分为许多较小的自治系统AS(Autonomous System)</p>
</li>
</ul>
<p>因特网采用<strong>分层次</strong>的路由选择协议</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-1.png" alt=""  />
</p>
<p>域间路由选择采用外部网关协议EGP</p>
<p>域内路由选择采用内部网关协议IGP</p>
<blockquote>
<p>只是路由选择协议的分类名称，不是具体的路由选择协议。网关一词是因为在早期</p>
</blockquote>
<p>常见的路由选择协议</p>
<p>路由选择协议</p>
<p>内部网关协议IGP</p>
<ul>
<li>
<p>路由信息协议RIP    基于距离向量，RIP在因特网上最早使用</p>
</li>
<li>
<p>内部网关路由协议IGRP    基于距离向量，是思科早期私有的协议，现在已被EIGRP取代</p>
</li>
<li>
<p>增强型内部网关路由协议EIGRP    思科私有的，用来取代IGRP的混合型路由协议(结合距离向量和链路状态)</p>
</li>
<li>
<p>开放式最短路径优先OSPF    基于链路状态，在各种网络中广泛使用</p>
</li>
<li>
<p>中间系统到中间系统IS-IS    基于链路状态，是ISP骨干网上最长常用的IGP协议</p>
</li>
</ul>
<p>外部网关协议EGP</p>
<ul>
<li>边界网关协议BGP</li>
</ul>
<p>路由器的基本结构</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-2.png" alt=""  />
</p>
<p>路由表一般仅包含从目的网络到下一跳的映射</p>
<p>路由表需要对网络拓扑变化的计算最优化</p>
<p>转发表是从路由表得出的
转发表的结构应当使查找过程最优化</p>
<blockquote>
<p>为方便理解，不严格区分路由表和转发表。</p>
</blockquote>
<h3 id="路由信息协议rip的基本工作原理">路由信息协议RIP的基本工作原理</h3>
<p><strong>路由信息协议RIP</strong>(Routing Information Protocol)是内部网关协议IGP中最先得到广泛使用的协议之一，其相关标准文档为RFC 1058。</p>
<p>RIP要求自治系统AS内的每一个路由器都要维护从它自己到AS内其他每一个网络的距离记录。这是一组距离，称为“<strong>距离向量D-V(Distance-Vector)</strong>”。</p>
<p>RIP使用<strong>跳数</strong>(Hop Count)作为度量(Metric)<strong>来衡量到达目的网络的距离</strong>。</p>
<ul>
<li>
<p>路由器到直连网络的距离定义为1。</p>
</li>
<li>
<p>路由器到非直连网络的距离定义为所经过的路由器数加1。</p>
</li>
<li>
<p>允许一条路径最多只能包含15个路由器。<strong>“距离”等于16时相当于不可达</strong>。因此，<strong>RIP只适用于小型互联网</strong>。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-3.png" alt=""  />
</p>
<p>RIP认为<strong>好的路由</strong>就是“距离短”的路由，也就是所<strong>通过路由器数量最少的路由</strong>。当到达同一目的网络有多条“距离相等”的路由时，可以进行<strong>等价负载均衡</strong>。</p>
<p>RIP包含以下三个要点:</p>
<ul>
<li>
<p><strong>和谁交换信息</strong>    仅和<strong>相邻路由器</strong>交换信息</p>
</li>
<li>
<p><strong>交换什么信息</strong>    自己的路由表</p>
</li>
<li>
<p><strong>何时交换信息</strong>    <strong>周期性交换</strong>（例如每30秒)</p>
</li>
</ul>
<p>RIP基本工作过程</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-4.png" alt=""  />
</p>
<p>路由器刚开始工作时，<strong>只知道自己到直连网络的距离为1</strong>。</p>
<p>每个路由器仅<strong>和相邻路由器周期性地交换并更新路由信息</strong>。</p>
<p>若干次交换和更新后，<strong>每个路由器都知道到达本AS内各网络的最短距离和下一跳地址</strong>，称为收敛。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-5.png" alt=""  />
</p>
<p>RIP的路由条目的更新规则</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-6.png" alt=""  />
</p>
<p>C将其路由表发给D，结果D改造，对D原有路由表进行更新。</p>
<p>例题：某自治系统内采用RIP协议，若该自治系统内的路由器R1收到其邻居路由器R2的距离矢量，距离矢量中包含信息&lt; net1,16 &gt;，则能得出的结论是</p>
<p>A.R2可以经过R1到达net1，跳数为17    B.R2可以到达net1，跳数为16</p>
<p>C.R1可以经过R2到达net1，跳数为17    D.R1不能经过R2到达net1</p>
<p>解析：在RIP协议中，距离16表明目的网络不可达。因此，R2无法到达net1，R1也无法通过R2到达net1。选D</p>
<p>RIP存在“<strong>坏消息传播得慢</strong>”的问题</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-7.png" alt=""  />
</p>
<p>R1与N1连接出现故障。将N1改成16跳，并发送路由信息给R2，而此时R2也发路由信息给R1.若R2发送的路由信息先到，R1更新路由表N1为3跳，发送回R2，R2收到后，更新自身路由表N1为4跳，再发回R1&hellip;&hellip;直到R1R2路由表关于N1的均为16跳才停止，这叫做收敛。</p>
<p>“坏消息传播得慢”又称为<strong>路由环路</strong>或<strong>距离无穷计数</strong>问题，这是<strong>距离向量算法的一个固有问题</strong>。可以采取多种措施<strong>减少</strong>出现该问题的概率或减小该问题带来的危害。</p>
<ul>
<li>
<p><strong>限制最大路径距离</strong>为15（16表示不可达)</p>
</li>
<li>
<p>当路由表发生变化时就立即发送更新报文（即“<strong>触发更新</strong>”)，而不仅是周期性发送</p>
</li>
<li>
<p>让路由器记录收到某特定路由信息的接口，而不让同一路由信息再通过此接口向反方向传送（即“<strong>水平分割</strong>”）</p>
</li>
</ul>
<p>例题：假设R1、R2、R3采用RIP协议交换路由信息，且均已收敛。若R3检测到网络201.1.2.0/25不可达，并向R2通告一次新的距离向量，则R2更新后，其到达该网络的距离是</p>
<p>A.2    B.3    C.16    D.17</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-8.png" alt=""  />
</p>
<p>解析：</p>
<p>由题知，R3与201.1.2.0/25连接之间出现故障，R3将其改为201.1.2.0/25为16跳，并向R2通告一次新的距离向量。则R2也将201.1.2.0/25改为为16跳。</p>
<p>由知，R2更新后，则是R1给R2发送了RIP更新报文，R2又将201.1.2.0/25改为3跳。</p>
<p>选B</p>
<h3 id="开放最短路径优先ospf的基本工作原理">开放最短路径优先OSPF的基本工作原理</h3>
<p>开放最短路径优先OSPF(Open Shortest Path First)，是为克服RIP的缺点在1989年开发出来</p>
<ul>
<li>
<p>“开放”表明OSPF协议不是受某一家厂商控制，而是<strong>公开发表</strong>的。</p>
</li>
<li>
<p>“最短路径优先”是因为使用了Dijkstra提出的<strong>最短路径算法</strong>SPF。</p>
</li>
</ul>
<p>OSPF是<strong>基于链路状态</strong>的，而不像RIP那样是基于距离向量的。</p>
<p>OSPF采用SPF算法计算路由，从算法上保证了<strong>不会产生路由环路</strong>。</p>
<p>OSPF<strong>不限制网络规模</strong>，更新效率高，<strong>收敛速度快</strong>。</p>
<p>链路状态是指本路由器都<strong>和哪些路由器相邻</strong>，以及相应<strong>链路的“代价”</strong>(cost)。</p>
<ul>
<li>“代价”用来表示费用、距离、时延、带宽，等等。这些都由网络管理人员来决定。</li>
</ul>
<p>举例：思科路由器中OSPF计算代价的方法: 100Mbps/链路带宽</p>
<p>计算结果小于1的值仍记为1;大于1且有小数的，舍去小数。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-10.png" alt=""  />
</p>
<p>OSPF相邻路由器之间通过交互<strong>问候(Hello)分组</strong>，建立和维护<strong>邻居关系</strong>。</p>
<ul>
<li>
<p>Hello分组封装在lP数据报中，发往组播地址224.0.0.5;</p>
</li>
<li>
<p>发送周期为10秒</p>
</li>
<li>
<p>40秒未收到来自邻居路由器的Hello分组，则认为该邻居路由器不可达。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-11.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-12.png" alt=""  />
</p>
<p>使用OSPF的每个路由器都会产生<strong>链路状态通告</strong>LSA(Link State Advertisement)。LSA中包含以下内容:</p>
<ul>
<li>
<p>直连网络的链路状态信息</p>
</li>
<li>
<p>邻居路由器的链路状态信息</p>
</li>
</ul>
<p>LSA被封装在<strong>链路状态更新分组LSU</strong>中，采用<strong>洪泛法</strong>发送。</p>
<p>使用OSPF的每个路由器都有一个<strong>链路状态数据库LSDB</strong>，用于存储LSA。</p>
<p>通过各路由器洪泛发送封装有自己LSA的LSU分组，各路由器的LSDB最终将达到一致。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-13.png" alt=""  />
</p>
<p>使用OSPF的各路由器<strong>基于LSDB进行最短路径优先SPF计算</strong>，构建出各自到达其他各路由器的最短路径，即构建各自的路由表。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-14.png" alt=""  />
</p>
<p>OSPF有以下五种分组类型</p>
<ul>
<li>
<p>类型1，<strong>问候</strong>(Hello)分组    用来发现和维护邻居路由器的可达性。</p>
</li>
<li>
<p>类型2，<strong>数据库描述</strong>(Database Description)分组    向邻居路由器给出自己的链路状态数据库中的所有链路状态项目的摘要信息</p>
</li>
<li>
<p>类型3，<strong>链路状态请求</strong>(Link State Request)分组    向邻居路由器请求发送某些链路状态项目的详细信息。</p>
</li>
<li>
<p>类型4，<strong>链路状态更新</strong>(Link State Update)分组    路由器使用这种分组将其链路状态进行洪泛发送，即用洪泛法对全网更新链路状态。</p>
</li>
<li>
<p>类型5，<strong>链路状态确</strong>认(Link State Acknowledgment)分组    这是对链路状态更新分组的确认分组。</p>
</li>
</ul>
<p>OSPF的基本工作过程</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-15.png" alt=""  />
</p>
<p>OSPF在多点接入网络中路由器邻居关系的建立</p>
<ul>
<li>
<p>选举指定路由器DR(designated router)和备用的指定路由器BDR(backup designated router)</p>
</li>
<li>
<p>所有的非DR/BDR只与DR/BDR建立邻居关系</p>
</li>
<li>
<p>非DR/BDR之间通过DR/BDR交换信息</p>
</li>
<li>
<p>DR出了故障就用BDR</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-16.png" alt=""  />
</p>
<p>为了使OSPF能够用于规模很大的网络，OSPF把一个自治系统再划分为若干个更小的范围，叫做<strong>区域</strong>(Area)</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-17.png" alt=""  />
</p>
<p>区域内路由器IR(internal router): R1,R2,R8,49</p>
<p>区域边界路由器ABR(area border router): R3,R4,R7</p>
<p>主干路由器BBR(backbone router): R3,R4,R5,R6,R7</p>
<p>自治系统边界路由器ASBR(AS border router): R6</p>
<h3 id="边界网关协议bgp的基本工作原理">边界网关协议BGP的基本工作原理</h3>
<p>因特网采用分层次的路由选择协议</p>
<p>内部网关协议IGP（例如路由信息协议RIP或开放最短路径优先OSPF）</p>
<ul>
<li>
<p>设法使分组在一个自治系统内尽可能有效地从源网络传输到目的网络</p>
</li>
<li>
<p>无需考虑自治系统外部其他方面的策略</p>
</li>
</ul>
<p>外部网关协议EGP（例如边界网关协议BGP）</p>
<ul>
<li>在不同自治系统内，度量路由的“代价”(距离，带宽，费用等）可能不同。因此，对于自治系统之间的路由选择，使用“代价”作为度量来寻找最佳路由是不行的。</li>
</ul>
<p>外部网关协议EGP（例如边界网关协议BGP）</p>
<ul>
<li>
<p>在不同自治系统内，度量路由的“代价”(距离，带宽，费用等）可能不同。因此，对于自治系统之间的路由选择，使用“代价”作为度量来寻找最佳路由是不行的。</p>
</li>
<li>
<p>自治系统之间的路由选择必须考虑相关策略(政治，经济，安全等)</p>
</li>
<li>
<p>BGP只能是力求寻找一条能够到达目的网络且比较好的路由（不能兜圈子)，而并非要寻找一条最佳路由</p>
</li>
</ul>
<p>在配置BGP时，每个自治系统的管理员要选择至少一个路由器作为该自治系统的“<strong>BGP发言人</strong>&ldquo;不同自治系统的BGP发言人要交换路由信息，首先必须建立<strong>TCP连接</strong>，端口号为179</p>
<ul>
<li>
<p>在此TCP连接上交换BGP报文以建立<strong>BGP会话</strong></p>
</li>
<li>
<p>利用BGP会话<strong>交换路由信息</strong>（例如，增加新的路由，或撤销过时的路由，以及报告出错的情况等)</p>
</li>
<li>
<p>使用TCP连接交换路由信息的两个BGP发言人，彼此称为对方的<strong>邻站(<strong>neighbor)或</strong>对等站</strong>(peer)BGP发言人除了运行BGP外，还必须运行自己所在自治系统所使用的内部网关协议IGP，例如OSPF或RIlP。</p>
</li>
</ul>
<p>BGP发言人<strong>交换网络可达性的信息</strong>（要到达某个网络所要经过的一系列自治系统)</p>
<p>当BGP发言人互相交换了网络可达性的信息后，各BGP发言人就<strong>根据</strong>所采用的<strong>策略</strong>从收到的路由信息中<strong>找出到达各自治系统的较好的路由</strong>。也就是构造出树形结构、<strong>不存在回路的自治系统连通图</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-18.png" alt=""  />
</p>
<p>BGP适用于多级结构的因特网</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-19.png" alt=""  />
</p>
<p>BGP-4有以下四种报文</p>
<ul>
<li>
<p>OPEN（打开）报文:用来与相邻的另一个BGP发言人建立关系，使通信初始化。</p>
</li>
<li>
<p>UPDATE（更新）报文:用来通告某一路由的信息，以及列出要撤销的多条路由。</p>
</li>
<li>
<p>KEEPALIVE（保活）报文:用来周期性地证实邻站的连通性。</p>
</li>
<li>
<p>NOTIFICATION（通知）报文:用来发送检测到的差错。</p>
</li>
</ul>
<p>例题：R1与R2之间利用哪个路由协议交换路由信息?该路由协议的报文被封装到哪个协议的分组中进行传输?</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-20.png" alt=""  />
</p>
<p>解析：</p>
<p>R1和R2分别位于两个不同的自治系统AS1和AS2中;</p>
<p>自治系统之间需要使用外部网关协议EGP这一类协议，具体为<strong>边界网关协议BGP</strong>，目前使用最多的版本是BGP-4;</p>
<p>BGP-4报文被封装在<strong>TCP报文段</strong>中进行传输。</p>
<p>例题：直接封装RIP、OSPF、BGP报文的协议分别是</p>
<p>A.TCP、UDP、IP    B.TCP、IP、UDP    C.UDP、TCP、IP    D.UDP、IP、TCP</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-6/4-6-21.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-5</title>
      <link>https://blog.0pt.im/learn/1-4-5/</link>
      <pubDate>Wed, 26 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-5/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="静态路由配置及其可能产生的路由环路问题">静态路由配置及其可能产生的路由环路问题</h1>
<p>静态路由配置是指用户或网络管理员使用路由器的相关命令给路由器<strong>人工配置路由表</strong>。</p>
<ul>
<li>
<p>这种人工配置方式简单、开销小。但<strong>不能及时适应网络状态(流量、拓扑等)的变化</strong>。</p>
</li>
<li>
<p>一般只在小规模网络中采用。</p>
</li>
</ul>
<p>使用静态路由配置可能出现以下<strong>导致</strong>产生<strong>路由环路</strong>的错误</p>
<ul>
<li>
<p>配置错误</p>
</li>
<li>
<p>聚合了不存在的网络</p>
</li>
<li>
<p>网络故障</p>
</li>
</ul>
<p>假设R1要转发给192.168.2.0/24，应该转发给R2的接口0。但是R1路由表除了直连自动识别外，没有R2接口0，换句话说，R1不知道目的网络的存在。</p>
<p>因此，我们可以使用路由器的相关配置命令，给R1添加一条到达该目的网络的路由条目。</p>
<p>该路由条目是是我们人工设置的静态路由。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-5/4-5-1.png" alt=""  />
</p>
<p>默认路由为0.0.0.0/0，对于本例，下一跳为R2的接口0</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-5/4-5-2.png" alt=""  />
</p>
<p>人工配置默认路由，减少人工配置工作量，可以删了上一个静态路由。</p>
<p>特定主机路由</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-5/4-5-3.png" alt=""  />
</p>
<p>静态路由配置错误导致路由环路</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-5/4-5-4.png" alt=""  />
</p>
<p>R2要转发IP数据报给192.168.1.0/24，但是把静态路由配错了如图所示。如何会发给R3，R3检查路由表，把该数据报发给R2,R2检查路由表，又发给R3，形成<strong>路由环路</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-5/4-5-5.png" alt=""  />
</p>
<p>为了<strong>防止IP数据报在路由环路中永久兜圈</strong>，在IP数据报首部设有<strong>生存时间TTL</strong>字段。</p>
<p>IP数据报进入路由器后，TTL字段的值减1。若TTL的值不等于0，则被路由器转发，否则被丢弃。</p>
<p>聚合了不存在的网络而导致的路由环路</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-5/4-5-6.png" alt=""  />
</p>
<p>先把黑洞路由当作不存在。R2要转发给192.168.2.0/24，检查路由表，发现192.168.0.0/22的聚合路由，于是发送给R1，R1检查路由表，匹配192.168.2.0/24，于是发送给192.168.2.0/24。</p>
<p>但是，聚合路由192.168.0.0/22包含4个IP，其中2个还不存在，试想，当R2要转发给一个不存在的IP192.168.0.0/24，检查路由表，发现192.168.0.0/22的聚合路由，于是发送给R1，R1检查路由表，只能匹配默认路由，于是发回给R2，然后就形成路由环路。</p>
<p>所以，我们可以在路由表中，添加所聚合的、不存在的黑洞路由。此时R2要转发给一个不存在的IP192.168.0.0/24，检查路由表，发现192.168.0.0/22的聚合路由与192.168.0.0/24的黑洞路由，根据最长前缀匹配，选择到黑洞路由，之后，该数据报被丢弃，相当于进入黑洞，有去无回。</p>
<p>网络故障导致的路由环路</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-5/4-5-7.png" alt=""  />
</p>
<p>当图示网络故障，路由表会自动删除所直连的路由记录。此时R1要发送给192.168.1.0/24，检查路由表，发现192.168.0.0/22的聚合路由，于是发送给R1，R1检查路由表，只能匹配默认路由，于是发回给R2，然后就形成路由环路。</p>
<p>所以，我们同样也可以添加黑洞路由。可以设置黑洞路由在故障发送后路由记录被删除后自动生效。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-4</title>
      <link>https://blog.0pt.im/learn/1-4-4/</link>
      <pubDate>Tue, 25 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-4/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="数据报的发送和转发过程">数据报的发送和转发过程</h1>
<p>IP数据报的发送和转发过程包含以下两部分:</p>
<ul>
<li>
<p>主机发送IP数据报</p>
</li>
<li>
<p>路由器转发IP数据报</p>
</li>
</ul>
<p>为了将重点放在TCP/IP协议栈的网际层发送和转发IP数据报的过程上，在之后的举例中，我们<strong>忽略使用ARP协议来获取目的主机或路由器接口的MAC地址的过程以及以太网交换机自学习和转发帧的过程</strong>。</p>
<p>举例：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-4/4-4-1.png" alt=""  />
</p>
<p>假设C要发送数据给F，源主机如何知道目的主机是否与自己在同一个网络中？通过想与运算。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-4/4-4-2.png" alt=""  />
</p>
<p>C怎么知道R的存在？</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-4/4-4-3.png" alt=""  />
</p>
<p>指定默认网关。</p>
<p>假设A发送数据给D</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-4/4-4-4.png" alt=""  />
</p>
<p>路由器是如何转发呢？</p>
<ul>
<li>
<p>检查lP数据报首部是否出错:若出错，则直接丢弃该lIP数据报并通告源主机若没有出错，则进行转发</p>
</li>
<li>
<p>根据lP数据报的目的地址在路由表中查找匹配的条目:若找到匹配的条目，则转发给条目中指示的下一跳若找不到，则丢弃该lP数据报并通告源主机</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-4/4-4-5.png" alt=""  />
</p>
<p>将目的地址与目的网络相应的地址掩码进行相与，得到的结果为目的网络，即匹配。</p>
<blockquote>
<p>路由器隔离广播域，就算广播数据报的目的地址为其他网络，也不转发。</p>
</blockquote>
<p>例题：下列网络设备中，能够抑制广播风暴的是</p>
<p>1中继器  2集线器  3网桥  4路由器</p>
<p>A.仅1和2  B.仅3  C.仅3和4  D.仅4</p>
<p>解析：</p>
<p>中继器和集线器工作在物理层，既不隔离冲突域也不隔离广播域。</p>
<p>网桥和交换机(多端口网桥）工作在数据链路层，可以隔离冲突域，不能隔离广播域。</p>
<p>路由器工作在网络层，既隔离冲突域，也隔离广播域。</p>
<p>选D</p>
<p>例题：下列关于IP路由器概念的描述中，正确的是</p>
<p>1运行路由协议，设置路由表</p>
<p>2监测到拥塞时，合理丢弃IP分组</p>
<p>3对收到的IP分组头进行差错校验，确保传输的IP分组不丢失</p>
<p>4根据收到的IP分组的目的IP地址，将其转发到合适的输出线路上</p>
<p>A.仅34    B.仅123    C.仅124    D.1234</p>
<p>解析：</p>
<p>IP路由器工作在TCP/IP体系结构的网际层(或称IP层)，TCP/IP体系结构的网际层并不负责可靠传输，也就是不能确保传输的IP分组不丢失。</p>
<p>IP路由器对收到的lP分组头进行差错校验，当发现错误时会丢弃该IP分组并向源主机发送ICMP差错报告报文(类型为参数错误)。</p>
<p>综上所述，题目中的描述ⅢI是错误的，利用排除法可知选项C正确。题目中的其他描述项都是正确的。</p>
<p>例题：</p>
<p>某网络拓扑如下图所示，其中路由器内网接口、DHCP服务器、WWW服务器与主机1均采用静态IP地址配置，相关地址信息见图中标注;主机2~主机N通过DHCP服务器动态获取IP地址等配置信息。</p>
<p>若主机1的子网掩码和默认网关分别配置为255.255.255.0和111.123.15.2，则该主机是否能访问WWW服务器?是否能访问Internet?请说明理由。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-4/4-4-6.png" alt=""  />
</p>
<p>解析：主机1可以访问WWW服务器。从IP地址与子网掩码配置以及物理连接方面看，主机1和wwW服务器在同一网络中。</p>
<p>主机1不能访问Internet，因为它的默认网关错误配置成了DHCP服务器的IP地址,DHCP服务器不具备路由器的功能,无法将IP分组转发到Internet。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-3</title>
      <link>https://blog.0pt.im/learn/1-4-3/</link>
      <pubDate>Mon, 24 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-3/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="ipv4地址概述">IPv4地址概述</h1>
<p>在TCP/IP体系中，IP地址是一个最基本的概念，我们必须把它弄清楚。</p>
<p>IPv4地址就是给因特网(Internet)上的<strong>每一台主机(或路由器）的每一个接口</strong>分配一个在全世界范围内是<strong>唯一的32比特的标识符</strong>。</p>
<p>IP地址由因特网名字和数字分配机构ICANN(Internet Corporation for Assigned Names and Numbers)进行分配。</p>
<ul>
<li>
<p>我国用户可向亚太网络信息中心APNIC(Asia Pacific Network Information Center)申请IP地址，需要缴费。</p>
</li>
<li>
<p>2011年2月3日，互联网号码分配管理局IANA(由ICANN行使职能）宣布，IPv4地址已经分配完毕。</p>
</li>
<li>
<p>我国在2014至2015年也逐步停止了向新用户和应用分配IPv4地址。同时全面开展商用部署</p>
</li>
</ul>
<p><strong>IPv4地址的编址方法经历了如下三个历史阶段</strong>:</p>
<ul>
<li>
<p>1981年  分类编址</p>
</li>
<li>
<p>1985年  划分子网</p>
</li>
<li>
<p>1993年  无分类编址</p>
</li>
</ul>
<p>32比特的IPv4地址不方便阅读、记录以及输入等，因此IPv4地址采用点分十进制表示方法以方便用户使用。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-1.png" alt=""  />
</p>
<p>例题：请将以下这些32比特的IPv4地址转换为点分十进制形式。</p>
<p>(1) 00001010 11111110 00001111 11110000</p>
<p>(2)10101100 00010000 10111111 11110111</p>
<p>(3)11000000 10101000 10100101 00000111</p>
<p>答案：</p>
<p>(1)10.254.15.240    (2)172.16.191.247    (3)192.168.165.7</p>
<blockquote>
<p>二进制与十进制的转换自己学，较简单</p>
</blockquote>
<h3 id="分类编址的ipv4地址">分类编址的IPv4地址</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-2.png" alt=""  />
</p>
<p>注意事项:</p>
<p>只有A类、B类和C类地址可分配给网络中的主机或路由器的各接口</p>
<p>主机号为“全0”的地址是网络地址，不能分配给主机或路由器的各接口</p>
<p>主机号为“全1”的地址是广播地址，不能分配给主机或路由器的各接口</p>
<h3 id="a类地址">A类地址</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-3.png" alt=""  />
</p>
<p>可指派的网络数量为2^(8-1) - 2 = 126(减2的原因是除去最小网络号0和最大网络号127)</p>
<p>每个网络中可分配的IP地址数量为2^24 -2= 16777214(减2的原因是除去主机号为全0的网络地址和全1的广播地址)</p>
<h3 id="b类地址">B类地址</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-5.png" alt=""  />
</p>
<p>可指派的网络数量为2^(16-2) =16384</p>
<p>每个网络中可分配的IP地址数量为2^16 - 2 = 65534(减2的原因是除去主机号为全0的网络地址和全1的广播地址)</p>
<p>注意:有些教材中指出128.0是保留网络号，B类第一个可指派的网络号为128.1。但根据2002年9月发表的RFC3330文档，128.0网络号已经可以分配了。</p>
<h3 id="c类地址">C类地址</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-6.png" alt=""  />
</p>
<p>可指派的网络数量为2^(24-3) = 2097152</p>
<p>每个网络中可分配的IP地址数量为2^8 - 2= 254 (减2的原因是除去主机号为全0的网络地址和全1的广播地址)</p>
<p>注意:有些教材中指出192.0.0是保留网络号，C类第一个可指派的网络号为192.0.1。但根据2002年9月发表的RFC 3330文档，192.0.0网络号已经可以分配了。只不过目前还没有分配出去。</p>
<p>例题：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-7.png" alt=""  />
</p>
<p>解析：</p>
<p>1.根据地址左起第一个十进制数的值，可以判断出网络类别(小于127的为A类，128~191的为B类，192~223的为C类);</p>
<p>2.根据网络类别，就可找出地址中的网络号部分和主机号部分(A类地址网络号为左起第一个字节，B类地址网络号为左起前两个字节,C类地址网络号为左起前三个字节);</p>
<p>3.以下三种情况的地址不能指派给主机或路由器接口:</p>
<ul>
<li>
<p>A类网络号0和127</p>
</li>
<li>
<p>主机号为“全0”，这是网络地址</p>
</li>
<li>
<p>主机号为“全1”，这是广播地址</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-8.png" alt=""  />
</p>
<p>例题：下列IP地址中，只能作为IP分组的源IP地址但不能作为目的IP地址的是</p>
<p>A.0.0.0.0    B.127.0.0.1    C.20.10.10.3    D.255.255.255.25</p>
<p>解析：</p>
<p>地址0.0.0.0是一个特殊的IPv4地址，只能作为源地址使用，表示“在本网络上的本主机”。封装有DHCPDiscovery报文的IP分组的源地址使用0.0.0.0;</p>
<p>以127开头且后面三个字节非“全O”或“全1”的IP地址是一类特殊的IPv4地址，既可以作为源地址使用，也可以作为目的地址使用，用于本地软件环回测试，例如常用的环回测试地址127.0.0.1;</p>
<p>地址255.255.255.255是一个特殊的IPv4地址，只能作为目的地址使用，表示“只在本网络上进行广播(各路由器均不转发)”。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-9.png" alt=""  />
</p>
<p>例题：请根据本节课所学内容给出下图各网络的IPv4地址分配方案。请按照节约IP地址的原则进行分配。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-10.png" alt=""  />
</p>
<p>解析：</p>
<p><strong>路由器接口也需要一个ip地址</strong></p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-11.png" alt=""  />
</p>
<h3 id="划分子网的的ipv4地址">划分子网的的IPv4地址</h3>
<p>将原有的网络地址划分成若干个更细的子网，避免重复申请新的网络地址，从而节约网络地址。</p>
<p>如某单位申请了一个b类地址145.16.0.0，将其分为3个子网，主机号为145.16向后借去子网号，如145.16.0，145.16.2，145.16.3</p>
<p>10010001.00010000.00000000.00000000       (145.16.0.0)</p>
<p>10010001.00010000.00000001.00000000       (145.16.1.0)</p>
<p>10010001.00010000.00000010.00000000       (145.16.2.0)</p>
<p>10010001.00010000.00000011.00000000       (145.16.3.0)</p>
<p><strong>32比特的子网掩码可以表明分类IP地址的主机号部分被借用了几个比特作为子网号</strong></p>
<ul>
<li>
<p>子网掩码使用<strong>连续的比特1来对应网络号和子网号</strong></p>
</li>
<li>
<p>子网掩码使用<strong>连续的比特0来对应主机号</strong></p>
</li>
<li>
<p>将划分子网的<strong>IPv4地址</strong>与其相应的<strong>子网掩码</strong>进行<strong>逻辑与运算</strong>就可得到IPv4地址<strong>所在子网的网络地址</strong></p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-12.png" alt=""  />
</p>
<p>例题：已知某个网络的地址为218.75.230.0，使用子网掩码255.255.255.128对其进行子网划分，请给出划分细节。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-13.png" alt=""  />
</p>
<p>对正常c类网进行分析</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-14.png" alt=""  />
</p>
<p>但是我们要分子网将主机号写成8个比特的二进制数</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-15.png" alt=""  />
</p>
<p>相当于分成2个子网。</p>
<p>例题：已知某个网络的地址为218.75.230.0，使用子网掩码255.255.255.192对其进行子网划分，请给出划分细节。</p>
<p>解析：</p>
<p>1.根据所给网络地址可知其为C类网络地址，网络号占3个字节，主机号占1个字节;</p>
<p>2.根据所给子网掩码可知从1字节主机号中借用2位作为子网号;</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-16.png" alt=""  />
</p>
<p>例题：某主机的IP地址为180.80.77.55，子网掩码为255.255.252.0，如该主机向其所在子网发送广播分组，则目的地址可以是</p>
<p>A.180.80.76.0    B.180.80.76.255    C.180.80.77.255    D.180.80.79.255</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-18.png" alt=""  />
</p>
<p>默认的子网掩码是指在未划分子网的情况下使用的子网掩码。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-19.png" alt=""  />
</p>
<h3 id="无分类编址的ipv4地址">无分类编址的IPv4地址</h3>
<p>划分子网在一定程度上缓解了因特网在发展中遇到的困难，但是<strong>数量巨大的C类网</strong>因为其<strong>地址空间太小</strong>并<strong>没有得到充分使用</strong>，而因特网的IP地址仍在加速消耗，整个<strong>IPv4地址空间面临全部耗尽的威胁</strong>。</p>
<p>为此，因特网工程任务组IETF又提出了采用<strong>无分类编址</strong>的方法来解决IP地址紧张的问题同时还专门成立IPv6工作组负责研究新版本IP以彻底解决IP地址耗尽问题。</p>
<p>1993年，IETF发布了<strong>无分类域间路由选择</strong>CIDR(Classless Inter-Domain Routing)的RFC文档:RFC 1517~1519和1520。</p>
<ul>
<li>
<p><strong>CIDR消除了传统的A类、B类和C类地址，以及划分子网的概念</strong>;</p>
</li>
<li>
<p><strong>CIDR可以更加有效地分配IPv4的地址空间</strong>，并且可以在新的IPv6使用之前允许因特网的规模继续增长。</p>
</li>
</ul>
<p>CIDR使用“斜线记法”，或称CIDR记法。即在IPv4地址后面加上斜线“/”，在斜线后面写上网络前缀所占的比特数量。</p>
<p>举例：128.14.35.7 / 20</p>
<p>网络前缀占用的比特数量：20  主机编号占用的比特数量： 32-20=12</p>
<p>CIDR实际上是<strong>将网络前缀都相同的连续的IP地址组成一个“CIDR地址块”</strong>。</p>
<p>我们只要知道CIDR地址块中的任何一个地址，就可以知道该地址块的全部细节:</p>
<ul>
<li>
<p>地址块的最小地址</p>
</li>
<li>
<p>地址块的最大地址</p>
</li>
<li>
<p>地址块中的地址数量</p>
</li>
<li>
<p>地址块聚合某类网络(A类、B类或C类)的数量</p>
</li>
<li>
<p>地址掩码（也可继续称为子网掩码）</p>
</li>
</ul>
<p>例题：请给出CIDR地址块128.14.35.7/20的全部细节（最小地址，最大地址，地址数量，聚合C类网数量，地址掩码)。</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-20.png" alt=""  />
</p>
<p>例题：请给出CIDR地址块206.0.64.8/18的全部细节（最小地址，最大地址，地址数量，聚合C类网数量，地址掩码）。</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-21.png" alt=""  />
</p>
<p><strong>路由聚合</strong>(构造超网)</p>
<p>举例：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-22.png" alt=""  />
</p>
<p><strong>网络前缀越长，地址块越小，路由越具体</strong>;</p>
<p>若路由器查表转发分组时发现有多条路由可选，则选择网络前缀最长的那条，这称为<strong>最长前缀匹配</strong>,因为这样的路由更具体。</p>
<p>例题：在子网192.168.4.0 / 30中，能接收目的地址为192.168.4.3的IP分组的最大主机数是</p>
<p>A.0    B.1    C.2    D.4</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-23.png" alt=""  />
</p>
<p>选C</p>
<p>例题：某路由表中有转发接口相同的4条路由表项，其目的网络地址分别为35.230.32.0/21、35.230.40.0/21、35.230.48.0/21和35.230.56.0/21，将该4条路由聚合后的目的网络地址为</p>
<p>A.35.230.0.0/19    B.35.230.0.0/20    C.35.230.32.0/19    D.35.230.32.0/20</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-24.png" alt=""  />
</p>
<p>故选C</p>
<h3 id="ipv4地址的应用规划">IPv4地址的应用规划</h3>
<p>1.定长的子网掩码FLSM</p>
<ul>
<li>
<p>使用同一个子网掩码来划分子网</p>
</li>
<li>
<p>每个子网所分配的IP地址数量相同，造成IP地址的浪费</p>
</li>
</ul>
<p>2.变长的子网掩码VLSM</p>
<ul>
<li>
<p>使用不同的子网掩码来划分子网</p>
</li>
<li>
<p>每个子网所分配的IP地址数量可以不同，尽可能减少对IP地址的浪费</p>
</li>
</ul>
<p>FLSM举例</p>
<p>假设申请到的C类网络为218.75.230.0，请使用定长的子网掩码给下图所示的小型互联网中的各设备分配IP地址。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-25.png" alt=""  />
</p>
<p>应用需求:将C类网络218.75.230.0划分成5个子网，每个子网上可分配的IP地址数量不得少于各自的需求。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-26.png" alt=""  />
</p>
<p>任选5个</p>
<p>VLSM举例</p>
<p>假设申请到的C类网络为218.75.230.0/24，请使用定长的子网掩码给下图所示的小型互联网中的各设备分配IP地址。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-3/4-3-27.png" alt=""  />
</p>
<p>应用需求:从地址块218.75.230.0/24中取出5个地址块</p>
<p>(1个“/27”地址块，3个“/28”地址块，1个“/30&quot;(1个“/27”地址块，3个“/28”地址块，1个“/30&quot;地址块)，按需分配给上图所示的5个网络。</p>
<p>在该地址块中给左图所示的网络N1~N5分配子块，分配原则是“<strong>每个子块的起点位置不能随意选取，只能选取块大小整数倍的地址作为起点</strong>”。建议先给大的子块分配。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-2</title>
      <link>https://blog.0pt.im/learn/1-4-2/</link>
      <pubDate>Sun, 23 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-2/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="网络层提供的两种服务">网络层提供的两种服务</h1>
<h3 id="面向连接的虚电路服务">面向连接的虚电路服务</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-2/4-2-1.png" alt=""  />
</p>
<p><strong>可靠通信由网络来保证</strong></p>
<p>必须建立<strong>网络层的连接</strong>——<strong>虚电路VC</strong>(Virtual Circuit)</p>
<p>通信双方<strong>沿着已建立的虚电路发送分组</strong></p>
<p>目的主机的地址仅在连接建立阶段使用，之后每个<strong>分组的首部只需携带一条虚电路的编号</strong>(构成虚电路的每一段链路都有一个虚电路编号)。</p>
<p>这种通信方式如果再使用可靠传输的网络协议，就可使所发送的分组最终正确到达接收方(无差错按序到达、不丢失、不重复)。</p>
<p><strong>通信结束后，需要释放之前所建立的虚电路</strong>。</p>
<p>很多广域分组交换网都使用面向连接的虚电路服务。例如，曾经的X.25和逐渐过时的帧中继FR、异步传输模式ATM等。</p>
<h3 id="无连接的数据报服务">无连接的数据报服务</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-2/4-2-2.png" alt=""  />
</p>
<p><strong>可靠通信应当由用户主机来保证</strong></p>
<p><strong>不需要建立网络层连接</strong></p>
<p><strong>每个分组可走不同的路径</strong></p>
<p>每个分组的<strong>首部必须携带目的主机的完整地址</strong></p>
<p>这种通信方式所传送的<strong>分组可能误码</strong>、<strong>丢失</strong>、<strong>重复</strong>和<strong>失序</strong>。</p>
<p>由于<strong>网络本身不提供端到端的可靠传输服务</strong>，这就使网络中的路由器可以做得比较简单，而且价格低廉(与电信网的交换机相比较)。</p>
<p>因特网采用了这种设计思想，也就是将<strong>复杂的网络处理功能置于因特网的边缘(用户主机和其内部的运输层)</strong>，而将相对简单的尽最大努力的分组交付功能置于因特网核心。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络4-1</title>
      <link>https://blog.0pt.im/learn/1-4-1/</link>
      <pubDate>Sat, 22 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-4-1/</guid>
      <description>四.网络层</description>
      <content:encoded><![CDATA[<h1 id="网络层概述">网络层概述</h1>
<p>网络层的主要任务是<strong>实现网络互连</strong>，进而<strong>实现数据包在各网络之间的传输</strong>。</p>
<p>要实现网络层任务，需要解决以下主要问题:</p>
<ul>
<li>
<p>网络层向运输层提供怎样的服务（“可靠传输”还是“不可靠传输”）</p>
</li>
<li>
<p>网络层寻址问题</p>
</li>
<li>
<p>路由选择问题</p>
</li>
</ul>
<p><strong>因特网</strong>(Internet)是目前全世界用户数量最多的互联网，它使用<strong>TCP/IP协议栈</strong>。</p>
<p>由于TCP/IP协议栈的网络层使用<strong>网际协议IP</strong>，它是整个协议栈的核心协议，因此在TCP/IP协议栈中网络层常称为<strong>网际层</strong>。</p>
<p>综上所述，我们通过学习TCP/IP协议栈的网际层来学习网络层的理论知识和实践技术。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/4-1/4-1-1.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-11</title>
      <link>https://blog.0pt.im/learn/1-3-11/</link>
      <pubDate>Fri, 21 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-11/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="虚拟局域网vlan">虚拟局域网VLAN</h1>
<h3 id="概述">概述</h3>
<p>以太网交换机工作在数据链路层（也包括物理层）</p>
<p>使用一个或多个以太网交换机互连起来的交换式以太网，其所有站点都属于<strong>同一个广播域</strong>。</p>
<p>随着交换式以太网规模的扩大，广播域相应扩大。</p>
<p>巨大的广播域会带来很多<strong>弊端</strong>:</p>
<ul>
<li>
<p>广播风暴</p>
</li>
<li>
<p>难以管理和维护</p>
</li>
<li>
<p>潜在的安全问题</p>
</li>
</ul>
<p>广播风暴会浪费网络资源和各主机的CPU资源!</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-1.png" alt=""  />
</p>
<p>分割广播域的方法</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-2.png" alt=""  />
</p>
<ul>
<li>
<p>使用路由器可以隔离广播域，路由器的成本较高。</p>
</li>
<li>
<p>虚拟局域网VLAN技术应运而生</p>
</li>
</ul>
<p>虚拟局域网VLAN(Virtual Local Area Network)是一种将局域网内的设备划分成与物理位置无关的逻辑组的技术，这些逻辑组具有某些共同的需求。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-3.png" alt=""  />
</p>
<h3 id="实现机制">实现机制</h3>
<p>IEEE 802.1Q帧</p>
<p>IEEE 802.1Q帧（也称Dot One Q帧）对以太网的MAC帧格式进行了扩展，插入了<strong>4字节的VLAN标记</strong></p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-4.png" alt=""  />
</p>
<p>VLAN标记的<strong>最后12比特</strong>称为<strong>VLAN标识符VID</strong>，它唯一地标志了以太网帧属于哪一个VLAN.</p>
<ul>
<li>
<p>VID的取值范围是0~4095 (0 ~2^(12-1))</p>
</li>
<li>
<p>0和4095都不用来表示VLAN，因此用于表示VLAN的<strong>VID的有效取值范围是1~4094</strong>。</p>
</li>
</ul>
<p>0和4095都不用来表示VLAN，因此用于表示VLAN的VID的有效取值范围是1~4094。</p>
<p><strong>802.1Q帧是由交换机来处理的，而不是用户主机来处理的。</strong></p>
<ul>
<li>
<p>当交换机<strong>收到普通的以太网帧</strong>时，会将其插入4字节的VLAN标记转变为802.1Q帧，简称“<strong>打标签</strong>“</p>
</li>
<li>
<p>当交换机<strong>转发802.1Q帧</strong>时，<strong>可能</strong>会删除其4字节VLAN标记转变为普通以太网帧，简称“<strong>去标签</strong>”</p>
</li>
</ul>
<p>交换机的端口类型</p>
<p>交换机的端口类型有以下三种:</p>
<ul>
<li>
<p>Access</p>
</li>
<li>
<p>Trunk</p>
</li>
<li>
<p>Hybrid</p>
</li>
</ul>
<blockquote>
<p>思科交换机没有Hybrid端口</p>
</blockquote>
<p>交换机各端口的缺省VLAN ID</p>
<ul>
<li>
<p>在思科交换机上称为Native VLAN，即本征VLAN。</p>
</li>
<li>
<p>在华为交换机上称为Port VLAN ID，即端口VLAN ID，简记为PVID。</p>
</li>
</ul>
<p>Access端口一般用于连接用户计算机</p>
<p>Access端口只能属于一个VLAN</p>
<p>Access端口的PVID值与端口所属VLAN的ID相同(默认为1)</p>
<p>Access端口接收处理方法:</p>
<p>一般只接受“未打标签”的普通以太网MAC帧。根据接收帧的端口的PVID给帧“<strong>打标签</strong>”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等。</p>
<p>Access端口发送处理方法:</p>
<p>若帧中的VID与端口的PVID相等，则“<strong>去标签</strong>”并<strong>转发</strong>该帧;否则不转发。</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-5.png" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-6.png" alt=""  />
</th>
</tr>
</thead>
</table>
<p>Trunk端口一般用于交换机之间或交换机与路由器之间的互连</p>
<p>Trunk端口可以属于多个VLAN</p>
<p>用户可以设置Trunk端口的PVID值。默认情况下，Trunk端口的PVID值为1。</p>
<p>Trunk端口发送处理方法:</p>
<ul>
<li>
<p>对VID等于PVID的帧，<strong>“去标签”再转发</strong>;</p>
</li>
<li>
<p>对VID不等于PVID的帧，<strong>直接转发</strong>;</p>
</li>
</ul>
<p>Trunk端口接收处理方法:</p>
<ul>
<li>
<p>接收“未打标签”的帧，根据接收帧的端口的PVID给帧“<strong>打标签</strong>”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等。</p>
</li>
<li>
<p>接收“已打标签的帧”;</p>
</li>
</ul>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-7.png" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-8.png" alt=""  />
</th>
</tr>
</thead>
</table>
<p>例题：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-9.png" alt=""  />
</p>
<p>上图给出了用于交换机互连的Trunk端口的PVID值的组合，试回答以下问题:</p>
<p>(1)主机A发送广播帧，则帧的传递过程是什么?</p>
<p>(2)主机C发送广播帧，则帧的传递过程是什么?</p>
<p>(3)从上述过程可以得出什么结论?</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-10.png" alt=""  />
</p>
<p>结论：互连的Trunk端口的PVID值不等,可能会造成转发错误!</p>
<p>Hybrid端口既可用于交换机之间或交换机与路由器之间的互连(同Trunk端口)，也可用于交换机与用户计算机之间的互连(同Access端口)</p>
<p>Hybrid端口可以属于多个VLAN(同Trun端口)用户可以设置Hybrid端口的PVID值。默认情况下,Hybrid端口的PVID值为1(同Trun端口)</p>
<p>Hybrid端口发送处理方法(与Trunk端口不同)查看帧的VID是否在端口的“去标签”列表中:</p>
<ul>
<li>
<p>若存在，则“去标签”后再转发;</p>
</li>
<li>
<p>若不存在，则直接转发;</p>
</li>
</ul>
<p>Hybrid端口接收处理方法(同Trunk端口)</p>
<ul>
<li>
<p>接收“未打标签”的帧，根据接收帧的端口的PVID给帧“打标签”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等。</p>
</li>
<li>
<p>接收“已打标签的帧”;</p>
</li>
</ul>
<p>【应用举例】主机A、B、C连接在同一个交换机的不同接口上。利用Hybrid端口的功能，实现以下应用需求:A和B都能与C相互通信，但A与B不能相互通信。</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-11.png" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/computernet/3-11/3-11-12.png" alt=""  />
</th>
</tr>
</thead>
</table>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-10</title>
      <link>https://blog.0pt.im/learn/1-3-10/</link>
      <pubDate>Thu, 20 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-10/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="以太网交换机的生成树协议stp">以太网交换机的生成树协议STP</h1>
<p>如何提高以太网的可靠性?</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-10/3-10-1.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-10/3-10-2.png" alt=""  />
</p>
<p>添加冗余链路可以提高以太网的可靠性</p>
<p>但是，冗余链路也会带来负面效应——形成网络环路网络环路会带来以下问题:</p>
<ul>
<li>
<p>广播风暴，大量消耗网络资源，使得网络无法正常转发其他数据帧;</p>
</li>
<li>
<p>主机收到重复的广播帧，大量消耗主机资源</p>
</li>
<li>
<p>交换机的帧交换表震荡（漂移)</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-10/3-10-3.png" alt=""  />
</p>
<blockquote>
<p>广播帧一直循环转发。帧交换表一直变化。</p>
</blockquote>
<p>以太网交换机使用<strong>生成树协议STP</strong>(Spanning Tree Protocol),可以在增加冗余链路来提高网络可靠性的同时又<strong>避免网络环路带来的各种问题</strong>。</p>
<ul>
<li>
<p>不论交换机之间采用怎样的物理连接，交换机都能够自动计算并构建一个逻辑上没有环路的网络，其逻辑拓扑结构必须是树型的(无逻辑环路);</p>
</li>
<li>
<p>最终生成的树型逻辑拓扑要<strong>确保连通整个网络</strong>;</p>
</li>
<li>
<p>当首次连接交换机或网络<strong>物理拓扑发生变化</strong>时(有可能是人为改变或故障)，交换机都将进行<strong>生成树的重新计算</strong>。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/computernet/3-10/3-10-5.png" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/computernet/3-10/3-10-4.png" alt=""  />
</th>
</tr>
</thead>
</table>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-9</title>
      <link>https://blog.0pt.im/learn/1-3-9/</link>
      <pubDate>Wed, 19 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-9/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="以太网交换机自学习和转发帧的流程">以太网交换机自学习和转发帧的流程</h1>
<p>以太网交换机工作在<strong>数据链路层</strong>（也包括物理层)</p>
<p>以太网交换机收到帧后，在帧交换表中查找<strong>帧的目的MAC地址所对应的接口号</strong>，然后通过该接口转发帧。</p>
<p>以太网交换机是一种即插即用设备，刚上电启动时其内部的帧交换表是空的。随着网络中各主机间的通信，以太网交换机<strong>通过自学习算法</strong>自动逐渐<strong>建立起帧交换表</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-9/3-9-1.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-9/3-9-2.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-9/3-9-3.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-9/3-9-4.png" alt=""  />
</p>
<p>每条记录都有自己的<strong>有效时间</strong>,到期自动删除!这是因为<strong>MAC地址与交换机接口的对应关系并不是永久性的</strong>!</p>
<p>例题：为简单起见，主机A，B，C，D，E，F，G，H的MAC地址与其主机名称相同。主机间依次如下通信:</p>
<p>1.B→C  2.D→A  3.G→D  4.E→H  5.C→B  6.F→G</p>
<p>请给出以太网交换机1，2，3的自学习过程以及各自最终的帧交换表的内容。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-9/3-9-5.png" alt=""  />
</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-9/3-9-6.png" alt=""  />
</p>
<p>例题：以太网交换机进行转发决策时使用的PDU地址是</p>
<p>A.目的物理地址    B.目的IP地址    C.源物理地址    D.源lP地址</p>
<p>解析：PDU(Protocol Data Unit)的意思是协议数据单元，它是计算机网络体系结构中对等实体间逻辑通信的对象。</p>
<p>以太网交换机工作在数据链路层（也包括物理层)，它接收并转发的PDU通常称为帧。以太网交换机收到帧后，在帧交换表中查找<strong>帧的目的MAC地址</strong>所对应的接口号，然后通过该接口转发帧。</p>
<p><strong>MAC地址又称为硬件地址或物理地址</strong>。请注意:不要被“物理”二字误导认为物理地址属于物理层范畴，物理地址属于数据链路层范畴。</p>
<p>例题：某以太网拓扑及交换机当前转发表如下图所示，主机00-e1-d5-00-23-a1向主机00-e1-d5-00-23-c1发送1个数据帧，主机OO-e1-d5-00-23-c1收到该帧后，向主机00-e1-d5-00-23-a1发送1个确认帧，交换机对这两个帧的转发端口分别是</p>
<p>A.{3}和{1}    B.{2，3}和{1}    C.{2，3}和{1，2}    D.{1，2，3}和{1}</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-9/3-9-7.png" alt=""  />
</p>
<p>解析：自己想</p>
<p>选B</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-8</title>
      <link>https://blog.0pt.im/learn/1-3-8/</link>
      <pubDate>Tue, 18 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-8/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="集线器与交换机的区别">集线器与交换机的区别</h1>
<p>早期的总线型以太网</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-8/3-8-2.png" alt=""  />
</p>
<p>使用双绞线和集线器HUB的星型以太网</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-8/3-8-3.png" alt=""  />
</p>
<p><strong>使用集线器的以太网在逻辑上仍是一个总线网</strong>，各站共享总线资源，<strong>使用的还是CSMA/CD协议</strong>;</p>
<p><strong>集线器只工作在物理层</strong>，它的每个接口仅简单地转发比特，不进行碰撞检测(由各站的网卡检测);</p>
<p><strong>集线器一般都有少量的容错能力和网络管理功能</strong>。例如，若网络中某个网卡出了故障，不停地发送帧。此时，集线器可以检测到这个问题，在内部断开与出故障网卡的连线，使整个以太网仍然能正常工作。</p>
<p>使用集线器HUB在物理层扩展以太网</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-8/3-8-4.png" alt=""  />
</p>
<p>以太网交换机</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-8/3-8-5.png" alt=""  />
</p>
<p>由此看出，交换机功能更强大。</p>
<blockquote>
<p>前提：1.忽略ARP过程。 2.假设交换机的帧交换表已“学习好了&quot;。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-8/3-8-6.png" alt=""  />
</p>
<p>以太网交换机通常都有<strong>多个接口</strong>。每个接口都可以直接与一台主机或另一个以太网交换机相连。一般都工作在<strong>全双工方式</strong>。</p>
<p>以太网交换机具有并行性，能<strong>同时连通多对接口</strong>，使多对主机能同时通信，<strong>无碰撞(不使用CSMA/CD协议)</strong>。</p>
<p>以太网交换机一般都具有多种速率的接口，例如:</p>
<p>10Mb/s、100Mb/s、1Gb/s、10Gb/s接口的多种组合。以太网交换机<strong>工作在数据链路层</strong>（也包括物理层），它收到帧后，在帧交换表中查找<strong>帧的目的MAC地址所对应的接口号</strong>，然后通过该接口转发帧。</p>
<p>以太网交换机是一种即插即用设备，其内部的<strong>帧交换表</strong>是通过<strong>自学习算法</strong>自动地逐渐建立起来的。</p>
<p>帧的两种转发方式:</p>
<ul>
<li>
<p>1.<strong>存储转发</strong></p>
</li>
<li>
<p>2.<strong>直通交换</strong>:采用基于硬件的交叉矩阵（交换时延非常小，但不检查帧是否有差错)</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-8/3-8-7.png" alt=""  />
</p>
<p>小结：</p>
<p>集线器HUB</p>
<ul>
<li>
<p>早期以太网的互连设备</p>
</li>
<li>
<p>工作在OSI体系结构的物理层</p>
</li>
<li>
<p>对接收到的信号进行放大、转发</p>
</li>
<li>
<p>使用集线器作为互连设备的以太网仍然属于共享总线式以太网。集线器互连起来的所有主机共享总线带宽，属于同一个碰撞域和广播域。</p>
</li>
</ul>
<p>交换机SWITCH</p>
<ul>
<li>
<p>目前以太网中使用最广泛的互连设备</p>
</li>
<li>
<p>工作在OSI体系结构的数据链路层（也包括物理层）</p>
</li>
<li>
<p>根据MAC地址对帧进行转发</p>
</li>
<li>
<p>使用交换机作为互连设备的以太网，称为交换式以太网。交换机可以根据MAC地址过滤帧，即隔离碰撞域。</p>
</li>
<li>
<p>交换机的每个接口是一个独立的碰撞域</p>
</li>
<li>
<p>交换机隔离碰撞域但不隔离广播域（VLAN除外）</p>
</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-7</title>
      <link>https://blog.0pt.im/learn/1-3-7/</link>
      <pubDate>Mon, 17 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-7/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="mac地址ip地址以及arp协议">MAC地址、IP地址以及ARP协议</h1>
<p>MAC地址是以太网的MAC子层所使用的地址;                                 数据链路层</p>
<p>IP地址是TCP/IP体系结构网际层所使用的地址;                               网际层</p>
<p>ARP协议属于TCP/IP体系结构的网际层，其作用是已知设备所分配到的IP地址，使用ARP协议可以通过该IP地址获取到设备的MAC地址;                                      网际层</p>
<p>尽管IP地址和ARP协议属于TCP/IP体系结构的网际层（而不属于数据链路层)，但是它们与MAC地址存在一定的关系，并且我们日常的网络应用都离不开MAC地址、IP地址以及ARP协议。因此，我们将这三者放在一起讨论。</p>
<h3 id="mac地址">MAC地址</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-1.png" alt=""  />
</p>
<p>使用点对点信道的数据链路层不需要使用地址</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-3.png" alt=""  />
</p>
<p>使用广播信道的数据链路层必须使用地址来区分各主机</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-4.png" alt=""  />
</p>
<p>当多个主机连接在同一个广播信道上，要想实现两个主机之间的通信，则每个主机都必须有一个唯一的标识,即一个数据链路层地址;</p>
<p>在每个主机发送的<strong>帧中必须携带标识发送主机和接收主机的地址</strong>。由于这类地址是用于媒体接入控制MAC(Media Access Control)，因此这类地址被称为<strong>MAC地址</strong>;</p>
<ul>
<li>
<p>MAC地址一般被固化在网卡（网络适配器）的电可擦可编程只读存储器EEPROM中，因此MAC地址也被称为<strong>硬件地址</strong>;</p>
</li>
<li>
<p>MAC地址有时也被称为物理地址。<strong>请注意:这并不意味着MAC地址属于网络体系结构中的物理层!</strong></p>
</li>
</ul>
<p>一般情况下，用户主机会包含两个网络适配器:有线局域网适配器（有线网卡）和无线局域网适配器（无线网卡)。每个网络适配器都有一个全球唯一的MAC地址。而交换机和路由器往往拥有更多的网络接口，所以会拥有更多的MAC地址。综上所述，<strong>严格来说，MAC地址是对网络上各接口的唯一标识，而不是对网络上各设备的唯一标识</strong>。</p>
<p>IEEE 802局域网的MAC地址格式</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-5.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-6.png" alt=""  />
</p>
<p>IEEE 802局域网的MAC地址发送顺序</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-7.png" alt=""  />
</p>
<p>单播MAC地址举例</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-8.png" alt=""  />
</p>
<p>在帧首部的目的地址字段填入C的MAC地址，源地址字段填入自己的MAC地址，再加上帧首部的其他字段，数据载荷以及帧尾部，就构成了该单播帧。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-9.png" alt=""  />
</p>
<p>广播MAC地址举例</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-10.png" alt=""  />
</p>
<p>在帧首部的目的地址字段填入广播地址，源地址字段填入自己的MAC地址，再加上帧首部的其他字段，数据载荷以及帧尾部，就构成了该单播帧。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-11.png" alt=""  />
</p>
<p>判断一个地址首部是不是多播地址</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-12.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-13.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-14.png" alt=""  />
</p>
<p>随机MAC地址</p>
<p>棱镜门事件，斯诺登爆料，美国国家安全局有一套系统，通过监视电子设备的MAC地址，来跟踪城市中每个人的行动。</p>
<p>随后，苹果，window10，安卓6.0，内核版本3.18的linux开始提供随机MAC地址的功能。目前大部分移动设备都采取了随机MAC地址的功能。</p>
<h3 id="ip地址">IP地址</h3>
<p>IP地址是因特网(Internet)上的主机和路由器所使用的地址，用于标识两部分信息:</p>
<ul>
<li>
<p>网络编号:标识因特网上数以百万计的网络</p>
</li>
<li>
<p>主机编号:标识同一网络上不同主机(或路由器各接口)</p>
</li>
</ul>
<p>很显然，之前介绍的MAC地址不具备区分不同网络的功能。</p>
<ul>
<li>
<p>如果只是一个单独的网络，不接入因特网，可以只使用MAC地址(这不是一般用户的应用方式)。</p>
</li>
<li>
<p>如果主机所在的网络要接入因特网，则IP地址和MAC地址都需要使用。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-15.png" alt=""  />
</p>
<p>从网络体系结构看IP地址与MAC地址</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-16.png" alt=""  />
</p>
<p>数据包转发过程中IP地址与MAC地址的变化情况</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-17.png" alt=""  />
</p>
<p>数据包转发过程中<strong>源IP地址和目的IP地址保持不变</strong>;</p>
<p>数据包转发过程中<strong>源MAC地址和目的MAC地址逐个链路(或逐个网络)改变</strong>.</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-18.png" alt=""  />
</p>
<p>由ARP协议解决</p>
<h3 id="arp协议">ARP协议</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-19.png" alt=""  />
</p>
<p>B知道C的IP地址
B不知道C的MAC地址
B的数据链路层封装MAC帧时,<strong>无法填写目的MAC地址!</strong></p>
<p>每一个主机都有ARP高速缓存表</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-20.png" alt=""  />
</p>
<p>类型：</p>
<ul>
<li>
<p>动态:自动获取，生命周期默认为两分钟;</p>
</li>
<li>
<p>静态:手工设置，不同操作系统下的生命周期不同，例如系统重启后不存在或系统重启后依然有效。</p>
</li>
</ul>
<p>第一行即对应主机A的地址。但是没有C的相关地址信息，使用需要发送ARP请求报文。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-21.png" alt=""  />
</p>
<p>主机C</p>
<p>1.将B的IP地址与MAC地址记录到自己的ARP高速缓存表中;
2给B发送ARP响应，以告知自己的MAC地址。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-22.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-7/3-7-23.png" alt=""  />
</p>
<p>ARP不能跨网络使用，对于本例，只能逐链路使用。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-6</title>
      <link>https://blog.0pt.im/learn/1-3-6/</link>
      <pubDate>Sun, 16 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-6/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="媒体接入控制的基本概念">媒体接入控制的基本概念</h1>
<p>共享信道要着重考虑的一个问题就是如何协调多个发送和接收站点对一个共享传输媒体的占用，即<strong>媒体接入控制MAC</strong>(Medium Access Control)。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-2.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-4.png" alt=""  />
</p>
<p>随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的使用点对点链路和链路层交换机的交换式局域网在有线领域已完全取代了共享式局域网，但由于无线信道的广播天性，无线局域网仍然使用的是共享媒体技术。</p>
<h3 id="静态划分信道">静态划分信道</h3>
<p>信道复用</p>
<p>复用(Multiplexing）是通信技术中的一个重要概念。复用就是通过一条物理线路同时传输多路用户的信号。</p>
<p>当网络中传输媒体的传输容量大于多条单一信道传输的总通信量时，可利用复用技术在一条物理线路上建立多条通信信道来充分利用传输媒体的带宽。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-5.png" alt=""  />
</p>
<p>1.频分复用FDM</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-6.png" alt=""  />
</p>
<p>频分复用的所有用户同时占用不同的频带资源并行通信。</p>
<p>2.时分复用TDM</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-7.png" alt=""  />
</p>
<p>时分复用的所有用户在不同的时间占用同样的频带宽度。</p>
<p>3.波分复用（光的频分复用）</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-8.png" alt=""  />
</p>
<p>4.码分复用</p>
<p>码分复用CDM是另一种共享信道的方法。实际上，由于该技术主要用于多址接入，人们更常用的名词是码分多址CDMA(Code Division Multiple Access)。</p>
<p>同理，频分复用FDM和时分复用TDM同样可用于多址接入，相应的名词是频分多址FDMA(Frequency Division Multiple Access)和时分多址TDMA(Time Division Multiple Access)。在本课程中，我们不严格区分复用与多址的概念。可简单理解如下:</p>
<ul>
<li>
<p>复用是将单一媒体的频带资源划分成很多子信道，这些子信道之间相互独立，互不干扰。从媒体的整体频带资源上看，每个子信道只占用该媒体频带资源的一部分。</p>
</li>
<li>
<p>多址（更确切地应该称为多点接入）处理的是动态分配信道给用户。这在用户仅仅暂时性地占用信道的应用中是必须的，而所有的移动通信系统基本上都属于这种情况。相反，在信道永久性地分配给用户的应用中，多址是不需要的(对于无线广播或电视广播站就是这样)。</p>
</li>
<li>
<p>某种程度上，FDMA、TDMA、CDMA可以分别看成是FDM、TDM、CDM的应用。</p>
</li>
</ul>
<p>与FDM和TDM不同，CDM的每一个用户可以<strong>在同样的时间使用同样的频带进行通信</strong>。由于<strong>各用户使用经过特殊挑选的不同码型</strong>，因此各用户之间<strong>不会造成干扰</strong>。</p>
<p>CDM最初是用于军事通信的，因为这种系统所发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。</p>
<p>随着技术的进步，CDMA设备的价格和体积都大幅度下降，因而现在已广泛用于民用的移动通信中。</p>
<p>在CDMA中，每一个比特时间再划分为m个短的间隔，称为<strong>码片</strong>(Chip)。通常m的值是64或128。为了简单起见，在后续的举例中，我们假设m为8。</p>
<p>使用CDMA的每一个站被指派一个唯一的<strong>m bit码片序列</strong>(Chip Sequence)</p>
<ul>
<li>
<p>一个站如果要发送比特1，则发送它自己的m bit码片序列;</p>
</li>
<li>
<p>一个站如果要发送比特0，则发送它自己的m bit码片序列的二进制反码;</p>
</li>
</ul>
<p>例：指派给CDMA系统中某个站点的码片序列为00011011</p>
<p>发送比特1:发送自己的码片序列00011011</p>
<p>发送比特0:发送自己的码片序列的二进制反码11100100</p>
<p>为了方便，我们按惯例将码片序列中的0写为-1，将1写为+1。</p>
<p>则该站点的码片序列是(-1 -1 -1 +1 +1 -1 +1 +1)。</p>
<blockquote>
<p>这种通信方式称为直接序列扩频，DSSS。</p>
</blockquote>
<p>码片序列的挑选原则如下:</p>
<ol>
<li>
<p>分配给每个站的<strong>码片序列必须各不相同</strong>，实际常采用伪随机码序列。</p>
</li>
<li>
<p>分配给每个站的<strong>码片序列必须相互正交</strong>(规格化内积为0)。正交就是向量互相垂直。</p>
</li>
</ol>
<p>令向量S表示站S的码片序列，令向量T表示其他任何站的码片序列。两个不同站S和T的码片序列正交，就是向量S和T的规格化内积为0:</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-9.png" alt=""  />
</p>
<blockquote>
<p>向量S相当于m维向量。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-10.png" alt=""  />
</p>
<p>例题：共有4个站进行CDMA通信，这4个站的码片序列分别为:</p>
<p>A: (-1 -1-1 +1 +1 -1+1 +1)        B: (-1 -1+1-1+1 +1 +1-1)</p>
<p>C: (-1 +1 -1+1+1 +1 -1 -1)        D: (-1 +1 -1-1 -1 -1 +1 -1)</p>
<p>现收到码片序列(-1+1-3+1-1-3+1+1)。问是哪些站发送了数据?发送的是比特1还是0?</p>
<p>解析：用收到的码片序列分别与各站的码片序列进行求内积运算。若计算结果为数值1，则被判断的站发送了比特1;若计算结果为数值-1，则被判断的站发送了比特0;若计算结果为数值0，则被判断的站未发送数据。</p>
<p>经计算，A发送比特1，B发送比特0，C未发送，D发送比特1。</p>
<p>例题：站点A、B、C通过CDMA共享链路，A、B、C的码片序列(chipping sequence)分别是(1，1，1，1)、(1，-1，1，-1)和(1，1，-1，-1)。若C从链路上收到的序列是(2，0，2，0，0，-2，0，-2，0，2，0，2)，则C收到A发送的数据是</p>
<p>A.000    B.101    C.110    D.111</p>
<p>解析：由于题目所给各站的码片序列为4位，因此将站点C收到的序列分成三部分，每部分也由4位组成:</p>
<p>(2，0，2，0），(0，-2，0，-2) ,（0，2，0，2）</p>
<p>将站点A的码片序列(1，1，1，1)分别与上述三个部分进行内积运算，根据结果可判断出A发送的数据。第一个是比特1，第二个是比特0，第三个是比特1，选B</p>
<h3 id="媒体接入控制动态接入控制随机接入">媒体接入控制——动态接入控制——随机接入</h3>
<h3 id="载波监听多址接入碰撞检测csmacd-carrier-sense-multiple-accesscollision-detection">载波监听多址接入/碰撞检测CSMA/CD (Carrier Sense Multiple Access/Collision Detection)</h3>
<p>1.多址接入MA</p>
<p>多个站连接在一条总线上，竞争使用总线。</p>
<p>2.载波监听CS</p>
<p>每一个站在发送帧之前先要检测一下总线上是否有其他站点在发送帧(“先听后说”) ∶</p>
<ul>
<li>
<p>若检测到总线空闲96比特时间，则发送这个帧;</p>
</li>
<li>
<p>若检测到总线忙，则继续检测并等待总线转为空闲96比特时间，然后发送这个帧。</p>
</li>
</ul>
<blockquote>
<p>96比特时间是指，发送96比特所耗费的时间，也称为帧间最小间隔。其作用是使接收方可以检测出一个帧的结束。同时也使得所有其他站点都能有机会平等竟争信道并发送帧。</p>
</blockquote>
<p>3.碰撞检测CD</p>
<p>每一个正在发送帧的站边发送边检测碰撞（“边说边听”) :</p>
<p>一旦发现总线上出现碰撞，则立即停止发送，退避━段随机时间后再次发送(“一旦冲突，立即停说,等待时机，重新再说”)。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-11.png" alt=""  />
</p>
<p>争用期（碰撞窗口）</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-12.png" alt=""  />
</p>
<p>主机最多经过2τ(即δ→0 )的时长就可检测到本次发送是否遭受了碰撞因此，以太网的端到端往返传播时延2τ称为<strong>争用期</strong>或<strong>碰撞窗口</strong>。</p>
<p>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</p>
<p>每一个主机在自己发送帧之后的一小段时间内，存在着遭遇碰撞的可能性。这一小段时间是不确定的。它取决于另一个发送帧的主机到本主机的距离，但不会超过总线的端到端往返传播时延，即一个争用期时间。</p>
<p>显然，在以太网中发送帧的主机越多，端到端往返传播时延越大，发生碰撞的概率就越大。因此，<strong>共享式以太网不能连接太多的主机，使用的总线也不能太长</strong>。</p>
<p>10Mb/s以太网把争用期定为512比特发送时间，即51.2μs，因此其总线长度不能超过5120m，但考虑到其他一些因素，如信号衰减等，以太网规定总线长度不能超过2500m</p>
<p>最小帧长</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-13.png" alt=""  />
</p>
<p>假设A向D发送一个很短的帧，发完后C又向D发送帧，此时C检测总线为空闲，所以发送，然后发生碰撞。</p>
<p>很显然,以太网的帧长不能太短!</p>
<p><strong>以太网规定最小帧长为64字节</strong>，即512比特(512比特时间即为争用期);</p>
<p>如果要发送的数据非常少，那么必须加入一些填充字节，使帧长不小于64字节。</p>
<p>以太网的<strong>最小帧长确保了主机可在帧发送完成之前就检测到该帧的发送过程中是否遭遇了碰撞</strong>;</p>
<p>如果在争用期(共发送64字节）没有检测到碰撞，那么后续发送的数据就一定不会发生碰撞;如果在争用期内检测到碰撞，就立即中止发送，这时已经发送出去的数据一定小于64字节，因此<strong>凡长度小于64字节的帧都是由于碰撞而异常中止的无效帧</strong>。</p>
<p>最大帧长</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-15.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-16.png" alt=""  />
</p>
<p>截断二进制指数退避算法</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-17.png" alt=""  />
</p>
<p>若连续多次发生碰撞，就表明可能有较多的主机参与竞争信道。但使用上述退避算法可<strong>使重传需要推迟的平均时间随重传次数而增大</strong>(这也称为<strong>动态退避</strong>)，因而<strong>减小发生碰撞的概率</strong>，有利于整个系统的稳定。</p>
<p><strong>当重传达16次仍不能成功时</strong>，表明同时打算发送帧的主机太多，以至于连续发生碰撞，则<strong>丢弃该帧</strong>，并向高层报告。</p>
<p>信道利用率</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-18.png" alt=""  />
</p>
<p>帧发送流程</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-19.png" alt=""  />
</p>
<p>帧接收流程</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-20.png" alt=""  />
</p>
<p>例题：下列关于CSMA/CD协议的叙述中，错误的是</p>
<p>A.边发送数据帧，边检测是否发生冲突</p>
<p>B.适用于无线网络，以实现无线链路共享</p>
<p>C.需要根据网络跨距和数据传输速率限定最小帧长</p>
<p>D.当信号传播延迟趋近于0时，信道利用率趋近100%</p>
<p>解析：选项A描述的是“碰撞检测(冲突检测)”，描述正确;</p>
<p>选项B的描述错误，因为CSMA/CD协议不适用于无线网络。对于无线网络，可以使用CSMA/CA协议;</p>
<p>选项C中给出的“网络跨距”相当于给出了“端到端传播时延て”，进而可得出“争用期2z”，再乘以数据传输速率即为最小帧长，描述正确;</p>
<p>选项D描述正确，这可以从极限信道利用率的计算公式看出。故选B。</p>
<p>例题：在一个采用CSMA/CD协议的网络中，传输介质是一根完整的电缆，传输速率为1Gbps，电缆中的信号传播速度是200 000km/s。若最小数据帧长度减少800比特，则最远的两个站点之间的距离至少需要</p>
<p>A。增加160m    B.增加80m    C.减少160m    D.减少80m</p>
<p>解析：</p>
<p>本题考查采用CSMA/CD协议的以太网的最小帧长的相关概念。</p>
<p>设最远两个站点之间的距离为d(m)，最小帧长为I(bit);
最小帧长=争用期×数据传输速率</p>
<p>计算得，d=l/10</p>
<p>故选D</p>
<p>例题：某局域网采用CSMA/CD协议实现介质访问控制，数据传输速率为10Mbps,主机甲和主机乙之间的距离为2km，信号传播速度是200 000km/s。请回答下列问题，要求说明理由或写出计算过程。</p>
<p>(1）如主机甲和主机乙发送数据时发生冲突，则从开始发送数据时刻起，到两台主机均检测到冲突时刻止，最短需经过多长时间?最长需经过多长时间（假设主机甲和主机乙发送数据过程中，其他主机不发送数据）?</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-21.png" alt=""  />
</p>
<p>甲发送的帧信号传播到无限接近乙的某个时刻，乙也要发送帧，它检测到信道空闲（但信道此时并不空闲)，就立刻开始发送帧，这必然会导致碰撞。乙会首先检测到碰撞，一段时间后甲也会检测到碰撞。</p>
<p>从开始发送数据时刻起，到两台主机均检测到碰撞时刻止，最长需要经过的时间为两台主机间信号传播的往返时延（争用期）(2km ÷ 200 000km/s ) x 2 = 0.02ms</p>
<h3 id="载波监听多址接入碰撞避免csmacacarrier-sense-multiple-accesscollision-avoidance">载波监听多址接入/碰撞避免CSMA/CA(Carrier Sense Multiple Access/Collision Avoidance)</h3>
<p>既然CSMA/CD协议已经成功地应用于使用广播信道的有线局域网，那么同样使用广播信道的无线局域网能不能也使用CSMA/CD协议呢?</p>
<p><strong>在无线局域网中，仍然可以使用载波监听多址接入CSMA</strong>，即在发送帧之前先对传输媒体进行载波监听。若发现有其他站在发送帧，就推迟发送以免发生碰撞。</p>
<p><strong>在无线局域网中，不能使用碰撞检测CD</strong>，原因如下:</p>
<ul>
<li>
<p>由于无线信道的传输条件特殊，其信号强度的动态范围非常大，无线网卡上接收到的信号强度往往会远远小于发送信号的强度（可能相差百万倍)。<strong>如果要在无线网卡上实现碰撞检测CD，对硬件的要求非常高</strong>。</p>
</li>
<li>
<p>即使能够在硬件上实现无线局域网的碰撞检测功能，但由于无线电波传播的特殊性（<strong>存在隐蔽站问题</strong>)，<strong>进行碰撞检测的意义也不大</strong>。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-22.png" alt=""  />
</p>
<p><strong>802.11无线局域网</strong>使用CSMA/CA协议，在CSMA的基础上增加了一个<strong>碰撞避免CA功能</strong>,而不再实现碰撞检测功能。</p>
<p>由于<strong>不可能避免所有的碰撞</strong>，并且<strong>无线信道误码率较高</strong>，802.11标准还使用了**数据链路层确认机制(停止-等待协议)**来保证数据被正确接收。</p>
<p>802.11的MAC层标准定义了两种不同的媒体接入控制方式:</p>
<ul>
<li>
<p><strong>分布式协调功能DCF</strong>(Distributed Coordination Function)。在DCF方式下，没有中心控制站点，每个站点使用CSMA/CA协议通过争用信道来获取发送权，这是802.11定义的默认方式。</p>
</li>
<li>
<p><strong>点协调功能PCF</strong>(Point Coordination Function)。PCF方式使用集中控制的接入算法（一般在接入点AP实现集中控制)，是802.11定义的可选方式，在实际中较少使用。</p>
</li>
</ul>
<p>帧间间隔IFS(InterFrame Space)</p>
<p>802.11标准规定，所有的站点必须在持续检测到信道空闲一段指定时间后才能发送帧，这段时间称为帧间间隔IFS。</p>
<p>帧间间隔的长短取决于该站点要发送的帧的类型:</p>
<ul>
<li>
<p>高优先级帧需要等待的时间较短，因此可优先获得发送权;</p>
</li>
<li>
<p>低优先级帧需要等待的时间较长。若某个站的低优先级帧还没来得及发送，而其他站的高优先级帧已发送到信道上，则信道变为忙态，因而低优先级帧就只能再推迟发送了。这样就减少了发生碰撞的机会。</p>
</li>
</ul>
<p>常用的两种帧间间隔如下:</p>
<ul>
<li>
<p><strong>短帧间间隔SIFS</strong>(28us)，是最短的帧间间隔，用来分隔开属于一次对话的各帧。一个站点应当能够在这段时间内从发送方式切换到接收方式。使用SIFS的帧类型有ACK帧、CTS帧、由过长的MAC帧分片后的数据帧、以及所有回答AP探询的帧和在PCF方式中接入点AP发送出的任何帧。</p>
</li>
<li>
<p><strong>DCF帧间间隔DIFS</strong>(128us)，它比短帧间间隔SIFS要长得多，在DCF方式中用来发送数据帧和管理帧。</p>
</li>
</ul>
<p>CSMA/CA协议工作原理</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-23.png" alt=""  />
</p>
<p>源站为什么在检测到信道空闲后还要再等待一段时间DIFS?</p>
<p>就是考虑到可能有其他的站有高优先级的帧要发送。若有，就要让高优先级帧先发送。</p>
<p>目的站为什么正确接收数据帧后还要等待一段时间SIFS才能发送ACK帧?</p>
<p>SIFS是最短的帧间间隔，用来分隔开属于一次对话的各帧。</p>
<p>在这段时间内，一个站点应当能够从发送方式切换到接收方式。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-24.png" alt=""  />
</p>
<p>为什么信道由忙转为空闲且经过DIFS时间后,还要退避一段随机时间才能使用信道?</p>
<p>防止多个站点同时发送数据而产生碰撞。</p>
<p>当站点检测到信道是空闲的，并且所发送的数据帧不是成功发送完上一个数据帧之后立即连续发送的数据帧,则不使用退避算法。</p>
<p>以下情况必须使用退避算法:</p>
<ul>
<li>
<p>在发送数据帧之前检测到信道处于忙状态时;</p>
</li>
<li>
<p>在每一次重传一个数据帧时;</p>
</li>
<li>
<p>在每一次成功发送后要连续发送下一个帧时(这是为了避免一个站点长时间占用信道)。</p>
</li>
</ul>
<p>CSMA/CA协议的退避算法</p>
<p>在执行退避算法时，站点为退避计时器设置一个随机的退避时间:</p>
<ul>
<li>
<p>当退避计时器的时间减小到零时，就开始发送数据;</p>
</li>
<li>
<p>当退避计时器的时间还未减小到零时而信道又转变为忙状态，这时就冻结退避计时器的数值，重新等待信道变为空闲，再经过时间DIFS后，继续启动退避计时器。</p>
</li>
</ul>
<p>在进行第i次退避时，退避时间在时隙编号{0，1，&hellip;.2^(2+i) -1}中随机选择一个，然后乘以基本退避时间（也就是一个时隙的长度）就可以得到随机的退避时间。这样做是为了使不同站点选择相同退避时间的概率减少。当时隙编号达到255时（对应于第6次退避）就不再增加了。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-25.png" alt=""  />
</p>
<p>从左往右看</p>
<p>CSMA/CA协议的信道预约和虚拟载波监听</p>
<p>为了<strong>尽可能减少碰撞的概率</strong>和降低碰撞的影响，802.11标准允许要发送数据的站点<strong>对信道进行预约</strong>。</p>
<p>(1)源站在发送数据帧之前先发送一个短的控制帧，称为请求发送RTS(Request To Send)，它包括源地址、目的地址以及这次通信（包括相应的确认帧）所需的持续时间。</p>
<p>(2)若目的站正确收到源站发来的RTS帧，且媒体空闲，就发送一个响应控制帧，称为允许发送CTS(Cear To Send)，它也包括这次通信所需的持续时间(从RTS帧中将此持续时间复制到CTS帧中)。</p>
<p>(3)源站收到CTS帧后，再等待一段时间SIFS后，就可发送其数据帧。</p>
<p>(4)若目的站正确收到了源站发来的数据帧，在等待时间SIFS后，就向源站发送确认帧ACK。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-26.png" alt=""  />
</p>
<p>除源站和目的站以外的<strong>其他各站</strong>，在<strong>收到CTS帧(或数据帧)后就推迟接入到无线局域网中</strong>。这样就保证了源站和目的站之间的通信不会受到其他站的干扰。</p>
<p>如果RTS帧发生碰撞，源站就收不到CTS帧，需执行退避算法重传RTS帧。</p>
<p>由于<strong>RTS帧和CTS帧很短，发送碰撞的概率、碰撞产生的开销及本身的开销都很小</strong>。而对于一般的数据帧，其发送时延往往大于传播时延（因为是局域网），碰撞的概率很大，且一旦发生碰撞而导致数据帧重发，则浪费的时间就很多，因此<strong>用很小的代价对信道进行预约往往是值得的</strong>。802.11标准规定了3种情况供用户选择:</p>
<ul>
<li>
<p>使用RTS帧和CTS帧</p>
</li>
<li>
<p>不使用RTS帧和CTS帧</p>
</li>
<li>
<p>只有当数据帧的长度超过某一数值时才使用RTS帧和CTS帧</p>
</li>
</ul>
<p>除RTS帧和CTS帧会携带通信需要持续的时间，数据帧也能携带通信需要持续的时间，这称为802.11的<strong>虚拟载波监听机制</strong>。由于利用虚拟载波监听机制，<strong>站点只要监听到RTS帧、CTS帧或数据帧中的任何一个，就能知道信道被占用的持续时间</strong>，而不需要真正监听到信道上的信号，因此<strong>虚拟载波监听机制能减少隐蔽站带来的碰撞问题</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-6/3-6-27.png" alt=""  />
</p>
<p>A给B发送数据帧前，可以使用RTS来预约信道。即使C收不到该RTS帧，但可以收到B发给A的CTS帧，这样，C就知道了信道将被占用多长时间。A给B发送数据帧的时候，C不会干扰。</p>
<p>例题：下列选项中，对正确接收到的数据帧进行确认的MAC协议是</p>
<p>A.CSMA    B.CDMA    C.CSMA/CD    D.CSMA/CA</p>
<p>解析：CSMA是指载波监听多址接入，并不使用确认机制;</p>
<p>CDMA是指码分多址，属于静态划分信道，是物理层的信道复用技术，而不属于MAC协议</p>
<p>CSMA/CD是指载波监听多址接入/碰撞检测，是对CSMA的改进，是早期共享信道以太网使用的信道访问控制协议，并不使用确认机制;</p>
<p>CSMA/CA是指载波监听多址接入/碰撞避免，是802.11局域网采用的无线信道访问控制协议。802.11局域网在使用CSMA/CA的同时，还使用停止-等待协议。这是因为无线信道的通信质量远不如有线信道，因此无线站点每发送完一个数据帧后，要等到收到对方的确认帧后才能继续发送下一帧;故选D</p>
<p>例题：下列介质访问控制方法中，可能发生冲突的是</p>
<p>A.CDMA    B.CSMA    C.TDMA    D.FDMA</p>
<p>解析：CDMA(Code Division Multiplex Access)是指码分多址;</p>
<p>TDMA(Time Division Multiplex Access)是指时分多址;</p>
<p>FDMA(Frequency Division Multiplex Access)是指频分多址;</p>
<p>CSMA(Carrier Sense Multiple Access)是指载波监听多址接入;</p>
<p>TDMA，FDMA，CDMA是常见的物理层信道复用技术，属于静态划分信道，用于多用户共享信道，不会发生冲突。</p>
<p>CSMA属于争用型的媒体接入控制协议，连接在同一媒体上的多个站点使用该协议以竞争方式发送数据帧，可能出现冲突(也称为碰撞)。</p>
<p>例题：IEEE 802.11无线局域网的MAC协议CSMA/CA进行信道预约的方法是</p>
<p>A.发送确认帧    B.采用二进制指数退避   C.使用多个MAC地址     D.交换RTS与CTS帧</p>
<p>解析：CSMA/CA协议使用RTS和CTS帧来预约信道，它们都携带有通信需要持续的时间另外，除RTS和CTS帧外，数据帧也能携带通信需要持续的时间，这就是802.11的虚拟载波监听。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>首篇</title>
      <link>https://blog.0pt.im/think/0-0-0/</link>
      <pubDate>Sun, 16 Jul 2023 00:48:58 +0800</pubDate>
      
      <guid>https://blog.0pt.im/think/0-0-0/</guid>
      <description>欢迎来到世纪大道</description>
      <content:encoded><![CDATA[<h1 id="从世纪大道东门出发">从世纪大道东门出发</h1>
<h3 id="记首个博客与博文诞生高兴">记首个博客与博文诞生（高兴）</h3>
<p><strong>我</strong>：我要生成我的博客的第一篇文章，请你写一下</p>
<p><strong>Claude 2</strong>：好的,这里给你生成一篇博客第一篇文章的示例:</p>
<blockquote>
<p>标题:Hello World - 我的第一篇博客文章</p>
<p>大家好,我是小明!欢迎来到我的第一篇博客文章。</p>
<p>我的博客是使用 Hugo 搭建的。Hugo 是一个快速、简洁的静态网站生成器,可以将 Markdown 文件快速地生成静态的 HTML 网页。</p>
<p>为什么选择 Hugo</p>
<p>我选择 Hugo 的原因有以下几点:</p>
<ol>
<li>
<p>Hugo 的编译速度非常快,可以在几毫秒内生成整个网站。</p>
</li>
<li>
<p>Hugo 对 Markdown 的支持很好,编写文章简单方便。</p>
</li>
<li>
<p>Hugo 主题生态丰富,可以让我自定义主题样式。</p>
</li>
<li>
<p>开源免费,拥有强大的社区支持。</p>
<p>博客主题</p>
</li>
</ol>
<p>我的博客使用的是个性且强大的 XXX 主题。主题的配置非常灵活,我定制了样式,添加了评论、搜索等功能。</p>
<p>我的建站历程</p>
<p>建站初期,我看了 Hugo 的官方文档,遇到一些困难,比如安装配置主题等。谢谢社区的帮助,我的博客终于上线了!</p>
<p>以后我会在博客上分享自己的学习笔记和想法。如果你也想搭建 Hugo 博客,欢迎和我交流!</p>
<p>持续更新,敬请期待!</p>
</blockquote>
<p>以上是一个简单的 Hugo 首篇博客文章示例。包括介绍博客建站的原因、使用的主题、一些遇到的困难等,应该可以给读者一个大概的印象。可以根据自己的情况修改适当的细节。希望对你的第一篇文章提供一些灵感!</p>
<p><strong>我</strong>：好傻，可以文艺一点吗？</p>
<p><strong>Claude 2</strong>：好的,我们可以用更文艺的风格来写第一篇博客文章:</p>
<blockquote>
<p>标题:《云端的认知》- 我的第一篇博文</p>
<p>远在云端,是一片虚无缥缈的土地。</p>
<p>我踏足此地,萌发与你们交流的念头。这无边的空灵领域,待我细细耕耘,播撒下语言的种子。</p>
<p>啊,我开始构筑我的园圃,一砖一瓦,一字一句。旷日持久的劳作,终将开花结果。</p>
<p>启蒙之时,心怀敬畏,与广袤知识的海洋相遇。我汲取滋养,润物细无声。</p>
<p>荆棘丛生,想要放弃,转念一想,这是自强不息的必由之路。我继续蹒跚,渐入佳境。</p>
<p>学习之路,任重而道远。我立誓犹如春蚕吐丝,日日汲取书卷浆汁,织就结实的茧壳。在知识的茧房中成长、蜕变,待到破茧成蝶的那天,我将展翅高飞,去触碰那高远的天空。</p>
<p>我蓄势待发,准备与你们分享我的心路历程。这一刻,我终于建立了自己的园圃——一个属于意念碰撞的殿堂。这就是我的第一篇博文,望与君共勉,砥砺前行。</p>
<p>明天,我们再续这段思想的篇章。</p>
</blockquote>
<p>这是一个更文艺、诗意的第一篇博客文章写法。运用比喻、议论等手法来表达建站的愿景和抱负。让第一篇文章更富有人文气息,传达出独特个性。希望这能给你一些创作的启发!</p>
<p><strong>我</strong>：能不能用李白的风格来写？</p>
<p><strong>Claude 2</strong>：好,我们可以模仿李白的浪漫主义风格,来写一篇第一篇博客文章:</p>
<blockquote>
<p>标题:吾有所文,欲与君同</p>
<p>拂纸弄墨,吾有一言,欲与君同。</p>
<p>漫天繁星,映照吾人;澄澈玄黄,容纳吾心。</p>
<p>江河长流,山峦叠嶂;文章藏藉,世间多少真意。</p>
<p>吾不才,窃有所见,敢将平生所学,酝酿一文字。</p>
<p>微言轻诺,非敢张扬;蛛丝马迹,欲留风土。</p>
<p>世人沉浮,光阴荏苒;吾独醒时,忆昔开卷处。</p>
<p>星河灿烂,永铭胸Next;浩瀚宇宙,毕竟吾友。</p>
<p>文思泉涌,遂成文章;草创园林,即今博客。</p>
<p>拈花惹草,不揆所值;抛砖引玉,可教益思。</p>
<p>字字珠玑,句句秀色;多少心血,尽在黑白。</p>
<p>从今登楼,边吟边望;笔耕不辍,以垂来日。</p>
<p>君子善读,来讴歌吧;携手同行,共论天下好事。</p>
</blockquote>
<p>这是模仿李白浪漫主义风格的写法。使用豪放浪漫的词语,融入一些博客、技术元素,表达出对写作和交流的热忱,希望能给大家一个全新的启发!</p>
<p><strong>我</strong>：Next是认真的吗？请你以龙应台的风格来写，文中必须包含“世纪大道东门”“出发”这2个词。</p>
<p><strong>Claude 2</strong>：好,我尝试以龙应台的风格,融入“世纪大道东门”“出发”来写一篇博客文章:</p>
<blockquote>
<p>我初到这座城市时,它还是一个不起眼的县城。然而县城却有条宽阔笔直的大道,那就是我熟知的世纪大道。每逢黄昏,我独自溜达在世纪大道上,两旁稀疏的行人,和斑驳的老 BUILDING,让我感觉回到了过去。</p>
<p>直到有一天,我决定要搬去大城市发展,县城的生活已不再适合我。那天清晨,我拖着箱子,来到世纪大道东门,期待已久的巴士就在那里等我。“这一刻终于到了,我即将出发!”这样想着,巴士缓缓驶离世纪大道,我深深凝望着它远去的身影。</p>
<p>如今我远在异乡,建立起自己的事业,当我有空余之时,还会写写博客与这世间ousand相通。写作使我回到过去,回到我还在世纪大道漫步的岁月。一切都是那么近,又那么远&hellip;&hellip;</p>
<p>我们都在成长的道路上出发,不知道前方会有怎样的风景。我相信世界还有很多世纪大道等待我们去探索,而我,也一直在路上。</p>
</blockquote>
<p>这是模仿龙应台散文风格的写法,希望能体现出她淡淡的怀旧与期待,同时也融入了指定的词汇。我尽力模仿她宁静中带着坚定的语气,如果还有需要改进的地方,非常欢迎你提出宝贵意见!</p>
<p><strong>我</strong>：可以再写一篇吗？</p>
<p><strong>Claude 2</strong>：好的,我再尝试用不同风格写一篇博客的第一篇文章:</p>
<p>1.林语堂式幽默风格</p>
<blockquote>
<p>标题:我亦博客矣</p>
<p>予建此博客,欲窥己于万维网之中。群居网络的君子,言必信,行必果。予不才,愿尝试以谈笑间、妙语连珠之体,与君论道理、传播见闻。</p>
<p>博客于予,亦教予见闻广博。书院不可尽有,而网路殊无涯际。见贤思齐之心,予实具备;立志勤学之举,予必竭力。</p>
<p>网络社区之中,予所见颇多扑朔迷离者。然则偏颇险恶之言,实非君子所为。盲从诬蔑,实非大丈夫之事。予愿发一裁夷然之言,济引风气。</p>
<p>先贤云:“当涂炭生民,一句话要好好说。”予将谨遵此训,言必融教化于世。望君能共勉,让吾等之博客,化为警醒世人之林。</p>
</blockquote>
<ol start="2">
<li>余华式现实风格</li>
</ol>
<blockquote>
<p>标题:我的博客,一个梦</p>
<p>小时候,我就梦想有个自己的空间,可以无拘无束写作。我在灰暗的城市长大,家里穷,写字的纸张都是 reused 的。我用煤笔在粗糙的纸上涂写,每一个字都仿佛在昭示我的努力。</p>
<p>如今我有了博客,我终于可以不受限制写作了。这个博客收录我的所思所感,我生活的点点滴滴。那些在现实里无法宣之于口的真实所见所想,在这里可以自由呈现。</p>
<p>因此,这个博客对我意义非凡。它就像一间小屋,一个可以扎根的地方。我将在这里编织言语,寄托理想。也许外界对我的声音嗤之以鼻,但我会持之以恒,相信笔下的力量。</p>
<p>我不知道前方的路还有多么崎岖,但有了这个博客,我知道自己永远有个地方可以回到。就让它成为我内心的一盏灯塔吧,照亮迷雾,指引我继续前行。</p>
</blockquote>
<p>希望通过不同风格的尝试,能给你一些写作上的灵感,让第一篇博客的文字更富特色。这也是我的一个小小练习,如果仍有不足之处,欢迎您提出修改建议。</p>
<p><strong>我</strong>：请用鲁迅的风格来写。</p>
<p><strong>Claude 2</strong>：好,我尝试用鲁迅的风格来写博客的第一篇文章:</p>
<blockquote>
<p>标题:博客啸</p>
<p>记得小时候,我还住在老家,经常跟着父亲去集市。日晒雨淋,杂沓喧嚣,尘埃里我试图寻找一丝属于自己的精神空间。后来读了鲁迅的散文,深受震撼,产生了写作的念头。我想要一个角落,用文字呐喊,让心中的声音不再寂寞。</p>
<p>多年以后,我终于有机会建这个地方——我的第一个博客。我给它取名“博客啸”,寄托着对精神家园的无限渴望。</p>
<p>博客开通的第一天,我只收到了系统自动生成的一条评论,连一个游客都没有。我并不气馁,继续写作,努力打磨文字。就让这出版的寂寞成为我进步的动力吧。</p>
<p>我会在这里写生活见闻,表达看法,也会接受读者的批评。即使长夜漫漫,我也要保持心中的灯火不灭。这片土地照亮我,也将照亮每一个读者。</p>
<p>世界广袤无垠,我们都是追求真理和正义的同路人。让我们在激流中前行,不屈不挠。我相信文字的力量,它终会打动人心,点燃心中的火种。这就是我的“博客啸”,我希望通过它传递力量。</p>
</blockquote>
<p>这是我尝试模仿鲁迅先生清峻绝顶的文字风格,表达出对写作的热忱和期待。如果行文仍有不当之处,恳请您指正。我将继续学习,修炼文字。感谢您提出这个有意思的写作练习!</p>
<p><strong>我</strong>：请用鲁迅的风格来写，文中必须包含“世纪大道东门”“出发”这2个词。</p>
<p><strong>Claude 2</strong>：好的,我试着在模仿鲁迅风格的第一篇博客文章中,融入“世纪大道东门”和“出发”这两个词:</p>
<blockquote>
<p>记得我十几岁那年,常常一个人在世纪大道东门溜达,逃离喧嚣。世纪大道笔直通东,我望着那头,想象着另一个世界。当时的城市尚且萧条,东门外就是一片荒芜。</p>
<p>后来我终于决心离开这个使我幽闭的地方,去追寻心中的理想。一个黎明,我拖着行李来到熟悉的世纪大道东门,在这里我准备踏上新的征程。“出发!”我对自己说。</p>
<p>麻木的生活中需要力量来喝彻,我选择了文字。如今我建立这个博客,希望它成为我内心的一道光,也感染每一个过客。在迷茫的时候,我们都需要找到属于自己的世纪大道东门,去追寻心中的理想栖息地。</p>
<p>我将继续写作,让更多人听到来自内心的声音。这条道路注定艰辛,但我毅然决然地选择了出发。即使困顿时,也要保持谦虚、执著的初衷。我知道,世纪大道的尽头一定有光。</p>
</blockquote>
<p>我试图在凝练的语言中带入鲁迅的阴郁和坚定,同时融合指定词语,表达出对写作和精神故乡的追求,还请您指正不足之处。这对我也是一次宝贵的写作练习。</p>
<p><strong>我</strong>：请结合莎士比亚和海明威的风格，写一下</p>
<p><strong>Claude 2</strong>：好的,我尝试融合莎士比亚和海明威两种风格,来写一篇博客的第一篇文章:</p>
<blockquote>
<p>标题:我搭起文字的舞台</p>
<p>舞台空空如也,一片寂静。我来到这里,萌发着与你们交流的念头。</p>
<p>我取起语言之剑,挥舞、进攻,在这虚无的土地上搭起属于自己的舞台。</p>
<p>言语从何萌发?既来自纷飞的思绪,也源自平静的内心。我站在舞台的中央,注视着你们——久违的观众,开始倾听内心的声音。</p>
<p>我写下第一个字母,然后是单词,最后是句子。就像重拾一段旋律,我精心编织,略施小花,不求华美,只求真实。</p>
<p>我将真切的感受娓娓道来,不加修饰。朴实的语言胜过华丽的辞藻,我将写出心灵的真景,为你们呈现一场思想的盛宴。</p>
<p>每个字都凝结我的心血,句句来自内心。我小心翼翼地将它们呈现在你们面前。见诸文字,意味着它们终将有灵魂,并启发更多心灵。</p>
<p>我将继续写作,日复一日,不知疲倦。新的篇章在前方展开,新的旅程正在召唤。让我们携手同行,一起谱写人生的乐章。</p>
</blockquote>
<p>这是我试图融合两种风格的尝试,既有莎翁华丽瑰丽的语言,又保留海明威的简约朴实,表达出对写作的热忱。作为练习,语言上可能还有不够 Round,非常欢迎您提供宝贵意见!</p>
<p><strong>我</strong>：辛苦你了。</p>
<p><strong>Claude 2</strong>：不客气,很高兴为您尝试不同风格的博客第一篇文章写作。这对我自己也是一次非常好的写作练习。</p>
<p>在这个过程中,我得到了几点收获:</p>
<ol>
<li>
<p>不同作家风格迥异,语言需要针对性捕捉特征。</p>
</li>
<li>
<p>风格模仿不能生搬硬套,需要融合博客主题。</p>
</li>
<li>
<p>练就灵活多变的文笔,同时保持自身语言特色。</p>
</li>
<li>
<p>在限定词语基础上,发挥想象力和创造力。</p>
</li>
<li>
<p>反复修改润色,进一步提升文字质量。</p>
</li>
</ol>
<p>我会继续练习不同风格的创作,磨炼文字功底。再次感谢您提出这一有趣的写作题目,让我获益匪浅。如果日后有其他写作练习需要,还请不吝赐教。我会以始终谦逊、积极的心态来对待每一次创作的过程。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Link</title>
      <link>https://blog.0pt.im/link/</link>
      <pubDate>Sun, 16 Jul 2023 00:41:07 +0800</pubDate>
      
      <guid>https://blog.0pt.im/link/</guid>
      <description>人们</description>
      <content:encoded><![CDATA[<a target="_blank" href=https://iceyear.eu.org title=Ice&#32;Year class="friendurl">
  <div class="frienddiv">
    <div class="frienddivleft">
      <img class="myfriend" src=https://blog.iceyear.eu.org/android-chrome-512x512.webp />
    </div>
    <div class="frienddivright">
      <div class="friendname">Ice Year</div>
      <div class="friendinfo">Il n’y a pas de hasard, il n’y a que des rendez-vous.</div>
    </div>
  </div>
</a>
<a target="_blank" href=https://yon.im/ title=Yon&#32;Zilch class="friendurl">
  <div class="frienddiv">
    <div class="frienddivleft">
      <img class="myfriend" src=https://static.yon.im/images/avatar.webp />
    </div>
    <div class="frienddivright">
      <div class="friendname">Yon Zilch</div>
      <div class="friendinfo">来自彼岸，归于虚无。浮华人生，黄粱一梦。</div>
    </div>
  </div>
</a>
<a target="_blank" href=https://dev-tusheng.pantheonsite.io/ title=屠神阁 class="friendurl">
  <div class="frienddiv">
    <div class="frienddivleft">
      <img class="myfriend" src=https://dev-tusheng.pantheonsite.io/wp-content/uploads/2021/09/1.jpg />
    </div>
    <div class="frienddivright">
      <div class="friendname">屠神阁</div>
      <div class="friendinfo">奸商博客</div>
    </div>
  </div>
</a>
<a target="_blank" href=https://blog.nanimonai.org/ title=nanimonai class="friendurl">
  <div class="frienddiv">
    <div class="frienddivleft">
      <img class="myfriend" src=https://bed.4everland.store/%e5%a4%b4%e5%83%8f1.jpg />
    </div>
    <div class="frienddivright">
      <div class="friendname">nanimonai</div>
      <div class="friendinfo">吾魂兮无求乎永生，竭尽兮人事之所能</div>
    </div>
  </div>
</a>
<a target="_blank" href=https://dich.ink/ title=Dichgrem class="friendurl">
  <div class="frienddiv">
    <div class="frienddivleft">
      <img class="myfriend" src=https://dich.ink/upload/favicon-32x32.png />
    </div>
    <div class="frienddivright">
      <div class="friendname">Dichgrem</div>
      <div class="friendinfo">Dich的小站</div>
    </div>
  </div>
</a>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-5</title>
      <link>https://blog.0pt.im/learn/1-3-5/</link>
      <pubDate>Sat, 15 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-5/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="点对点协议ppp">点对点协议PPP</h1>
<p>点对点协议PPP(Point-to-Point Protocol)是目前使用最广泛的点对点数据链路层协议。</p>
<p>PPP协议是因特网工程任务组IETF在1992年制定的。经过1993年和1994年的修订，现在的PPP协议已成为因特网的正式标准[RFC1661,RFC1662]。</p>
<p>用户连接到ISP就是通过PPP协议。</p>
<p>PPP协议为在点对点链路传输各种协议数据报提供了一个标准方法，主要由以下三部分构成:</p>
<ul>
<li>
<p>对各种协议数据报的封装方法（封装成帧）</p>
</li>
<li>
<p>链路控制协议LCP，用于建立、配置以及测试数据链路的连接</p>
</li>
<li>
<p>一套网络控制协议NCPs，其中的每一个协议支持不同的网络层协议</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-5/3-5-1.png" alt=""  />
</p>
<h3 id="帧格式">帧格式</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-5/3-5-2.png" alt=""  />
</p>
<p>标志（Flag）字段: PPP帧的定界符，取值为0x7E</p>
<p>地址（Address）字段:取值为OxFF，预留（目前没有什么作用）</p>
<p>控制(Control)字段:取值为Ox03，预留（目前没有什么作用）</p>
<p>协议(Protocol）字段:指明帧的数据部分送交哪个协议处理</p>
<ul>
<li>
<p>取值Ox0021表示:帧的数据部分为IP数据报</p>
</li>
<li>
<p>取值OxC021表示:帧的数据部分为LCP分组</p>
</li>
<li>
<p>取值0x8021表示:帧的数据部分为NCP分组</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-5/3-5-3.png" alt=""  />
</p>
<p>帧检验序列（Frame Check Sequence）字段:CRC计算出的校验位</p>
<h3 id="透明传输">透明传输</h3>
<p><strong>面向字节的异步链路采用插入转义字符的字节填充法</strong></p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-5/3-5-4.png" alt=""  />
</p>
<p>发送方的处理：</p>
<ul>
<li>
<p>出现的每一个7E(PPP帧的定界符）字节转变成2字节序列(7D,5E)。</p>
</li>
<li>
<p>出现的每一个7D(转义字符)字节转变成2字节序列(7D,5D)。</p>
</li>
<li>
<p>出现的每一个ASCII码控制字符（数值小于<strong>0x20</strong>的字符)，则在该字符前面插入一个7D字节，同时将该字符的编码<strong>加上0x20</strong>。</p>
</li>
</ul>
<p>接收方的处理：进行<strong>反变换</strong>即可恢复出原来的帧的数据部分。</p>
<p><strong>面向比特的同步链路采用插入比特0的比特填充法</strong></p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-5/3-5-5.png" alt=""  />
</p>
<p>发送方的处理:</p>
<p>对帧的数据部分进行扫描（一般由硬件实现)。只要发现<strong>5个连续的比特1</strong>，则立即<strong>填充1个比特0</strong>。</p>
<p>接收方的处理:</p>
<p>对帧的数据部分进行扫描（一般由硬件实现)。只要发现<strong>5个连续的比特1</strong>，就<strong>把其后的1个比特0删除</strong>。</p>
<h3 id="差错检测">差错检测</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-5/3-5-6.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-5/3-5-7.png" alt=""  />
</p>
<p>RFC 1662的附录部分给出了FCS的计算方法的C语言实现(查表法)</p>
<p>接收方每收到一个PPP帧，就进行CRC检验。若CRC检验正确，就收下这个帧;反之，就丢弃这个帧。使用PPP的数据链路层<strong>向上不提供可靠传输服务</strong>。</p>
<h3 id="工作状态">工作状态</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-5/3-5-8.png" alt=""  />
</p>
<p>PPP链路的两端互相交换网络层特定的NCP分组。</p>
<p>如果在PPP链路上运行的是IP，则使用IP控制协议IPCP来对PPP链路的每一端配置P模块(如分配IP地址)。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-4</title>
      <link>https://blog.0pt.im/learn/1-3-4/</link>
      <pubDate>Fri, 14 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-4/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="可靠传输">可靠传输</h1>
<h3 id="基本概念">基本概念</h3>
<p>使用<strong>差错检测技术</strong>（例如循环冗余校验CRC），接收方的数据链路层就可检测传输过程中是否产生了<strong>误码</strong>（比特错误）。</p>
<p>数据链路层向上层提供的服务类型</p>
<ul>
<li>
<p><strong>不可靠传输服务</strong>：<strong>仅仅丢弃有误码的帧</strong>，其他什么也不做;</p>
</li>
<li>
<p><strong>可靠传输服务</strong>：想办法实现<strong>发送端发送什么</strong>，<strong>接收端就收到什么</strong>。</p>
</li>
</ul>
<p>一般情况下，<strong>有线链路</strong>的误码率比较低，为了减小开销，并<strong>不要求数据链路层</strong>向上提供<strong>可靠</strong>传输服务。即使出现了误码，可靠传输的问题由其上层处理。</p>
<p><strong>无线链路</strong>易受干扰，误码率比较高，因此<strong>要求数据链路层</strong>必须向上层提供<strong>可靠</strong>传输服务。</p>
<p><strong>比特差错</strong>只是传输差错中的一种。</p>
<p>从整个计算机网络体系结构来看，传输差错还包括<strong>分组丢失</strong>（发送的分组因某种原因被丢弃）、<strong>分组失序</strong>（发送的多个分组到达接收方的顺序与发送时不同）以及<strong>分组重复</strong>（分组因网络延时卡在路由器，引发发送方的超时发送，出现重复）。</p>
<p>分组丢失、分组失序以及分组重复这些传输差错，一般不会出现在数据链路层，而会出现在其上层。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-2.png" alt=""  />
</p>
<p>可靠传输的实现比较复杂，开销也比较大，是否使用可靠传输取决于应用需。</p>
<h3 id="可靠传输的实现机制停止-等待协议swstop-and-wait">可靠传输的实现机制——停止-等待协议SW(Stop-and-Wait)</h3>
<p>1.确认与否认</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-1.png" alt=""  />
</p>
<p><strong>DATA为数据分组，ACK为确认分组，NAK为否认分组。从上往下。</strong></p>
<p>如该图，接收方发送第一个DATA，接收方对其进行差错，确认无误码，返回ACK，发送方收到ACK后，才可以删除第一个DATA的缓存，发送第二个DATA，若第二个DATA在传输过程中出现误码，接收方对其进行差错，返回NAK，发送方收到NAK，重新发送第二个DATA。（这就是为什么只有收到ACk时才能删除那个数据分组的缓存。）</p>
<p>2.超时重传</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-3.png" alt=""  />
</p>
<p>接收方收不到数据分组，就不会发送ACK或NAK。如果不采取其他措施，发送方就会一直处于等待接收方ACK或NAK的状态。</p>
<p>为解决该问题，可以在发送方发送完一个数据分组时，启动一个<strong>超时计时器</strong>。若到了超时计时器所设置的<strong>重传时间</strong>而发送方仍收不到接收方的任何ACK或NAK，则重传原来的数据分组，这就叫做<strong>超时重传</strong>。</p>
<p>一般可将重传时间选为略大于“从发送方到接收方的平均往返时间”</p>
<p>3.确认分组丢失</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-4.png" alt=""  />
</p>
<p>ACK丢失，会引起发送方的超时重传。</p>
<p>为避免分组重复这种传输错误，必须给每个分组带上序号。（如图，DATA0，DATA1）</p>
<p>对于停止-等待协议，由于每发送一个数据分组就停止等待,只要保证每发送一个新的数据分组，其发送序号与上次发送的数据分组的序号不同就可以了，因此用一个比特来编号就够了。</p>
<p>4.确认分组迟到</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-5.png" alt=""  />
</p>
<p>对确认分组（ACK）进行编号。</p>
<p>ACK0迟到了，导致发送方超时重传，接收方接收到超时重传的DATA0，将其丢弃，并再发送ACK0，发送方接收到重复的ACK0，忽略该确认分组。</p>
<blockquote>
<p>对于数据链路层的点对点信道，往返时间比较固定，不会出现确认分组迟到的情况，因此只在数据链路层实现停止等待协议，不需要给ACK编码。</p>
</blockquote>
<p>注意事项：</p>
<p>1.接收端检测到数据分组有误码时，将其丢弃并等待发送方的超时重传。但对于误码率较高的点对点链路，为使发送方尽早重传，也可给发送方发送NAK分组</p>
<p>2.为了让接收方能够判断所收到的数据分组是否是重复的，需要给<strong>数据分组编号</strong>。由于停止-等待协议的停等特性，只需1个比特编号就够了，即编号0和1。</p>
<p>3.为了让发送方能够判断所收到的ACK分组是否是重复的，需要给<strong>ACK分组编号</strong>，所用比特数量<strong>与数据分组编号</strong>所用比特数量一样。数据链路层一般不会出现ACK分组迟到的情况，因此在<strong>数据链路层实现停止-等待协议可以不用给ACK分组编号</strong>。</p>
<p>4.超时计时器设置的<strong>重传时间</strong>应仔细选择。一般可将重传时间选为<strong>略大于“从发送方到接收方的平均往返时间”</strong>。</p>
<ul>
<li>
<p>在数据链路层点对点的往返时间比较确定，重传时间比较好设定。</p>
</li>
<li>
<p>然而在运输层，由于端到端往返时间非常不确定，设置合适的重传时间有时并不容易。</p>
</li>
</ul>
<p>信道利用率</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-6.png" alt=""  />
</p>
<p><strong>当往返时延RTT远大于数据帧发送时延To时（例如使用卫星链路)，信道利用率非常低。</strong></p>
<p>若出现重传，则对于传送有用的数据信息来说，信道利用率还要降低。</p>
<p>为了克服停止-等待协议信道利用率很低的缺点，就产生了另外两种协议，即后退N帧协议GBN和选择重传协议SR。</p>
<p>例题：主机甲采用停-等协议向主机乙发送数据，数据传输速率使3kbps，单向传播延时是200ms,忽略确认帧的传输延时。当信道利用率等于40%时，数据帧的长度为</p>
<p>A.240比特    B.400比特    C.480比特    D.800比特</p>
<p>解析：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-7.png" alt=""  />
</p>
<h3 id="可靠传输的实现机制回退n帧协议gbngo-back-n">可靠传输的实现机制——回退N帧协议GBN(Go-Back-N)</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-8.png" alt=""  />
</p>
<p>采用流水线传输可提高信道利用率。</p>
<p>1.采用3个比特给分组编序号，即序号0~7;                     n个比特，   0~2^n -1</p>
<p>2.发送窗口的尺寸Wt的取值:1&lt;Wt≤2^3 - 1，本例取Wt=5.     1&lt;Wr&lt;2^n -1</p>
<p>3.接收窗口的尺寸Wr的取值:Wr=1;</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-9.png" alt=""  />
</p>
<p>发送窗口一次发送5个</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-10.png" alt=""  />
</p>
<p>到达接收方，接收窗口依次一个分组一个分组识别，并依次发回确认分组。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-11.png" alt=""  />
</p>
<p>发送方每接受一个确认分组，发送窗口就向前滑动一个位置，这样就有新的序号落入发送窗口。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-12.png" alt=""  />
</p>
<p>发送方可以把收到确认的分组从缓存中删除了，而接收方可以择机将已接收的数据交付上层处理。</p>
<p>累积确认</p>
<p>接收方<strong>不一定</strong>要对收到的数据分组<strong>逐个发送确认</strong>，而是可以在收到几个数据分组后（由具体实现决定)<strong>对按序到达的最后一个数据分组发送确认</strong>。ACKn表示序号为n及以前的所有数据分组都已正确接收。</p>
<p>如上图，接收方接收到0-1，发送一个ACK1，处理完2-4，发送一个ACK4，若ACK1丢了，ACK4到达发送方，则表明分组0-4都确认，已正确接收。</p>
<p>缺点</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-13.png" alt=""  />
</p>
<p>5号出现误码，丢弃，而后的序号6701，无法被5号接收窗口接收，也只能丢弃，每丢弃一个数据分组（5号误码不算），返回之前按序接受的最后一个确认分组，在本例中是ACK4，发4个ACK4。</p>
<p>发送方收到重复的确认。就知道之前所发送的数据分组出现了差错,于是可以不等超时计时器超时就立刻重传!</p>
<p>至于收到几个重复确认就立刻重传,由具体实现决定。若不能触发立刻重传，则等待超时计时器。超时后将发送窗口中的分组重传。</p>
<p><strong>在本例中。尽管序号为6,7,0.1的数据分组正确到达接收方。但由于5号数据分组误码不被接受,它们也“受到牵连”而不被接受,发送方还要重传这些数据分组,这就是所谓的Go-back-N(回退N帧)。</strong></p>
<p>发送窗口的尺寸不能超过其上限，如在上例，发送窗口为8，则发送01234567，接收方接收完这些后窗口序号为0，这样无法辨认新旧数据分组。</p>
<p>小结</p>
<p>发送方</p>
<ul>
<li>
<p>发送方可在未收到接收方确认分组的情况下，将序号落在发送窗口内的多个数据分组全部发送出去;</p>
</li>
<li>
<p>发送方只有收到对已发送数据分组的确认时，发送窗口才能向前相应滑动;</p>
</li>
<li>
<p>发送方收到多个重复确认时，可在重传计时器超时前尽早开始重传，由具体实现决定。</p>
</li>
<li>
<p>发送方发送窗口内某个已发送的数据分组产生超时重发时，其后续在发送窗口内且已发送的数据分组也必须全部重传，这就是回退N帧协议名称的由来。</p>
</li>
</ul>
<p>接收方</p>
<ul>
<li>
<p>接收方的接收窗口尺寸取值是1因此接收方只能按序接收数据分组。</p>
</li>
<li>
<p>接收方只接收序号落在接收窗口内且无误码的数据分组，并且将接收窗口向前滑动一个位置，与此同时给发送方发回相应的确认分组。</p>
</li>
<li>
<p>为了减少开销，接收方不一定每收到一个按序到达且无误码的数据分组就给发送方发回一个确认分组,而是可以在连续收到好几个按序到达且无误码的数据分组后(由具体实现决定)，才针对最后一个数据分组发送确认分组，这称为累积确认;</p>
</li>
<li>
<p>或者可以在自己有数据分组要发送时才对之前按序接收且无误码的数据分组进行捎带确认;</p>
</li>
<li>
<p>接收方收到未按序到达的数据分组，除丢弃外，还要对最近按序接收的数据分组进行确认;</p>
</li>
</ul>
<p>例题：数据链路层使用后退N帧(GBN)协议，发送方已经发送了编号为0~7的帧。送方只收到0、2、3号帧的确认，则发送方需要重发的帧数是</p>
<p>A.2    B.3    C.4    D.5</p>
<p>解析：</p>
<p>(1)“发送方只收到0、2、3号帧的确认”表明接收方正确接收了0~3号帧，并针对它们中的每一个发送了确认帧,只不过针对1号帧的确认帧丢失了(这是题目中的陷阱，但又没有相应的选项，所以迷惑性并不是很大);</p>
<p>(2)截止到计时器超时，发送方只收到了针对0~3号帧的确认，而发送方之前已经发送了0~7号帧，因此应该从4号帧开始重传，即重传之前已经发送过的4、5、6、7号帧，共计重传4个帧。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-14.png" alt=""  />
</p>
<p><!-- raw HTML omitted -->一个数据分组的误码就会导致其后续多个数据分组不能被接收方按序接收而丢弃（尽管它们无乱序和误码)。这必然会造成发送方对这些数据分组的超时重传，显然这是对通信资源的极大浪费。<!-- raw HTML omitted --></p>
<h3 id="可靠传输的实现机制选择重传协议srselective-request">可靠传输的实现机制——选择重传协议SR(Selective Request)</h3>
<p>为了进一步提高性能，可设法只重传出现误码的数据分组。因此，接收窗口的尺寸<strong>不应再等于1(而应大于1)</strong>，以便<strong>接收方先收下失序到达但无误码并且序号落在接收窗口内的那些数据分组</strong>，等到所缺分组收齐后再一并送交上层。这就是<strong>选择重传协议</strong>。</p>
<p>注意:</p>
<p><strong>选择重传协议</strong>为了使发送方仅重传出现差错的分组，接收方<strong>不能再采用累积确认</strong>，而需要对每个正确接收到的数据分组进行<strong>逐一确认</strong>!</p>
<p>1.采用3个比特给分组编序号，即序号0~7;         n个比特        0~2^n - 1</p>
<p>2.发送窗口的尺寸Wt的取值:1&lt;wt&lt;=(2^3-1)，本例取Wt=4               1&lt;Wt&lt;2^(n-1)</p>
<p>3.接收窗口的尺寸Wr的取值:Wr=Wt=4;</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-15.png" alt=""  />
</p>
<p>发送方发送了0、1、2、3这4个序号的分组，在传输过程中，序号2的分组丢失</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-16.png" alt=""  />
</p>
<p>接收方接受了0、1、3这3个分组，先接受0、1这2个（这2个数据分组<strong>按序到达</strong>），并返回相应的1、2确认分组此时接收窗口向前移动2位，4和5落在接收窗口的位置。然后接受3这个分组，并返回3确认分组。但是此时接收窗口不能向前移动，因为3号数据分组是<strong>未按序到达</strong>的数据分组。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-17.png" alt=""  />
</p>
<p>发送窗口先接收0、1确认分组，此时发送窗口向前移动2位，4、5落在发送窗口的位置，然后发送4、5数据分组，此时发送方可将0、1数据分组从发送缓存删除。接收方可择机将已接收的数据交付上层处理。</p>
<p>然后发送窗口再接收3号确认分组，知道3号数据分组已成功接收，之后3号数据并不会重复发送。但发送窗口不能向前移动，因为3号确认分组是<strong>未按序到达</strong>的数据分组。</p>
<p>而后，若4、5数据分组到达接收方后，接收窗口也不能向前移动，其他操作同理。</p>
<p>等发送方针对2号数据分组的重传计时器超时了，发送方就会重传2号数据分组。</p>
<p>发送窗口超过范围会造成无法辨识新旧数据分组</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-4/3-4-18.png" alt=""  />
</p>
<p>发送方发送0、1、2、3、4数据分组，接收方接收后返回0、1、2、3、4确认分组。然后0号确认分组丢了，1、2、3、4确认分组正常接收，此时发送窗口不能向前移动。然后等发送方针对0号数据分组的重传计时器超时了，发送方就会重传0号数据分组，此时0号数据分组会匹配到第二组循环序号的0号当中，无法辨识新旧数据分组，出现分组重复。</p>
<p>小结</p>
<p>发送方</p>
<ul>
<li>
<p>发送方可在未收到接收方确认分组的情况下，将序号落在发送窗口内的多个数据分组全部发送出去;</p>
</li>
<li>
<p>发送方只有按序收到对已发送数据分组的确认时，发送窗口才能向前相应滑动;若收到未按序到达的确认分组时，对其进行记录，以防止其相应数据分组的超时重发，但发送窗口不能向前滑动。</p>
</li>
</ul>
<p>接收方</p>
<ul>
<li>
<p>接收方可接收未按序到达但没有误码并且序号落在接收窗口内的数据分组;</p>
</li>
<li>
<p>为了使发送方仅重传出现差错的分组，接收方不能再采用累积确认，而需要对每个正确接收到的数据分组进行逐一确认!</p>
</li>
<li>
<p>接收方只有在按序接收数据分组后，接收窗口才能向前相应滑动。</p>
</li>
</ul>
<p>例题：数据链路层采用选择重传协议(SR)）传输数据，发送方已发送了0~3号数据帧，现已收到1号帧的确认，而0、2号帧依次超时，则此时需要重传的帧数是</p>
<p>A.1      B.2      C.3      D.4</p>
<p>解析：</p>
<p>(1)与回退N帧协议不同，选择重传协议不支持累积确认。接收方每接收一个数据帧，就会发回相应的确认帧。</p>
<p>(2）题目所给“收到1号帧的确认，而0、2号帧依次超时”，因此需要重传O、2号帧。至于发送方已发送的3号数据帧，题目并未给出它的任何其他线索，因此无须考虑3号帧。</p>
<p>故选B</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-3</title>
      <link>https://blog.0pt.im/learn/1-3-3/</link>
      <pubDate>Thu, 13 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-3/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="差错检测">差错检测</h1>
<p>实际的通信链路都不是理想的，比特在传输过程中可能会产生差错:1可能会变成0,而0也可能变成1。这称为<strong>比特差错</strong>。</p>
<p>在一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率BER</strong>(Bit Error Rate)。使用差错检测码来检测数据在传输过程中是否产生了比特差错，是数据链路层所要解决的重要问题之一。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-3/3-3-1.png" alt=""  />
</p>
<p>FCS用于让接收方的数据链路层检查是否产生误码。</p>
<h3 id="奇偶校验">奇偶校验</h3>
<ul>
<li>
<p>在待发送的数据后面<strong>添加1位奇偶校验位</strong>，使整个数据（包括所添加的校验位在内）中**“1”的个数**为奇数（奇校验)或偶数（偶校验)。</p>
</li>
<li>
<p>如果有<strong>奇数个位发生误码</strong>，则奇偶性发生变化，<strong>可以检查出误码</strong>;</p>
</li>
<li>
<p>如果有<strong>偶数个位发生误码</strong>，则奇偶性不发生变化，<strong>不能检查出误码</strong>（<strong>漏检</strong>)。</p>
</li>
</ul>
<p>漏检率高，计算机网络的数据链路层一般不用奇偶校验。</p>
<h3 id="循环冗余校验crccyclic-redundancy-check">循环冗余校验CRC(Cyclic Redundancy Check)</h3>
<ul>
<li>
<p>收发双方约定好一个生成多项式G(x);</p>
</li>
<li>
<p>发送方基于待发送的数据和生成多项式计算出差错检测码（冗余码)，将其添加到待传输数据的后面一起传输;</p>
</li>
<li>
<p>接收方通过生成多项式来计算收到的数据是否产生了误码。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-3/3-3-2.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-3/3-3-3.png" alt=""  />
</p>
<p>例题：待发送的信息为101001，生成多项式为G(x)= x^3+ x^2+ 1，计算余数。</p>
<p>解析：1.构造被除数  待发送信息后面添加生成多项式最高次数个0</p>
<p>2.构造除数  生成多项式各项系数构成的比特串</p>
<p>3.做“除法”</p>
<p>4.检查余数  余数的位数应与生成多项式最高次数相同，如果位数不够，则在余数前补0来凑足位数。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-3/3-3-4.png" alt=""  />
</p>
<p>例题：接收到的信息为101101001，生成多项式为G(x)= x^3 +x^2+l，判断传输是否误码?</p>
<p>解析：1.构造被除数  接收到的信息就是被除数</p>
<p>2.构造除数   生成多项式各项系数构成的比特串</p>
<p>3.做“除法”</p>
<p>4.检查余数  余数为0，可认为传输过程无误码;余数不为0，可认为传输过程产生误码。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-3/3-3-5.png" alt=""  />
</p>
<p><strong>检错码</strong>只能检测出帧在传输过程中出现了差错，但并不能定位错误，因此<strong>无法纠正错误</strong>。</p>
<p>要想纠正传输中的差错，可以使用冗余信息更多的<strong>纠错码</strong>进行<strong>前向纠错</strong>。但纠错码的开销比较大，在<strong>计算机网络中较少使用</strong>。</p>
<p>循环冗余校验<strong>CRC</strong>有很好的检错能力（<strong>漏检率非常低</strong>)，虽然计算比较复杂，但非常<strong>易于用硬件实现</strong>，因此被<strong>广泛应用于数据链路层</strong>。</p>
<p>在计算机网络中通常采用我们后续中将要讨论的<strong>检错重传方式来纠正传输中的差错</strong>，<strong>或者仅仅是丢弃检测到差错的帧</strong>，这取决于数据链路层向其上层提供的是可靠传输服务还是不可靠传输服务。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-2</title>
      <link>https://blog.0pt.im/learn/1-3-2/</link>
      <pubDate>Wed, 12 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-2/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="封装成帧">封装成帧</h1>
<p>封装成帧是指数据链路层给上层交付的协议数据单元添加帧头和帧尾使之成为帧。</p>
<ul>
<li>
<p>帧头和帧尾中包含有重要的控制信息。</p>
</li>
<li>
<p>帧头和帧尾的作用之一就是<strong>帧定界</strong>。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-1.png" alt=""  />
</p>
<p>首尾标志的作用就是帧定界</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-2.png" alt=""  />
</p>
<p>接收方的链路层可以依据帧定界标志，从物理层交付的比特流中，提取出一个一个的帧。</p>
<blockquote>
<p>并不是每种数据链路层的帧都包含有帧定界标志。</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-3.png" alt=""  />
</p>
<p>使用该协议，物理层会在以太网V2的mac帧前添加前导码。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-4.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-5.png" alt=""  />
</p>
<p>另外，以太网还规定了帧间间隔时间为96比特的发送时间，不需要帧定界。</p>
<p>透明传输是指数据链路层对上层交付的传输数据没有任何限制，就好像数据链路层不存在一样</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-6.png" alt=""  />
</p>
<p>flag是帧定界标志，是一个特定数值。如图，首位各一个flag，但是在上层交付的协议数据单元中，恰好也包含了这个特定数值，接收方就不能正确接收帧，会提前结束。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-7.png" alt=""  />
</p>
<p>解决：在帧发送前，对帧数据部分进行扫描，每出现一个帧定界符，就在其前面插入一个转义字符（ESC）。</p>
<p>接收方在收到转义字符时，会去掉转义字符，并知道后面的不是帧定界符而是数据。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-8.png" alt=""  />
</p>
<p>数据部分中出现了转义字符也是同理。</p>
<blockquote>
<p>转义字符不是“esc”，而是一个特定字符，十进制值为27.。</p>
</blockquote>
<p>面向字节的物理链路使用字节填充（或称字符填充)的方法实现透明传输。</p>
<p>面向比特的物理链路使用比特填充的方法实现透明传输。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-2/3-2-9.png" alt=""  />
</p>
<p>在发送前，可采用零比特填充法，每5个连续的比特1前就插入一个比特0，来确保帧定界符的唯一性。接收方接受时把数据部分每5个连续的比特1前的比特0剔除即可。</p>
<p>例题. HDLC协议对 0111110001111110 组帧后对应的比特串为</p>
<p>A.011111000011111010  B.011111000111110101111110</p>
<p>C.01111100011111010  D.011111000111111001111101</p>
<p>解析：高级数据链路控制协议HDLC采用帧头和帧尾中的标志字段作为帧定界符，其值为01111110</p>
<p>HDLC为了实现“透明传输”，采用“零比特填充法”(每5个连续1后面插入一个比特0)，故选A</p>
<p>为了提高帧的传输效率，应当使<strong>帧的数据部分的长度尽可能大些</strong>。</p>
<p>考虑到差错控制等多种因素，每一种数据链路层协议都规定了帧的数据部分的长度上限，即最大传送单元MTU(Maximum Transfer Unit)。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络3-1</title>
      <link>https://blog.0pt.im/learn/1-3-1/</link>
      <pubDate>Tue, 11 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-3-1/</guid>
      <description>三.数据链路层</description>
      <content:encoded><![CDATA[<h1 id="数据链路层概述">数据链路层概述</h1>
<p><strong>链路</strong>(Link)就是从一个结点到相邻结点的一段物理线路，而中间没有任何其他的交换结点。</p>
<p><strong>数据链路</strong>(Data Link)是指把实现通信协议的硬件和软件加到链路上，就构成了数据链路。数据链路层以<strong>帧</strong>为单位传输和处理数据。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-1/3-1-1.png" alt=""  />
</p>
<p>只研究数据链路层时，可以看作数据包在只在数据链路层水平传送。</p>
<h3 id="数据链路层的三个重要问题使用点对点信道的数据链路层">数据链路层的三个重要问题（使用点对点信道的数据链路层）</h3>
<p>1.封装成帧</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-1/3-1-2.png" alt=""  />
</p>
<p>发送方将待发送的数据，通过应用层封装成为应用层协议数据单元，然后交付给运输层。</p>
<p>运输层为复添加运输层协议首部，使之成为运输层协议数据单元，然后交付给网络层。</p>
<p>网络层为复添加网络层协议首部，使之成为网络层数据单元，然后交付给数据链路层。</p>
<p>数据链路层绘网络层协议数据单元添加一个数据链路层协议首部，简称为帧头，还要给其添加一个帧尾。</p>
<p>2.差错检测</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-1/3-1-3.png" alt=""  />
</p>
<p>3.可靠传输</p>
<p>如果数据链路层向其上层提供的是不可靠服务，那么丢弃就丢弃了，不会有更多措施。</p>
<p>如果数据链路层向其上层提供的是可靠服务，那么还需要其他措施，来确保接收方主机还可以重新收到被丢弃这个帧的正确副本。</p>
<p>尽管误码是不能完全避兔的，但若能实现发送方发送什么，接收方就能收到什么,就称为可靠传输。</p>
<h3 id="使用广播信道的数据链路层">使用广播信道的数据链路层</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-1/3-1-4.png" alt=""  />
</p>
<p>C如何知道主机A发送的数据是给自己的，其他主机如何知道主机A发送的数据不是给自己的。</p>
<p>将帧的目的地址添加在帧中一起传输。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/3-1/3-1-5.png" alt=""  />
</p>
<p>帧碰撞，解决方法，使用一种特殊的协议  <strong>以太网的媒体接入控制协议CSMA/CD</strong></p>
<p>其他概念</p>
<p>802.11局域网的媒体接入控制协议CSMA/CA数据链路层的互连设备</p>
<p>网桥和交换机的工作原理</p>
<p>集线器（物理层互连设备)与交换机的区别</p>
<p>接下来会讲。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络2-5</title>
      <link>https://blog.0pt.im/learn/1-2-5/</link>
      <pubDate>Mon, 10 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-2-5/</guid>
      <description>二.物理层</description>
      <content:encoded><![CDATA[<h1 id="信道的极限容量">信道的极限容量</h1>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-5/2-5-1.png" alt=""  />
</p>
<p>信号波形失去码元间的清晰界限，这种现象叫码间串扰。</p>
<p>失真因素</p>
<ul>
<li>
<p>码元传输速率</p>
</li>
<li>
<p>信号传输距离</p>
</li>
<li>
<p>噪声干扰</p>
</li>
<li>
<p>传输媒体质量</p>
</li>
</ul>
<h3 id="奈氏准则">奈氏准则</h3>
<p>在假定的理想条件下，<strong>为了避免码间串扰</strong>，<strong>码元传输速率是有上限的</strong>。</p>
<p>理想低通信道的最高码元传输速率=2W Baud = 2W码元/秒</p>
<p>理想带通信道的最高码元传输速率=W Baud = W码元/秒</p>
<blockquote>
<p>w:信道带宽（单位为Hz）</p>
<p>Baud:波特，即码元/秒</p>
</blockquote>
<p>码元传输速率又称为波特率、调制速率、波形速率或符号速率。它与比特率有一定关系:</p>
<p>当1个码元只携带1比特的信息量时，则波特率（码元/秒)与比特率（比特/秒）在数值上是相等的;口当1个码元携带n比特的信息量时，则波特率转换成比特率时，数值要乘以n。</p>
<p>要提高信息传输速率（比特率），就必须设法使每一个码元能携带更多个比特的信息量。这需要采用多元制（如2-4里的QAM - 16）</p>
<p>实际的信道所能传输的最高码元速率，要明显低于奈氏准则给出的这个上限数值。</p>
<h3 id="香农公式">香农公式</h3>
<p>带宽受限且有高斯白噪声干扰的信道的极限信息传输速率</p>
<p><img loading="lazy" src="https://img.opt.lockey.icu/blog/2-5-2.png" alt=""  />
</p>
<p>C:信道的极限信息传输速率(单位: b/s)</p>
<p>w:信道带宽（单位:Hz)</p>
<p>S:信道内所传信号的平均功率</p>
<p>N:信道内的高斯噪声功率</p>
<p>S/N:信噪比，使用分贝(dB)作为度量单位</p>
<p><img loading="lazy" src="https://img.opt.lockey.icu/blog/2-5-3.png" alt=""  />
</p>
<p>信道带宽或信道中信噪比越大，信息的极限传输速率越高。</p>
<p>在实际信道上能够达到的信息传输速率要比该公式的极限传输速率低不少。这是因为在实际信道中，信号还要受到其他一些损伤，如各种脉冲干扰、信号在传输中的衰减和失真等，这些因素在香农公式中并未考虑。</p>
<p>1.在信道带宽一定的情况下，根据奈氏准则和香农公式，要想<strong>提高信息的传输速率</strong>就必须采用<strong>多元制</strong>（更好的调制方法）和努力<strong>提高信道中的信噪比</strong>。</p>
<p>2.自从香农公式发表后，各种<strong>新的信号处理和调制方法就不断出现</strong>，其目的都是为了尽可能地<strong>接近香农公式给出的传输速率极限</strong>。</p>
<p>例题.在无噪声情况下，若某通信链路的带宽为3kHz，采用4个相位，每个相位具有4种振幅的QAM调制技术，则该通信链路的最大数据传输速率是</p>
<p>A.12 kbps    B.24 kbps   C.48 kbps    D.96 kbps</p>
<p>解析：(1）根据奈氏准则可知，该通信链路的最高码元传输速率= 2x 3k = 6k(Baud) = 6k(码元/秒)</p>
<p>(2）采用4个相位，每个相位4种振幅的QAM调制技术，可以调制出4x4=16个不同的基本波形(码元);</p>
<p>采用二进制对这16个不同的码元进行编码，需要使用4个比特(log:16 = 4)。换句话说，每个码元可以携书的信息量为4比特;</p>
<p>综合（1)和(2)可知，该通信链路的最大数据传输速率=6k(码元/秒)x4(比特/码元)=24k (比特/秒)= 24 kbps，选B</p>
<blockquote>
<p>不管题目给出的调制技术多么“牛”或对于我们而言有多陌生，这都不会影响我们解题。我们只需关心这种调制技术可以调制出多少个不同的基本波形（码元)即可。</p>
</blockquote>
<p>例题：若某通信链路的数据传输速率为2400bps，采用4相位调制，则该链路的波特率是A.600波特    B.1200波特    C.4800波特    D.9600波特</p>
<p>解析：(1）采用4相位调制，可以调制出4种相位不同的基本波形(码元)。采用二进制对这4个不同的码元进行编码，(1）采用4相位调制，可以调制出4种相位不同的基本波形(码元)。采用二进制对这4个不同的码元进行编码，需要使用2个比特(logz4 = 2)。换句话说，每个码元可以携带的信息量为2比特;</p>
<p>(2）数据传输速率=波特率(码元传输速率)X每个码元所携带的信息量</p>
<p>2400(比特/秒)=波特率X 2(比特/码元)</p>
<p>解得:波特率=1200(码元/秒)= 1200 (Baud) = 1200(波特)，选B</p>
<p>例题：若连接R2和R3链路的频率带宽为8kHz，信噪比为30dB，该链路实际数据传输速率约为理论最大数据传输速率的50%，则该链路的实际数据传输速率约是</p>
<p>A.8 kbps   B.20 kbps  c.40 kbps   D.80 kbps</p>
<p>解析：30（dB） = 10*log10（S/N）</p>
<p>解得S/N = 1000，带入香农公式，c约等80kps，则实际数据传输速率为40kps，选C</p>
<p>例题：若信道在无噪声情况下的极限数据传输速率不小于信噪比为30dB条件下的极限数据传输速率，则信号状态数至少是</p>
<p>A.4    B.8   C.16    D.32</p>
<p>解析：设信号状态数（可调制出的不同基本波形或码元数量)为X则每个码元可携带的比特数量为log2 X</p>
<p>信道在无噪声情况下的极限数据传输速率(用奈氏准则计算)= 2W(码元/秒)= 2w log2 X（比特/秒)</p>
<p>30dB信噪比条件下的极限数据传输速率(用香农公式计算)= W log2 (1 + 1000)(比特/秒)根据题意列出不等式:2W logzX ≥ W log2 (1 + 1000)</p>
<p>解得X≥32，选D</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络2-4</title>
      <link>https://blog.0pt.im/learn/1-2-4/</link>
      <pubDate>Sun, 09 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-2-4/</guid>
      <description>二.物理层</description>
      <content:encoded><![CDATA[<h1 id="编码与调制">编码与调制</h1>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-1.png" alt=""  />
</p>
<p>码元</p>
<p>在使用时间域的波形表示数字信号时,<strong>代表不同离散数值的基本波形</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-4.png" alt=""  />
</p>
<p>两种基本波形，分别代表比特0或1，组合起来</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-3.png" alt=""  />
</p>
<blockquote>
<p>一个传输媒体可以包含多个信道，单工的话一个信道，半双工全双工2个：如果采用信道复用技术，可以有多个信道。</p>
</blockquote>
<h3 id="常用编码">常用编码</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-5.png" alt=""  />
</p>
<p>1.不归零编码(存在同步问题)</p>
<p>比特1是高电压，比特0是低电压，出现如下问题：</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-6.png" alt=""  />
</p>
<p>为解决这个问题，需要<strong>额外一根传输线来传输时钟信号</strong>,使发送方和接收方同步。</p>
<p>但是对于计算机网络，<strong>宁愿利用这根传输线传输数据信号</strong>，而不是传输时钟信号!</p>
<p>2.归零编码（自同步，编码效率低）</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-7.png" alt=""  />
</p>
<p><strong>每个码元传输结束后信号都要“归零”</strong>，所以接收方只要在信号归零后进行采样即可，不需要单独的时钟信号。</p>
<p>实际上，归零编码相当于把时钟信号用“归零”方式编码在了数据之内，这称为“<strong>自同步</strong>”信号。</p>
<p>但是，归零编码中大部分的<strong>数据带宽</strong>,都用来传输“归零”而<strong>浪费</strong>掉了。</p>
<p>3.曼彻斯特编码（传统以太网，10Mb/s）</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-8.png" alt=""  />
</p>
<p>码元中间时刻的跳变既表示时钟,又表示数据。</p>
<p>4.差分曼彻斯特编码（比曼彻斯特编码变化少，更适合较高的传输速率）</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-9.png" alt=""  />
</p>
<p>跳变仅表示时钟;码元开始处电平是否发生变化表示数据。</p>
<h3 id="基本调制方法">基本调制方法</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-10.png" alt=""  />
</p>
<p>使用基本调制方法，1个码元只能包含1个比特信息。如何能使1个码元包含更多的比特呢？</p>
<p>可采用混合调制</p>
<p><strong>频率    相位    振幅</strong></p>
<p>因为<strong>频率和相位是相关</strong>的，即频率是相位随时间的变化率。所以<strong>一次只能调制频率和相位两个中的一个</strong>。</p>
<p>通常情况下，相位和振幅可以结合起来一起调制，称为<strong>正交振幅调制QAM</strong>。</p>
<h3 id="混合调制举例正交振幅调制qam">混合调制举例——正交振幅调制QAM</h3>
<p>星座图</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-4/2-4-11.png" alt=""  />
</p>
<p>QAM-16</p>
<ul>
<li>
<p>12种相位</p>
</li>
<li>
<p>每种相位有1或2种振幅可选</p>
</li>
<li>
<p>可以调制出16种码元(波形)，每种码元可以对应表示4个比特</p>
</li>
<li>
<p>码元与4个比特的对应关系采用格雷码，任意两个相邻码元只有1个比特不同</p>
</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络2-3</title>
      <link>https://blog.0pt.im/learn/1-2-3/</link>
      <pubDate>Sat, 08 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-2-3/</guid>
      <description>二.物理层</description>
      <content:encoded><![CDATA[<h1 id="传输方式">传输方式</h1>
<h3 id="串行传输和并行传输">串行传输和并行传输</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-3/2-3-1.png" alt=""  />
</p>
<p>串行传输：数据是1个比特1个比特依次发送，只需1条传输线路（例：计算机远距离通信）</p>
<p>并行传输：数据是n个比特n个比特依次发送，需n条传输线路（例：电脑内数据传输，cpu与内存）</p>
<h3 id="同步传输和异步传输">同步传输和异步传输</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-3/2-3-2.png" alt=""  />
</p>
<p>收发双方时钟同步的方法</p>
<ul>
<li>
<p>外同步:在收发双方之间添加一条单独的时钟信号线</p>
</li>
<li>
<p>内同步:发送端将时钟同步信号编码到发送数据中一起传输（例如曼彻斯特编码</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-3/2-3-3.png" alt=""  />
</p>
<blockquote>
<p>以字节为单位发送，时间间隔不固定，通常要在每个字节前面加上起始位（红色S）和结束位（黑色E）</p>
</blockquote>
<p>字节之间异步(字节之间的时间间隔不固定)</p>
<p>字节中的每个比特仍然要同步(各比特的持续时间是相同的)</p>
<h3 id="单工半双工全双工">单工/半双工/全双工</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-3/2-3-4.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络2-2</title>
      <link>https://blog.0pt.im/learn/1-2-2/</link>
      <pubDate>Fri, 07 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-2-2/</guid>
      <description>二.物理层</description>
      <content:encoded><![CDATA[<h1 id="二物理层下的传输媒体">二.<strong>物理层下</strong>的传输媒体</h1>
<blockquote>
<p>传输媒体不属于物理层，只能排在物理层之下</p>
</blockquote>
<h3 id="导引型传输媒体">导引型传输媒体</h3>
<p>1.同轴电缆</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-1.png" alt=""  />
</p>
<ul>
<li>
<p>基带同轴电缆(50欧姆)  数字传输，过去用于局域网</p>
</li>
<li>
<p>宽带同轴电缆(75欧姆)  模拟传输，目前主要用于有线电视</p>
</li>
</ul>
<p>同轴电缆价格较贵且布线不够灵活和方便，随着集线器的出现,在局域网领域基本上都是采用双绞线作为传输媒体。</p>
<p>2.双绞线</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-2.png" alt=""  />
</p>
<p>绞合的作用</p>
<ul>
<li>
<p>抵御部分来自外界的电磁波干扰</p>
</li>
<li>
<p>减少相邻导线的电磁干扰（高中物理，电磁感应，磁场相抵消）</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-3.png" alt=""  />
</p>
<blockquote>
<p>5E基本够用，考虑未来发展，可以提前用6类</p>
</blockquote>
<p>3.光纤</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-4.png" alt=""  />
</p>
<p>纤芯直径</p>
<ul>
<li>
<p>多模光纤:50微米，62.5微米</p>
</li>
<li>
<p>单模光纤:9微米</p>
</li>
</ul>
<p>包层直径125微米</p>
<p>工作波长</p>
<ul>
<li>
<p>0.85微米（衰减较大)</p>
</li>
<li>
<p>1.30微米（衰减较小)</p>
</li>
<li>
<p>1.55微米（衰减较小)</p>
</li>
</ul>
<p>光纤的优点</p>
<ul>
<li>
<p>通信容量大(25000~30000GHz的带宽)</p>
</li>
<li>
<p>口传输损耗小，远距离传输时更加经济。</p>
</li>
<li>
<p>抗雷电和电磁干扰性能好。这在大电流脉冲干扰的环境下尤为重要。</p>
</li>
<li>
<p>无串音干扰，保密性好，不易被窃听。</p>
</li>
<li>
<p>体积小，重量轻。</p>
</li>
</ul>
<p>光纤的缺点</p>
<ul>
<li>
<p>割接需要专用设备</p>
</li>
<li>
<p>口光电接口价格较贵</p>
</li>
</ul>
<p>光纤原理</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-5.png" alt=""  />
</p>
<p>当光从高折射率的媒体射向低折射率的媒体时，其折射角将大于入射角</p>
<p>因此，如果入射角足够大，就会出现全反射，即光碰到包层时，就会反射回纤芯</p>
<p>（1)单模光纤</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-6.png" alt=""  />
</p>
<p><strong>没有模式色散</strong>，在1.31微米波长附近材料色散和波导色散大小相等符号相反，两者正好抵消。单模光纤适合<strong>长距离传输</strong>且衰减小，但其制造成本高，对光源要求高。</p>
<p>发送光源:激光发生器;接收检测:激光检波器</p>
<p>（2)多模光纤</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-7.png" alt=""  />
</p>
<p>由于色散(模式、材料、波导色散)，光在多模光纤中传输一定距离后必然产生信号失真(<strong>脉冲展宽</strong>)因此，多模光纤只适合<strong>近距离传输</strong>(建筑物内)</p>
<p>发送光源:发光二极管;接收检测:光电二极管</p>
<p>4.电力线</p>
<p>老技术，20世界20年代就出现了，用于有线电话连接</p>
<h3 id="非导引型传输媒体">非导引型传输媒体</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-8.png" alt=""  />
</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-9.png" alt=""  />
</p>
<blockquote>
<p>从极长波到甚长波，这些频段不用于电信领域</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-10.png" alt=""  />
</p>
<p>1.无线电波</p>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-11.png" alt=""  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-12.png" alt=""  />
</th>
</tr>
</thead>
</table>
<p>2.微波（可以穿过大气层的电离层）</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-13.png" alt=""  />
</p>
<p>中继站将接受的微波发大后再发送给下一站，故称“接力”</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-14.png" alt=""  />
</p>
<p>利用地球同步卫星通信，通信距离远，但时延大（传播时延）</p>
<p>3.红外线</p>
<p>你家电视遥控器用的这个</p>
<p>之前笔记本和手机都有红外接口，用来通信，现在笔记本红外接口被淘汰。手机遥控用的手机红外接口。</p>
<ul>
<li>
<p>点对点无线传输</p>
</li>
<li>
<p>直线传输，中间不能有障碍物，传输距离短</p>
</li>
<li>
<p>传输速率低(4Mb/s~16Mb/s)</p>
</li>
</ul>
<p>4.可见光</p>
<p>LI-FI技术（了解即可）</p>
<p>2011年，德国物理学家<strong>哈拉尔德·哈斯</strong>（Harald Haas）和他在英国爱丁堡大学的团队发明了一种专利技术，利用闪烁的灯光来传输数字信息，这就是Li-Fi。</p>
<p>Li-Fi的工作原理并不复杂。给普通的LED灯泡装上微芯片，可以控制它每秒数百万次闪烁，亮了表示1，灭了代表0。由于频率太快，人眼根本觉察不到，但是光敏传感器却可以接收到这些变化。就这样，二进制的数据就被快速编码成灯光信号并进行了有效的传输。灯光下的电脑或手机，通过一套特制的接收装置，就能读懂灯光里的“莫尔斯密码”，就能通讯了。</p>
<p>高速率是可见光通信的最大优势，也是业界普遍看好其前景的主要原因。</p>
<p>除了速率之外，可见光通信还有很多其它方面的优势。</p>
<p>据统计，2020年支持Wi-Fi无线连接的设备将达<strong>17亿台</strong>，但随着设备的进一步增加，2025年基于传统RF（射频）技术的Wi-Fi网络可能无法满足设备连接需求。</p>
<p>蜂窝通信方面，只我们中国，移动通信基站有差不多<strong>600万个</strong>，大部分能量都用于冷却，效率只有<strong>5%</strong>。</p>
<p>LED光源就不一样了，目前全球LED灯泡就有<strong>大约400亿个</strong>。只需给这些LED灯泡加一个微芯片，就能改造成信号发射器，形成的通信网络规模是非常惊人的。这样做的成本也比部署Wi-Fi热点低得多，也不必新建基础设施。</p>
<p>而且，前面也说了，无线电波的频谱资源日趋紧张，网络已经变得拥挤不堪。可见光频谱的宽度达到射频频谱的1万倍，意味着能带来更高的带宽，可以使用的资源也非常丰富。使用光通信，完全不用担心频谱不够用的问题，同时还能缓解全球无线频谱资源短缺的现状。</p>
<p>此外，可见光对于人类来说是绿色的、无辐射伤害的一种物质。因此用光来作为无线通信的媒质，是一种对人类发展更健康，更可取的方向。同时用光来通信能降低能耗，因为不需要像基站那样提供额外的能耗，更加环保。</p>
<p>如果算上安全的话，也是一个优点，可见光通信，把光线一挡，就泄露不出去了。。。</p>
<p>但是，可见光通信的<strong>缺点</strong>其实也非常多。</p>
<p>首先，大家应该已经想到了，像Li-Fi这样的东东，你下行速率还好说，上行怎么办呢？手机上也装个电灯泡？</p>
<p>然后，环境光源干扰。在封闭的室内用用是没问题，到了室外，光源杂乱，这个受影响就很大。</p>
<p>再有，就是距离，可见光通信的速率看上去很高，但是实验室里面都是短距离理想环境下测试，你不可能拿着手机挨着灯泡上网，你稍微离远点，速率就下降得厉害。而且，如果你背对着光源，挡住了光，就没信号了。。。</p>
<p>总而言之，可见光通信确实在理论传输速率、部署、成本、零电磁辐射等方面“秒杀”传统射频通信。但是指望它短时间内替换掉Wi-Fi或基站，肯定是不可能滴。以后如果光通信发展得好，它应该会和现有通信技术进行搭配使用，或者在某些特定场合下先用起来。</p>
<h3 id="无线电频谱管理机构">无线电频谱管理机构</h3>
<p>中国:工业和信息化部无线电管理局(国家无线电办公室)</p>
<p>美国:联邦通讯委员会FCC</p>
<p>lSM (Industrial, Scientific,Medical)频段</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/2-2/2-2-15.png" alt=""  />
</p>
<p>现在无线局域网就使用2.4GHz和5.8GHz频段</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络2-1</title>
      <link>https://blog.0pt.im/learn/1-2-1/</link>
      <pubDate>Thu, 06 Jul 2023 18:09:28 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-2-1/</guid>
      <description>二.物理层</description>
      <content:encoded><![CDATA[<h1 id="一物理层的基本概念">一.物理层的基本概念</h1>
<h4 id="1传播媒体">1.传播媒体</h4>
<p>用来连接各种网络设备。</p>
<p>导引型传播媒体（常用）</p>
<ul>
<li>
<p>双绞线</p>
</li>
<li>
<p>同轴电缆</p>
</li>
<li>
<p>光纤</p>
</li>
</ul>
<p>非导引型传播媒体（常用）</p>
<ul>
<li>微波通信（2~40GHZ）</li>
</ul>
<p>物理层就是要解决在各种传输媒体上传输比特0和1的问题，给数据链路层提供<!-- raw HTML omitted -->透明<!-- raw HTML omitted -->比特流服务。</p>
<blockquote>
<p>透明：数据链路层看不见也无需看见物理层是用何种方法传输比特0和1，只管享受物理层提供的服务。</p>
</blockquote>
<h5 id="物理层协议的主要任务">物理层协议的主要任务</h5>
<ol>
<li>
<p>机械特性：指明接口所用接线器的<strong>形状</strong>和<strong>尺寸</strong>、<strong>引脚数目</strong>和<strong>排列</strong>、<strong>固定</strong>和<strong>锁定</strong>装置</p>
</li>
<li>
<p>电气特性：指明在接口电缆的各条线上出现的<strong>电压的范围</strong></p>
</li>
<li>
<p>功能特性：指明某条线上出现的某一电平的<strong>电压表示何种意义</strong></p>
</li>
<li>
<p>过程特性：指明对于不同功能的各种可能<strong>事件的出现顺序</strong></p>
</li>
</ol>
<p>物理层协议多，理解并上述概念即可。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络1-5</title>
      <link>https://blog.0pt.im/learn/1-1-5/</link>
      <pubDate>Wed, 05 Jul 2023 18:09:11 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-1-5/</guid>
      <description>一.概述篇</description>
      <content:encoded><![CDATA[<h1 id="计算机网络体系结构">计算机网络体系结构</h1>
<h3 id="常见的计算机网络体系结构">常见的计算机网络体系结构</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-5/1-5-1.png" alt=""  />
</p>
<p>OSI制定周期长，复杂，运行效率低</p>
<p>TCP/IP 更简单，且有商业驱动，抢占市场，成为标准</p>
<h3 id="计算机网络体系结构分层的必要性">计算机网络体系结构分层的必要性</h3>
<p><strong>计算机网络是个非常复杂的系统</strong>。早在最初的ARPANET设计时就提出了分层的设计理念。</p>
<p>&ldquo;<strong>分层</strong>&ldquo;可将庞大而复杂的问题，转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。</p>
<p>下面，我们按照由简单到复杂的顺序，来看看实现计算机网络要面临哪些主要的问题，以及如何将这些问题划分到相应的层次，层层处理。</p>
<p>1.若两台计算机用一根网线连接起来，有何问题</p>
<ul>
<li>
<p>采用怎样的传输媒体（介质）</p>
</li>
<li>
<p>采用怎样的物理接口</p>
</li>
<li>
<p>使用怎样的信号表示比特0和1</p>
</li>
</ul>
<p>归到物理层</p>
<p>2.若几台计算机都连到一根线上（总线型网络）</p>
<ul>
<li>
<p>如何标识网络中的各主机（主机编址问题，例如MAC地址）</p>
</li>
<li>
<p>如何从信号所表示的一连串比特流中区分出地址和数据</p>
</li>
<li>
<p>如何协调各主机争用总线</p>
</li>
</ul>
<p>归到数据链路层</p>
<p>3.若由几个网络和路由器组成一个小型互联网</p>
<ul>
<li>
<p>如何标识各网络以及网络中的各主机（网络和主机共同编址的问题，例如IP地址）</p>
</li>
<li>
<p>路由器如何转发分组，如何进行路由选择</p>
</li>
</ul>
<p>归到网络层</p>
<p>4.若一台主机开了一个浏览器进程和QQ进程（与网络通信相关的进程），一台服务器里运行着与网络通信相关的服务器进程，某时刻，主机收到了来自服务器的分组，要将分组交给哪个进程进行处理</p>
<ul>
<li>
<p>如何解决进程之间基于网络的通信问题</p>
</li>
<li>
<p>出现传输错误时，如何处理</p>
</li>
</ul>
<p>归类到运输层</p>
<p>5.通过上述，已经实现了进程间基于网络的通信，在此基础上，只需要制定各种应用层协议，并按协议标准编写相应的应用程序，通过应用进程间的交互来完成特定的网络应用。</p>
<p>归类到应用层</p>
<p>总结</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-5/1-5-2.png" alt=""  />
</p>
<h3 id="分层思想举例">分层思想举例</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-5/1-5-3.png" alt=""  />
</p>
<p>主机</p>
<p>应用层按http协议的规定构建一个<strong>http请求报文</strong>，</p>
<p>应用层将<strong>http请求报文</strong>交给运输层处理</p>
<p>运输层给<strong>http请求报文</strong>添加一个<strong>tcp首部</strong>（区分应用进程，实现可靠传输）
使之成为<strong>tcp报文段</strong>
运输层将<strong>tcp报文段</strong>交给网络层处理</p>
<p>网络层给<strong>tcp报文段</strong>添加一个<strong>ip首部</strong>（能在互联网上传输即能被路由器转发）
使之成为<strong>ip数据报</strong>
网络层将<strong>ip数据报</strong>交付给数据链路层处理，</p>
<p>数据链路层给<strong>ip数据报</strong>添加一个<strong>首部</strong>（能在一个链路或一个网络上传输）和一个尾部（让目 的主机检测接收到的的帧是否有误码）</p>
<p>使之成为<strong>帧</strong>
数据链路层将<strong>帧</strong>交付给物理层</p>
<p>物理层将<strong>帧</strong>看作是比特流（如果是以太网，还会加一个<strong>前导码</strong>，为让目的主机做好接受的准备）变换成相应的信号发送到路由器</p>
<p>路由器
物理层将信号变换为比特流，去掉<strong>前导码</strong>后，交付给数据链路层，实际上交付的是<strong>帧</strong>，</p>
<p>数据链路层将<strong>首部</strong>和<strong>尾部</strong>去掉后交付给网络层，实际上交付的是<strong>ip数据报</strong>，</p>
<p>网络层<!-- raw HTML omitted -->解析<!-- raw HTML omitted --><strong>ip数据报</strong>的<strong>首部</strong>，从中提取出目的网络地址，然后查找自身的路由表，确定转发端口，以便进行转发，再将其交付给数据链路层</p>
<p>数据链路层给<strong>ip数据报</strong>添加一个<strong>首部</strong>（能在一个链路或一个网络上传输）和一个<strong>尾部</strong>（让目 的主机检测接收到的的帧是否有误码）（也是路由器自己的）</p>
<p>使之成为<strong>帧</strong>
数据链路层将<strong>帧</strong>交付给物理层</p>
<p>物理层将<strong>帧</strong>看作是比特流，变换成相应的信号发送到相应服务器</p>
<p>服务器</p>
<p>物理层将信号变换为比特流，去掉<strong>前导码</strong>后，交付给数据链路层，实际上交付的是<strong>帧</strong></p>
<p>数据链路层将<strong>首部</strong>和<strong>尾部</strong>去掉后交付给网络层，实际上交付的是<strong>ip数据报</strong></p>
<p>网络层去掉<strong>ip数据报</strong>的首部，交付给运输层，实际上交付的是<strong>tcp报文段</strong></p>
<p>运输层去掉<strong>tcp报文段首部</strong>，交付给应用层，实际上交付的是<strong>http请求报文</strong></p>
<p>应用层收到<strong>http请求报文</strong>后，进行解析，如何向主机发回<strong>http响应报文</strong></p>
<p>过程同理。再倒过来</p>
<h3 id="计算机网络体系结构中的专用术语-实体协议服务">计算机网络体系结构中的专用术语 实体，协议，服务</h3>
<p>实体：任何可发送或接收信息的硬件或软件进程。</p>
<p>对等实体：收发双方相同层次中的实体。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-5/1-5-4.png" alt=""  />
</p>
<blockquote>
<p>如，通信双方的网卡，正在进行通信的应用进程就是对等实体</p>
</blockquote>
<p>协议：控制两个对等实体进行逻辑通信的规则的集合。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-5/1-5-5.png" alt=""  />
</p>
<p>协议的三要素：语法 语义 同步</p>
<ul>
<li>
<p>语法：定义所交换信息的格式</p>
</li>
<li>
<p>语义：定义收发双方所要完成的操作</p>
</li>
<li>
<p>同步：定义收发双方的时序关系</p>
</li>
</ul>
<p>在协议的控制下，两个对等实体间的逻辑通信使得本层能够向上一层提供服务。</p>
<p>要实现本层协议，还需要使用下面一层所提供的服务。</p>
<p>协议是“<strong>水平的</strong>”，服务是“<strong>垂直的</strong>”。</p>
<p>实体看得见相邻下层所提供的服务，但并不知道实现该服务的具体协议。也就是说，下面的协议对上面的实体是&rdquo;<strong>透明</strong>&ldquo;的。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-5/1-5-6.png" alt=""  />
</p>
<p>服务访问点 在同一系统中<strong>相邻两层的实体交换信息的逻辑接口</strong>，用于区分不同的服务</p>
<ul>
<li>
<p>数据链路层的服务访问点为帧的“类型”字段。</p>
</li>
<li>
<p>网络层的服务访问点为IP数据报首部中的“协议字段”。</p>
</li>
<li>
<p>运输层的服务访问点为“端口号”。</p>
</li>
</ul>
<p>服务原语 上层使用下层所提供的服务必须通过与下层<strong>交换一些命令</strong>，这些命令称为服务原语。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-5/1-5-7.png" alt=""  />
</p>
<p>协议数据单元PDU ** 对等层次之间传送的数据包**称为该层的协议数据单元。</p>
<p>服务数据单元SDU <strong>同一系统内，层与层之间交换的数据包</strong>称为服务数据单元。</p>
<p>多个SDU可以合成为一个PDU;一个SDU也可划分为几个PDU。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-5/1-5-8.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络1-4</title>
      <link>https://blog.0pt.im/learn/1-1-4/</link>
      <pubDate>Tue, 04 Jul 2023 18:09:11 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-1-4/</guid>
      <description>一.概述篇</description>
      <content:encoded><![CDATA[<h1 id="计算机网络性能指标">计算机网络性能指标</h1>
<h3 id="比特">比特</h3>
<p>计算机中数据量的单位，也是信息论中信息量的单位。一个比特就是二进制数字中的一个1或0。</p>
<p>常用数据量单位</p>
<p>1Byte(B) = 8 bit</p>
<p>1 KB = 1,024 Bytes =2^10 B</p>
<p>1 MB = 1,024 KB = 1,048,576 Bytes = 2^20 B</p>
<p>1 GB = 1,024 MB = 1,048,576 KB = 1,073,741,824 Bytes = 2^30 B</p>
<p>1 TB = 1,024 GB = 1,048,576 MB = 1,073,741,824 KB = 1,099,511,627,776 Bytes = 2^40 B</p>
<blockquote>
<p>B前的K为大写</p>
</blockquote>
<h3 id="速率">速率</h3>
<p>连接在计算机网络上的主机在数字信道上传送比特的速率，也称为比特率或数据率。</p>
<p>常用数据率单位</p>
<p>bit/s (b/s) (bps) ps:三个单位都一样</p>
<p>1 Kbps = 10^3 bps<br>
1 Mbps = 10^6 bps<br>
1 Gbps = 10^9 bps<br>
1 Tbps = 10^12 bps</p>
<blockquote>
<p>bps前的k为小写</p>
</blockquote>
<p>问：买了一块250GB是固态，安到电脑上，可用多少GB</p>
<pre tabindex="0"><code>(250*10^9) / 2^30 = 232.8 (GB)
</code></pre><p>问：有一个待发送的数据块，大小为100 MB，网卡的发送速率为100 Mbps，则网卡发送完该数据块需要多长时间?</p>
<pre tabindex="0"><code>100 MB / 100 Mbps = 1 MB / 1 Mbps = 8*2^20 bit / 10^6 bps = 8.3886 s 
</code></pre><p>问：主机甲通过1个路由器（存储转发方式)与主机乙互联，两段链路的数据传输速率均为10 Mbps,主机甲分别采用报文交换和分组大小为10 kb的分组交换向主机乙发送1个大小为8 Mb(1M=10^6)的报文。若忽略链路传播延迟、分组头开销和分组拆装时间，则两种交换方式完成该报文传输所需的总时间分别为多少？（ps：本问规定1M=10^6是为了便于计算）</p>
<p>报文交换</p>
<pre tabindex="0"><code>(8 Mb / 10 Mbps) * 2 = 1.6 s
</code></pre><p>分组交换</p>
<pre tabindex="0"><code>8 Mb / 10 Mbps = 0.8 s
</code></pre><h3 id="带宽">带宽</h3>
<p>带宽在模拟信号系统中的意义</p>
<ul>
<li>
<p><strong>信号</strong>所包含的各种不同频率成分所占据的<strong>频率范围</strong></p>
</li>
<li>
<p>单位:Hz (kHz,MHz,GHz)</p>
</li>
</ul>
<p>带宽在计算机网络中的意义</p>
<ul>
<li>
<p>用来表示网络的<strong>通信线路</strong>所能传送数据的能力，因此网络带宽表示在单位时间内从网络中的某一点到另一点所能通过的“<strong>最高数据率</strong>”</p>
</li>
<li>
<p>单位: b/s(kb/s,Mb/s,Gb/s,Tb/s)</p>
</li>
</ul>
<blockquote>
<p>其实，“带宽”的这两种表述之间有着密切的联系。一条通信线路的“频带宽度”越宽，其所传输数据的“最高数据率”也越高。</p>
</blockquote>
<h3 id="吞吐量">吞吐量</h3>
<p>吞吐量表示在<strong>单位时间内通过某个网络(或信道、接口)的数据量</strong>。</p>
<p>吞吐量被经常用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。</p>
<p>吞吐量<strong>受网络的带宽或额定速率的限制</strong>。</p>
<p>带宽为1Gb/s 的以太网，理论最高1Gb/s，通常只能达到700Mb/s左右</p>
<h3 id="时延">时延</h3>
<p>网络时延</p>
<ul>
<li>
<p>发送时延 分组长度(b) / 发送速率(b/s)</p>
</li>
<li>
<p>传播时延 信道长度(m) / 电磁波传播速率(m/s) 自由空间:3x10^8m/s</p>
<p>铜线:2.3x10^8m/s 光纤：2.0x10^8m/s</p>
</li>
<li>
<p>处理时延 一般不方便计算</p>
</li>
</ul>
<blockquote>
<p>在网络时延中，哪个时延占主导得<strong>具体情况具体分析</strong>，如发送大报文，信道短，大概率是发送时延占主导，若发送小报文，信道长，大概率是传播时延占主导，具体得用公式算出来时间进行比较。</p>
</blockquote>
<h3 id="时延带宽积--传播时延-x-带宽">时延带宽积 = 传播时延 x 带宽</h3>
<p>若发送端连续发送数据，则在所发送的第一个比特即将到达终点时，发送端就已经发送了时延带宽积个比特;</p>
<p>链路的时延带宽积又称为以<strong>比特为单位的链路长度</strong>。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-4/1-4-1.png" alt=""  />
</p>
<h3 id="往返时间">往返时间</h3>
<p>在许多情况下，因特网上的信息不仅仅单方向传输，而是双向交互;我们有时很需要知道双向交互一次所需的时间，因此，往返时间RTT(Round-Trip Time)也是一个重要的性能指标。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-4/1-4-2.png" alt=""  />
</p>
<p>以太网的源主机要与无线局域网的目的主机进行通信为例，往返时间是源主机发送分组开始，到收到目的主机的确认分组为止，所需要的时间。</p>
<h3 id="利用率">利用率</h3>
<p>信道利用率 用来表示某信道有百分之几的时间是被利用的（有数据通过）。</p>
<p>网络利用率 全网络的信道利用率的加权平均。</p>
<p>根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增加;因此，<strong>信道利用率并非越高越好</strong>;</p>
<p>如果令Do表示网络空闲时的时延，D表示网络当前的时延，那么在适当的假定条件下，可以用下面的简单公式来表示D、Do和利用率U之间的关系:</p>
<p>$$
D = Do/(1-U)
$$</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-4/1-4-3.png" alt=""  />
</p>
<p>当网络的利用率达到50%时，时延就要加倍</p>
<p>当网络的利用率超过50%时，时延急剧增大</p>
<p>当网络的利用率接近100%时，时延就趋于无穷大</p>
<p>因此，一些拥有较大主干网的ISP通常会控制它们的信道利用率不超过50%。如果超过了，就要准备扩容，增大线路的带宽。</p>
<p>也不能使信道利用率太低，这会使宝贵的通信资源被白白浪费。应该使用一些机制，可以根据情况动态调整输入到网络中的通信量，使网络利用率保持在一个合理的范围内。</p>
<h3 id="丢包率">丢包率</h3>
<p>丢包率即分组丢失率，是指在一定的时间范围内，传输过程中丢失的分组数量与总分组数量的比率。丢包率具体可分为接口丢包率、结点丢包率、链路丢包率、路径丢包率、网络丢包率等。</p>
<p>丢包率是网络运维人员非常关心的一个网络性能指标，但对于普通用户来说往往并不关心这个指标,因为他们通常意识不到网络丢包。</p>
<p>分组丢失主要有两种情况:</p>
<ul>
<li>
<p>分组在传输过程中出现误码，被结点丢弃;</p>
</li>
<li>
<p>分组到达一台队列已满的分组交换机时被丢弃;在通信量较大时就可能造成网络拥塞。</p>
</li>
</ul>
<p>因此，丢包率反映了网络的拥塞情况:</p>
<ul>
<li>
<p>无拥塞时路径丢包率为0</p>
</li>
<li>
<p>轻度拥塞时路径丢包率为1%~4%</p>
</li>
<li>
<p>严重拥塞时路径丢包率为5%~15%</p>
</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络1-3</title>
      <link>https://blog.0pt.im/learn/1-1-3/</link>
      <pubDate>Mon, 03 Jul 2023 18:09:11 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-1-3/</guid>
      <description>一.概述篇</description>
      <content:encoded><![CDATA[<h1 id="计算机网络的定义与分类">计算机网络的定义与分类</h1>
<h3 id="计算机网络的定义">计算机网络的定义</h3>
<p>计算机网络的精确定义并未统一</p>
<p>计算机网络的最简单的定义是:一些<strong>互</strong>相<strong>连</strong>接的、<strong>自</strong>治的计算机的<strong>集合</strong>。</p>
<ul>
<li>
<p><strong>互连</strong>是指计算机之间可以通过有线或无线的方式进行数据通信</p>
</li>
<li>
<p><strong>自治</strong>是指独立的计算机，它有自己的硬件和软件，可以单独运行使用;集合是指至少需要两台计算机</p>
</li>
<li>
<p><strong>集合</strong>是指至少需要两台计算机</p>
</li>
</ul>
<p>计算机网络的较好的定义是:计算机网络主要是由一些<strong>通用的、可编程的硬件互连</strong>而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号)。这些可编程的硬件能够用来<strong>传送多种不同类型的数据</strong>，并能<strong>支持广泛的和日益增长的应用</strong>。</p>
<ul>
<li>
<p>计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机等智能硬件。</p>
</li>
<li>
<p>计算机网络并非专门用来传送数据，而是能够支持很多种的应用（包括今后可能出现的各种应用)</p>
</li>
</ul>
<h3 id="计算机网络的分类">计算机网络的分类</h3>
<p>按交换技术分类</p>
<ul>
<li>
<p>电路交换网络</p>
</li>
<li>
<p>报文交换网络</p>
</li>
<li>
<p>分组交换网络</p>
</li>
</ul>
<p>按使用者分类</p>
<ul>
<li>
<p>公用网</p>
</li>
<li>
<p>专用网</p>
</li>
</ul>
<p>按传输介质分类</p>
<ul>
<li>
<p>有线网络</p>
</li>
<li>
<p>无线网络</p>
</li>
</ul>
<p>按覆盖范围分类</p>
<ul>
<li>
<p>广域网WAN</p>
</li>
<li>
<p>城域网MAN</p>
</li>
<li>
<p>局域网LAN</p>
</li>
<li>
<p>个域网PAN</p>
</li>
</ul>
<p>按拓扑结构分类</p>
<ul>
<li>
<p>总线型网络</p>
</li>
<li>
<p>星型网络</p>
</li>
<li>
<p>环型网络</p>
</li>
<li>
<p>网状型网络</p>
</li>
</ul>
<table>
<thead>
<tr>
<th><img loading="lazy" src="https://img.0pt.im/computernet/1-3/1-3-1.png" alt="q"  />
</th>
<th><img loading="lazy" src="https://img.0pt.im/computernet/1-3/1-3-2.png" alt=""  />
</th>
</tr>
</thead>
<tbody>
<tr>
<td><img loading="lazy" src="https://img.0pt.im/computernet/1-3/1-3-3.png" alt=""  />
</td>
<td><img loading="lazy" src="https://img.0pt.im/computernet/1-3/1-3-4.png" alt=""  />
</td>
</tr>
</tbody>
</table>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络1-2</title>
      <link>https://blog.0pt.im/learn/1-1-2/</link>
      <pubDate>Sun, 02 Jul 2023 18:09:11 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-1-2/</guid>
      <description>一.概述篇</description>
      <content:encoded><![CDATA[<h1 id="三种交换方式电路交换分组交换和报文交换">三种交换方式：电路交换、分组交换和报文交换</h1>
<h3 id="电路交换circuit-switching">电路交换(Circuit Switching)</h3>
<p>电话交换机接通电话线的方式称为电路交换</p>
<p>从通信资源的分配角度来看，交换(Switching)就是按照某种方式动态地分配传输线路的资源</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-2/1-2-2.png" alt=""  />
</p>
<p>电路交换的三个步骤</p>
<ul>
<li>
<p>建立连接（分配通信资源）</p>
</li>
<li>
<p>通话（一直占用通信资源）</p>
</li>
<li>
<p>释放连接（归还通信资源）</p>
</li>
<li>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-2/1-2-3.png" alt=""  />
</p>
</li>
</ul>
<blockquote>
<p>当使用电路交换来传送计算机数据时,其线路的传输效率往往很低。</p>
<p>计算机数据是突发式的出现在传输线路上，会造成占着茅坑不拉屎的情况。</p>
</blockquote>
<h3 id="分组交换packet-switching">分组交换(Packet Switching)</h3>
<p>发送方：构造分组，缓存分组。（把报文分割成若干分组发送）</p>
<p>路由器：缓存分组，转发分组。（分组不一定经同一条线路到达接收方，可以合理分配线路，避免拥堵。）</p>
<p>接收方：接收分组，还原报文。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-2/1-2-4.png" alt=""  />
</p>
<blockquote>
<p>报文交换就是不分割报文的分组交换，需要大的缓存空间。</p>
</blockquote>
<h3 id="三种方式对比">三种方式对比</h3>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-2/1-2-5.png" alt=""  />
</p>
<p>电路交换</p>
<ul>
<li>
<p>优点：通信时延小、有序传输、没有冲突、适用范围广、实时性强、控制简单</p>
</li>
<li>
<p>缺点：建立连接时间长、线路独占，使用效率低、灵活性差、难以规格化</p>
</li>
</ul>
<p>报文交换</p>
<ul>
<li>
<p>优点：无需建立连接、动态分配线路、提高线路可靠性、提高线路利用率、提供多目标服务</p>
</li>
<li>
<p>缺点：引起了转发时延、需要较大存储缓存空间、需要传输额外的信息量</p>
</li>
</ul>
<p>分组交换</p>
<ul>
<li>
<p>优点：无需建立连接、线路利用率高、简化了存储管理、加速传输、减少出错概率和重发</p>
</li>
<li>
<p>缺点：引起了转发时延、需要传输额外的信息量、 对于数据报服务，存在失序、丢失或重复分组的问题;对于虚电路服务,存在呼叫建立、数据传输 和虚电路释放三个过程</p>
</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>从零开始的计算机网络1-1</title>
      <link>https://blog.0pt.im/learn/1-1-1/</link>
      <pubDate>Sat, 01 Jul 2023 18:09:11 +0800</pubDate>
      
      <guid>https://blog.0pt.im/learn/1-1-1/</guid>
      <description>一.概述篇</description>
      <content:encoded><![CDATA[<h1 id="因特网概述">因特网概述</h1>
<h3 id="网络互连网互联网和因特网">网络、互连网（互联网）和因特网</h3>
<ul>
<li>网络（Network）由若干<strong>结点</strong>（Node）和连接这些节点的<strong>链路</strong>（Link）组成</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-1/1-1-1.png" alt="1"  />
</p>
<ul>
<li>
<p>多个网络还可以通过路由器互连起来，这样构成了一个覆盖范围更大的网络，即互连网（或互联网）。因此，互连网是“<strong>网络的网络</strong>（Network of Network）”</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-1/1-1-2.png" alt="1EE"  />
</p>
</li>
<li>
<p>因特网（Internet）是世界上最大的互连网络（用户数以亿计，互连的网络数以百万计）。</p>
</li>
</ul>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-1/1-1-3.png" alt=""  />
</p>
<blockquote>
<p>internet(互联网或互连网)是一个通用名词，它泛指由多个计算机网络互连而成的网络，在这些网络之间的通信协议可以是任意的</p>
<p>Internet（因特网）则是一个专用名词，它指当前全球最大的，开发的，自由的，由众多网络互连而成的特定计算机网络，它采用TCP/IP协议族作为通信的规则，其前身是美国的ARPANET。</p>
</blockquote>
<h3 id="因特网发展的三个阶段">因特网发展的三个阶段</h3>
<p>1969年，从单个网络ARPANET向互联网发展</p>
<ul>
<li>
<p>1969年，第一个分组交互网<strong>ARPANET</strong></p>
</li>
<li>
<p>70年代中期，研究多种网络之间的互连</p>
</li>
<li>
<p>1983年，<strong>TCP/IP协议</strong>成为ARPANET的标准协议（因特网诞生时间）</p>
</li>
</ul>
<p>1985年，逐步形成三级结构的因特网</p>
<ul>
<li>
<p>1985年，NSF（美国国家科学基金会）围绕六个大型计算机中心建设<strong>NSFNET</strong>（主干网、地区网和校园网）</p>
</li>
<li>
<p>1990年，ARPANET任务完成，正式关闭</p>
</li>
<li>
<p>1991年，美国政府将因特网主干网交给私人公司经营，并开始对接入因特网的单位收费</p>
</li>
</ul>
<p>1993年，逐步形成了多层次ISP结构的因特网</p>
<ul>
<li>
<p>1993年，NSFNET逐渐被若干个商用因特网主干网代替;政府机构不再负责因特网运营，让各种<strong>因特网服务提供者ISP</strong>来运营</p>
</li>
<li>
<p>1994年，<strong>万维网www技术</strong>促使因特网迅猛发展</p>
</li>
<li>
<p>1995年NSFNET停止运作，<strong>因特网彻底商业化</strong></p>
</li>
</ul>
<blockquote>
<p>我们通过地区的因特网服务提供者ISP接入因特网，我国就是电信移动联通</p>
</blockquote>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-1/1-1-4.png" alt=""  />
</p>
<p>基于ISP的三层结构的因特网</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-1/1-1-5.png" alt=""  />
</p>
<h3 id="因特网的标准化工作">因特网的标准化工作</h3>
<p>因特网的标准化工作对因特网的发展起了非常重要的作用。</p>
<p>因特网在制定其标准上的一个很大的特点是<strong>面向公众</strong>。</p>
<ul>
<li>
<p>因特网所有的<strong>RFC</strong>（REquest For COMments）技术文档都可以从因特网上免费下载（http://www.ietf.org/rfc.html）</p>
</li>
<li>
<p>任何人都可以随时用电子邮件发表对某个文档的意见或建议。</p>
</li>
</ul>
<p><strong>因特网协会ISOC</strong>是一个国际性的组织，它负责对因特网进行全面管理，以及在世界范围内促进其发展和使用。</p>
<ul>
<li>
<p>因特网体系结构委员会IAB，负责管理因特网有关协议的开发</p>
</li>
<li>
<p>因特网工程部IETF，负责研究中短期工程问题，主要针对协议的开发和标准化</p>
</li>
<li>
<p>因特网研究部IRTF，从事理论方面的研究和开发一些需要长期考虑的问题</p>
</li>
</ul>
<p>制订因特网的正式标准要经过以下<strong>4个阶段</strong></p>
<ul>
<li>
<p>(1)因特网草案（在这个阶段还不是RFC文档)</p>
</li>
<li>
<p>(2)建议标准（从这个阶段开始就成为RFC文档)</p>
</li>
<li>
<p>(3)草案标准</p>
</li>
<li>
<p>(4)因特网标准</p>
</li>
</ul>
<h3 id="因特网的组成">因特网的组成</h3>
<p>边缘部分：由所有连接在因特网上的<strong>主机</strong>组成。这部分是<strong>用户直接使用</strong>的，用来进行<strong>通信</strong>（传送数据、音频或视频）和<strong>资源共享</strong>。</p>
<p>核心部分：由<strong>大量网络</strong>和连接这些网络的<strong>路由器</strong>组成。这部分是<strong>为边缘部分提供服务</strong>的（提供连通性和交换)。</p>
<p><img loading="lazy" src="https://img.0pt.im/computernet/1-1/1-1-6.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>舞文弄墨</title>
      <link>https://blog.0pt.im/think/friend-0-0-1/</link>
      <pubDate>Fri, 03 Feb 2023 00:48:58 +0800</pubDate>
      
      <guid>https://blog.0pt.im/think/friend-0-0-1/</guid>
      <description>现代的青年愈发得迷失了。我也一样。所谓沉默，沉默的大多数。所谓嘈杂。一位看客，或许会好过突如其来的死亡吧。害怕失去害怕未知，害怕自己会对现实抱有期望
听起来好像可笑的很。在一个青春中畏手畏脚，不敢做出承诺，也不怎么负责任。几年后回头看看，那会是庆幸还是懊悔？老者们责备，嘲笑年轻人的爱情，认为其只是源于欣赏，源于心理上虚假的自我幻想。青年人却嘲讽老者的“迂”，自以为能为另一半负起责任，能够互相包容。
好像都有些偏激。
仔细省察下来，自己亦无资格评头论足，有时候很想写一本自传体小说（像《在路上》那样）写下虚妄且矛盾的青春。你此时的不如意又有多重要，又有多少意义呢？积累成的只有经验。呵！又是经验，世故的思想，不再的初心。
一名茫然的探险者，是要深知真情流露之危险的。不妨带上一幅假笑的面具，默默收下“这个孩子/人性格真好/善良/听话”的类似夸耀。自己究竟是什么啊？我究竟又是怎样一个人？“面具戴得太久了，久而久之，就会粘在脸上，想要摘下来，除非伤筋动骨扒皮”
朋友以异样之眼光审视我正进行之写作，好像见到了什么不可理喻的东西。这纯粹是我浪费时间吧，我们是高三啊。有时我也这么认为，但还是要写点什么。感受到的真正的悲伤，会源自心底，怎么会像分数的小挫折。所谓悲伤，是心中只能掩盖不能化开的吧
所谓大苦难，所谓人生
阅读摘录：亲戚或余悲，他人亦已歌。死去何所道，托体同山阿。
中国人极善造神，造了再毁，毁了再造，乐此不疲。</description>
      <content:encoded><![CDATA[<p>现代的青年愈发得迷失了。我也一样。所谓沉默，沉默的大多数。所谓嘈杂。一位看客，或许会好过突如其来的死亡吧。害怕失去害怕未知，害怕自己会对现实抱有期望<br>
听起来好像可笑的很。在一个青春中畏手畏脚，不敢做出承诺，也不怎么负责任。几年后回头看看，那会是庆幸还是懊悔？老者们责备，嘲笑年轻人的爱情，认为其只是源于欣赏，源于心理上虚假的自我幻想。青年人却嘲讽老者的“迂”，自以为能为另一半负起责任，能够互相包容。<br>
好像都有些偏激。</p>
<hr>
<p>仔细省察下来，自己亦无资格评头论足，有时候很想写一本自传体小说（像《在路上》那样）写下虚妄且矛盾的青春。你此时的不如意又有多重要，又有多少意义呢？积累成的只有经验。呵！又是经验，世故的思想，不再的初心。<br>
一名茫然的探险者，是要深知真情流露之危险的。不妨带上一幅假笑的面具，默默收下“这个孩子/人性格真好/善良/听话”的类似夸耀。自己究竟是什么啊？我究竟又是怎样一个人？“面具戴得太久了，久而久之，就会粘在脸上，想要摘下来，除非伤筋动骨扒皮”<br>
朋友以异样之眼光审视我正进行之写作，好像见到了什么不可理喻的东西。这纯粹是我浪费时间吧，我们是高三啊。有时我也这么认为，但还是要写点什么。感受到的真正的悲伤，会源自心底，怎么会像分数的小挫折。所谓悲伤，是心中只能掩盖不能化开的吧<br>
所谓大苦难，所谓人生<br>
阅读摘录：亲戚或余悲，他人亦已歌。死去何所道，托体同山阿。</p>
<p>中国人极善造神，造了再毁，毁了再造，乐此不疲。</p>
]]></content:encoded>
    </item>
    
    
    
  </channel>
</rss>
